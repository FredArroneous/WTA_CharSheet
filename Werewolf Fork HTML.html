<div class="charactersheet tab-pane charsheet lang-undefined" style="display: block;">
<input name="attr_sheet_version" type="hidden">
<input name="attr_sheet_type" type="hidden" value="pc">
<input name="attr_sheet_page" type="hidden" value="front">
<input name="attr_char_name_string" type="hidden" value="@{Macros|">
<input name="attr_attrib_selector" type="hidden" value="?{Second Attribute|Strength,strength|Dexterity,dexterity|Stamina,stamina|Charisma,charisma|Manipulation,manipulation|Composure,composure|Intelligence,intelligence|Wits,wits|Resolve,resolve">
<input name="attr_whisper" type="hidden" value="">
<input name="attr_npc_attribute_select" type="hidden" value="?{Linked Attribute?|None,0|Physical,@{physical}[PHYSICAL]|Social,@{social}[SOCIAL]|Mental,@{Mental}[MENTAL]}">




<input name="attr_spcsettings_modal_toggle" type="hidden" value="0">
<div class="modal modal--spcsettings">
  <div class="modal__shroud">
    <input name="attr_spcsettings_modal_toggle" type="checkbox" value="0">
  </div>
  <div class="modal__wrapper">
    <div class="modal__innerwrapper">
      <div class="modal__header">
        <h3>SPC Sheet Settings</h3>
        <div class="modal__close">
          <input class="modal__closeinput" name="attr_spcsettings_modal_toggle" type="checkbox" value="0">
          <div class="modal__close-symbol">*</div>
        </div>
      </div>
      <div class="modal__grid">
        <div class="section-choice">
          <div class="section-choice__label">Characteristics</div>
          <select class=" undefined__select undefined__select--section_characteristics" name="attr_section_characteristics">
            <option selected="selected" value="0">Simple</option>
            <option value="1">Complex</option>
          </select>
        </div>
        <div class="section-choice">
          <div class="section-choice__label">Secondary Attributes</div>
          <input class=" undefined__checkbox undefined__checkbox--section_secondary" alt="Secondary Attributes" name="attr_section_secondary" title="Secondary Attributes" type="checkbox" value="1" placeholder="placeholder_section_secondary">
        </div>
        <div class="section-choice">
          <div class="section-choice__label">General Difficulties</div>
          <input class=" undefined__checkbox undefined__checkbox--section_generaldiff" alt="General Difficulties" name="attr_section_generaldiff" title="General Difficulties" type="checkbox" value="1" placeholder="placeholder_section_generaldiff">
        </div>
        <div class="section-choice">
          <div class="section-choice__label">Exceptional Pools</div>
          <input class=" undefined__checkbox undefined__checkbox--section_exceptional" alt="Exceptional Pools" name="attr_section_exceptional" title="Exceptional Pools" type="checkbox" value="1" placeholder="placeholder_section_exceptional">
        </div>
        <div class="section-choice">
          <div class="section-choice__label">Skills</div>
          <input class=" undefined__checkbox undefined__checkbox--section_skills" alt="Skills" name="attr_section_skills" title="Skills" type="checkbox" value="1" placeholder="placeholder_section_skills">
        </div>
        <div class="section-choice">
          <div class="section-choice__label">Disciplines</div>
          <input class=" undefined__checkbox undefined__checkbox--section_disciplines" alt="Disciplines" name="attr_section_disciplines" title="Disciplines" type="checkbox" value="1" placeholder="placeholder_section_disciplines">
        </div>
        <div class="section-choice">
          <div class="section-choice__label">Special</div>
          <input class=" undefined__checkbox undefined__checkbox--section_special" alt="Special" name="attr_section_special" title="Special" type="checkbox" value="1" placeholder="placeholder_section_special">
        </div>
      </div>
    </div>
  </div>
</div>
<input name="attr_spcmodal_toggle" type="hidden" value="0">
<div class="modal modal--spcmodal">
  <div class="modal__shroud"></div>
  <div class="modal__wrapper">
    <div class="modal__innerwrapper">
      <h3>Convert to Storyteller-Played Character</h3>
      <p>Doing so will delete any existing character data.</p>
      <div class="modal__footer">
        <button class="modal__confirm" name="act_spc-confirm" type="action">Confirm</button>
        <button class="modal__dismiss" name="act_spc-dismiss" type="action">Reject</button>
      </div>
    </div>
  </div>
</div>
<div class="v5e compendium-drop-target spcs">
  <input accept="Category" name="attr_drop_category" type="hidden">
  <input accept="Name" name="attr_drop_name" type="hidden">
  <input accept="data" name="attr_drop_data" type="hidden">
  <input accept="Content" name="attr_drop_content" type="hidden">
  <div class="pc">
    <div class="front">
      <div class="row header justify-content-around">
        <div class="logo col-md-4"><img src="https://files.d20.io/images/228598570/MXFnEFztdj2G9ndi1slSeA/max.png?1623710565"></div>
      </div>
      <div class="navigation row justify-content-between align-items-center">
        <div class="navigation__whisper col-md-3">
          <button class="action-roll navigation__roll" name="act_arbitrary" type="action">
          </button>
          <input name="attr_whisper_toggle" type="hidden" value="0">
          <div class="whisper">
            <input name="attr_whisper_toggle" type="checkbox">
            <div class="whisper__grid"><strong>Whisper Roll</strong><span class="whisper__slider"></span></div>
          </div>
        </div>
        <div class="navigation__pages col-md-4">
          <div class="navigation__container row justify-content-center">
            <button class="col navigation__item" name="act_front" type="action">Front</button>
            <button class="col navigation__item" name="act_reverse" type="action">Reverse</button>
          </div>
        </div>
        <div class="navigation__sheets col-md-2">
          <select class="navigation__select" name="attr_sheet_type">
            <option value="pc">PC Sheet</option>
            <option value="npc">SPC Sheet</option>

          </select>
        </div>
      </div>
      <input name="attr_lock_toggle" type="hidden" value="0">
      <div class="row basic">
        <div class="col-md-4">
          <div class="input input--text">
            <div class="input__title">Name</div>
            <input class="input__interface" name="attr_character_name" type="text">
          </div>
        </div>
        <div class="col-md-4">
          <div class="input input--text">
            <div class="input__title">Concept</div>
            <input class="input__interface" name="attr_concept" type="text">
          </div>
        </div>
        <div class="col-md-4">
          <div class="input input--text">
            <!--
            <div class="input__title">Predator</div>
            <input class="input__interface" name="attr_predator" type="text">
            -->
            <div class="input__title">Patron</div>
            <input class="input__interface" name="attr_patron" type="text">
          </div>
        </div>
        <div class="col-md-4">
          <div class="input input--text">
            <div class="input__title">Chronicle</div>
            <input class="input__interface" name="attr_chronicle" type="text">
          </div>
        </div>
        <div class="col-md-4">
          <div class="input input--text">
            <!--
            <div class="input__title">Ambition</div>
            <input class="input__interface" name="attr_ambition" type="text">
            -->
            <div class="input__title">Auspice</div>
            <input class="input__interface" name="attr_auspice" type="text">
          </div>
        </div>
        <div class="col-md-4">
          <div class="input input--text">
            <!--
            <div class="input__title">Clan</div>
            <input class="input__interface" name="attr_clan" type="text">
            -->
            <div class="input__title">Tribe</div>
            <input class="input__interface" name="attr_tribe" type="text">
          </div>
        </div>
<!--
        <div class="col-md-4">
          <div class="input input--text">
            <div class="input__title">Sire</div>
            <input class="input__interface" name="attr_sire" type="text">
          </div>
        </div>
        <div class="col-md-4">
          <div class="input input--text">
            <div class="input__title">Desire</div>
            <input class="input__interface" name="attr_desire" type="text">
          </div>
        </div>
        <div class="col-md-4">
          <div class="input input--text">
            <div class="input__title">Generation</div>
            <input class="input__interface" name="attr_generation" type="text">
          </div>
        </div>
      </div>
      -->
      <div class="attributes">
        <h2 class="attributes__header"><span>Attributes</span>
          <input name="attr_lock_toggle" type="hidden" value="0">
          <div class="lock">
            <input name="attr_lock_toggle" type="checkbox">
            <div class="lock__grid"><span class="lock__icon"></span><strong>Lock Dots</strong></div>
          </div>
        </h2>
        <div class="row"><span style="display:none">Impaired</span>
          <div class="attributes__column col-md-4">
            <input class="impaired" name="attr_impaired_health" type="hidden" value="0">
            <h3>physical</h3>
            <div class="attributes__wrapper">
              <div class="attributes__impair-wrapper">
                <div class="attribute">
                  <input name="attr_strength_base" type="hidden">
                  <input name="attr_impaired_strength" type="hidden" value="0">
                  <div class="attribute__title">
                    <button class="action-roll" name="act_strength" type="action"><span>Strength</span>
                    </button>
                  </div>
                  <div class="attribute__dots">
                    <div class="dots">
                      <input name="attr_strength" type="hidden" value="0">
                      <div class="dots__wrapper">
                        <div class="dots__container">
                          <input class="dot__hidden" checked="checked" name="attr_strength" type="checkbox" value="0">
                          <input class="dot__hidden" name="attr_strength" type="checkbox" value="1">
                          <div class="dot dot--1 dot--circle dot_max_1 ">
                            <input class="dot__input" name="attr_strength" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                          </div>
                          <input class="dot__hidden" name="attr_strength" type="checkbox" value="2">
                          <div class="dot dot--2 dot--circle dot_max_2 ">
                            <input class="dot__input" name="attr_strength" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                          </div>
                          <input class="dot__hidden" name="attr_strength" type="checkbox" value="3">
                          <div class="dot dot--3 dot--circle dot_max_3 ">
                            <input class="dot__input" name="attr_strength" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                          </div>
                          <input class="dot__hidden" name="attr_strength" type="checkbox" value="4">
                          <div class="dot dot--4 dot--circle dot_max_4 ">
                            <input class="dot__input" name="attr_strength" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                          </div>
                          <input class="dot__hidden" name="attr_strength" type="checkbox" value="5">
                          <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                            <input class="dot__input" name="attr_strength" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                          </div>
                          <div class="dot dot--reset dot--circle">
                            <input class="dot__input" name="attr_strength" type="radio" value="0"><span class="dot__clear">×</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="attribute">
                  <input name="attr_dexterity_base" type="hidden">
                  <input name="attr_impaired_dexterity" type="hidden" value="0">
                  <div class="attribute__title">
                    <button class="action-roll" name="act_dexterity" type="action"><span>Dexterity</span>
                    </button>
                  </div>
                  <div class="attribute__dots">
                    <div class="dots">
                      <input name="attr_dexterity" type="hidden" value="0">
                      <div class="dots__wrapper">
                        <div class="dots__container">
                          <input class="dot__hidden" checked="checked" name="attr_dexterity" type="checkbox" value="0">
                          <input class="dot__hidden" name="attr_dexterity" type="checkbox" value="1">
                          <div class="dot dot--1 dot--circle dot_max_1 ">
                            <input class="dot__input" name="attr_dexterity" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                          </div>
                          <input class="dot__hidden" name="attr_dexterity" type="checkbox" value="2">
                          <div class="dot dot--2 dot--circle dot_max_2 ">
                            <input class="dot__input" name="attr_dexterity" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                          </div>
                          <input class="dot__hidden" name="attr_dexterity" type="checkbox" value="3">
                          <div class="dot dot--3 dot--circle dot_max_3 ">
                            <input class="dot__input" name="attr_dexterity" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                          </div>
                          <input class="dot__hidden" name="attr_dexterity" type="checkbox" value="4">
                          <div class="dot dot--4 dot--circle dot_max_4 ">
                            <input class="dot__input" name="attr_dexterity" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                          </div>
                          <input class="dot__hidden" name="attr_dexterity" type="checkbox" value="5">
                          <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                            <input class="dot__input" name="attr_dexterity" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                          </div>
                          <div class="dot dot--reset dot--circle">
                            <input class="dot__input" name="attr_dexterity" type="radio" value="0"><span class="dot__clear">×</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="attribute">
                  <input name="attr_stamina_base" type="hidden">
                  <input name="attr_impaired_stamina" type="hidden" value="0">
                  <div class="attribute__title">
                    <button class="action-roll" name="act_stamina" type="action"><span>Stamina</span>
                    </button>
                  </div>
                  <div class="attribute__dots">
                    <div class="dots">
                      <input name="attr_stamina" type="hidden" value="0">
                      <div class="dots__wrapper">
                        <div class="dots__container">
                          <input class="dot__hidden" checked="checked" name="attr_stamina" type="checkbox" value="0">
                          <input class="dot__hidden" name="attr_stamina" type="checkbox" value="1">
                          <div class="dot dot--1 dot--circle dot_max_1 ">
                            <input class="dot__input" name="attr_stamina" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                          </div>
                          <input class="dot__hidden" name="attr_stamina" type="checkbox" value="2">
                          <div class="dot dot--2 dot--circle dot_max_2 ">
                            <input class="dot__input" name="attr_stamina" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                          </div>
                          <input class="dot__hidden" name="attr_stamina" type="checkbox" value="3">
                          <div class="dot dot--3 dot--circle dot_max_3 ">
                            <input class="dot__input" name="attr_stamina" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                          </div>
                          <input class="dot__hidden" name="attr_stamina" type="checkbox" value="4">
                          <div class="dot dot--4 dot--circle dot_max_4 ">
                            <input class="dot__input" name="attr_stamina" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                          </div>
                          <input class="dot__hidden" name="attr_stamina" type="checkbox" value="5">
                          <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                            <input class="dot__input" name="attr_stamina" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                          </div>
                          <div class="dot dot--reset dot--circle">
                            <input class="dot__input" name="attr_stamina" type="radio" value="0"><span class="dot__clear">×</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="attributes__column col-md-4">
            <input class="impaired" name="attr_impaired_willpower" type="hidden" value="0">
            <h3>social</h3>
            <div class="attributes__wrapper">
              <div class="attributes__impair-wrapper">
                <div class="attribute">
                  <input name="attr_charisma_base" type="hidden">
                  <input name="attr_impaired_charisma" type="hidden" value="0">
                  <div class="attribute__title">
                    <button class="action-roll" name="act_charisma" type="action"><span>Charisma</span>
                    </button>
                  </div>
                  <div class="attribute__dots">
                    <div class="dots">
                      <input name="attr_charisma" type="hidden" value="0">
                      <div class="dots__wrapper">
                        <div class="dots__container">
                          <input class="dot__hidden" checked="checked" name="attr_charisma" type="checkbox" value="0">
                          <input class="dot__hidden" name="attr_charisma" type="checkbox" value="1">
                          <div class="dot dot--1 dot--circle dot_max_1 ">
                            <input class="dot__input" name="attr_charisma" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                          </div>
                          <input class="dot__hidden" name="attr_charisma" type="checkbox" value="2">
                          <div class="dot dot--2 dot--circle dot_max_2 ">
                            <input class="dot__input" name="attr_charisma" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                          </div>
                          <input class="dot__hidden" name="attr_charisma" type="checkbox" value="3">
                          <div class="dot dot--3 dot--circle dot_max_3 ">
                            <input class="dot__input" name="attr_charisma" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                          </div>
                          <input class="dot__hidden" name="attr_charisma" type="checkbox" value="4">
                          <div class="dot dot--4 dot--circle dot_max_4 ">
                            <input class="dot__input" name="attr_charisma" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                          </div>
                          <input class="dot__hidden" name="attr_charisma" type="checkbox" value="5">
                          <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                            <input class="dot__input" name="attr_charisma" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                          </div>
                          <div class="dot dot--reset dot--circle">
                            <input class="dot__input" name="attr_charisma" type="radio" value="0"><span class="dot__clear">×</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="attribute">
                  <input name="attr_manipulation_base" type="hidden">
                  <input name="attr_impaired_manipulation" type="hidden" value="0">
                  <div class="attribute__title">
                    <button class="action-roll" name="act_manipulation" type="action"><span>Manipulation</span>
                    </button>
                  </div>
                  <div class="attribute__dots">
                    <div class="dots">
                      <input name="attr_manipulation" type="hidden" value="0">
                      <div class="dots__wrapper">
                        <div class="dots__container">
                          <input class="dot__hidden" checked="checked" name="attr_manipulation" type="checkbox" value="0">
                          <input class="dot__hidden" name="attr_manipulation" type="checkbox" value="1">
                          <div class="dot dot--1 dot--circle dot_max_1 ">
                            <input class="dot__input" name="attr_manipulation" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                          </div>
                          <input class="dot__hidden" name="attr_manipulation" type="checkbox" value="2">
                          <div class="dot dot--2 dot--circle dot_max_2 ">
                            <input class="dot__input" name="attr_manipulation" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                          </div>
                          <input class="dot__hidden" name="attr_manipulation" type="checkbox" value="3">
                          <div class="dot dot--3 dot--circle dot_max_3 ">
                            <input class="dot__input" name="attr_manipulation" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                          </div>
                          <input class="dot__hidden" name="attr_manipulation" type="checkbox" value="4">
                          <div class="dot dot--4 dot--circle dot_max_4 ">
                            <input class="dot__input" name="attr_manipulation" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                          </div>
                          <input class="dot__hidden" name="attr_manipulation" type="checkbox" value="5">
                          <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                            <input class="dot__input" name="attr_manipulation" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                          </div>
                          <div class="dot dot--reset dot--circle">
                            <input class="dot__input" name="attr_manipulation" type="radio" value="0"><span class="dot__clear">×</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="attribute">
                  <input name="attr_composure_base" type="hidden">
                  <input name="attr_impaired_composure" type="hidden" value="0">
                  <div class="attribute__title">
                    <button class="action-roll" name="act_composure" type="action"><span>Composure</span>
                    </button>
                  </div>
                  <div class="attribute__dots">
                    <div class="dots">
                      <input name="attr_composure" type="hidden" value="0">
                      <div class="dots__wrapper">
                        <div class="dots__container">
                          <input class="dot__hidden" checked="checked" name="attr_composure" type="checkbox" value="0">
                          <input class="dot__hidden" name="attr_composure" type="checkbox" value="1">
                          <div class="dot dot--1 dot--circle dot_max_1 ">
                            <input class="dot__input" name="attr_composure" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                          </div>
                          <input class="dot__hidden" name="attr_composure" type="checkbox" value="2">
                          <div class="dot dot--2 dot--circle dot_max_2 ">
                            <input class="dot__input" name="attr_composure" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                          </div>
                          <input class="dot__hidden" name="attr_composure" type="checkbox" value="3">
                          <div class="dot dot--3 dot--circle dot_max_3 ">
                            <input class="dot__input" name="attr_composure" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                          </div>
                          <input class="dot__hidden" name="attr_composure" type="checkbox" value="4">
                          <div class="dot dot--4 dot--circle dot_max_4 ">
                            <input class="dot__input" name="attr_composure" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                          </div>
                          <input class="dot__hidden" name="attr_composure" type="checkbox" value="5">
                          <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                            <input class="dot__input" name="attr_composure" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                          </div>
                          <div class="dot dot--reset dot--circle">
                            <input class="dot__input" name="attr_composure" type="radio" value="0"><span class="dot__clear">×</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="attributes__column col-md-4">
            <input class="impaired" name="attr_impaired_willpower" type="hidden" value="0">
            <h3>mental</h3>
            <div class="attributes__wrapper">
              <div class="attributes__impair-wrapper">
                <div class="attribute">
                  <input name="attr_intelligence_base" type="hidden">
                  <input name="attr_impaired_intelligence" type="hidden" value="0">
                  <div class="attribute__title">
                    <button class="action-roll" name="act_intelligence" type="action"><span>Intelligence</span>
                    </button>
                  </div>
                  <div class="attribute__dots">
                    <div class="dots">
                      <input name="attr_intelligence" type="hidden" value="0">
                      <div class="dots__wrapper">
                        <div class="dots__container">
                          <input class="dot__hidden" checked="checked" name="attr_intelligence" type="checkbox" value="0">
                          <input class="dot__hidden" name="attr_intelligence" type="checkbox" value="1">
                          <div class="dot dot--1 dot--circle dot_max_1 ">
                            <input class="dot__input" name="attr_intelligence" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                          </div>
                          <input class="dot__hidden" name="attr_intelligence" type="checkbox" value="2">
                          <div class="dot dot--2 dot--circle dot_max_2 ">
                            <input class="dot__input" name="attr_intelligence" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                          </div>
                          <input class="dot__hidden" name="attr_intelligence" type="checkbox" value="3">
                          <div class="dot dot--3 dot--circle dot_max_3 ">
                            <input class="dot__input" name="attr_intelligence" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                          </div>
                          <input class="dot__hidden" name="attr_intelligence" type="checkbox" value="4">
                          <div class="dot dot--4 dot--circle dot_max_4 ">
                            <input class="dot__input" name="attr_intelligence" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                          </div>
                          <input class="dot__hidden" name="attr_intelligence" type="checkbox" value="5">
                          <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                            <input class="dot__input" name="attr_intelligence" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                          </div>
                          <div class="dot dot--reset dot--circle">
                            <input class="dot__input" name="attr_intelligence" type="radio" value="0"><span class="dot__clear">×</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="attribute">
                  <input name="attr_wits_base" type="hidden">
                  <input name="attr_impaired_wits" type="hidden" value="0">
                  <div class="attribute__title">
                    <button class="action-roll" name="act_wits" type="action"><span>Wits</span>
                    </button>
                  </div>
                  <div class="attribute__dots">
                    <div class="dots">
                      <input name="attr_wits" type="hidden" value="0">
                      <div class="dots__wrapper">
                        <div class="dots__container">
                          <input class="dot__hidden" checked="checked" name="attr_wits" type="checkbox" value="0">
                          <input class="dot__hidden" name="attr_wits" type="checkbox" value="1">
                          <div class="dot dot--1 dot--circle dot_max_1 ">
                            <input class="dot__input" name="attr_wits" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                          </div>
                          <input class="dot__hidden" name="attr_wits" type="checkbox" value="2">
                          <div class="dot dot--2 dot--circle dot_max_2 ">
                            <input class="dot__input" name="attr_wits" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                          </div>
                          <input class="dot__hidden" name="attr_wits" type="checkbox" value="3">
                          <div class="dot dot--3 dot--circle dot_max_3 ">
                            <input class="dot__input" name="attr_wits" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                          </div>
                          <input class="dot__hidden" name="attr_wits" type="checkbox" value="4">
                          <div class="dot dot--4 dot--circle dot_max_4 ">
                            <input class="dot__input" name="attr_wits" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                          </div>
                          <input class="dot__hidden" name="attr_wits" type="checkbox" value="5">
                          <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                            <input class="dot__input" name="attr_wits" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                          </div>
                          <div class="dot dot--reset dot--circle">
                            <input class="dot__input" name="attr_wits" type="radio" value="0"><span class="dot__clear">×</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="attribute">
                  <input name="attr_resolve_base" type="hidden">
                  <input name="attr_impaired_resolve" type="hidden" value="0">
                  <div class="attribute__title">
                    <button class="action-roll" name="act_resolve" type="action"><span>Resolve</span>
                    </button>
                  </div>
                  <div class="attribute__dots">
                    <div class="dots">
                      <input name="attr_resolve" type="hidden" value="0">
                      <div class="dots__wrapper">
                        <div class="dots__container">
                          <input class="dot__hidden" checked="checked" name="attr_resolve" type="checkbox" value="0">
                          <input class="dot__hidden" name="attr_resolve" type="checkbox" value="1">
                          <div class="dot dot--1 dot--circle dot_max_1 ">
                            <input class="dot__input" name="attr_resolve" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                          </div>
                          <input class="dot__hidden" name="attr_resolve" type="checkbox" value="2">
                          <div class="dot dot--2 dot--circle dot_max_2 ">
                            <input class="dot__input" name="attr_resolve" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                          </div>
                          <input class="dot__hidden" name="attr_resolve" type="checkbox" value="3">
                          <div class="dot dot--3 dot--circle dot_max_3 ">
                            <input class="dot__input" name="attr_resolve" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                          </div>
                          <input class="dot__hidden" name="attr_resolve" type="checkbox" value="4">
                          <div class="dot dot--4 dot--circle dot_max_4 ">
                            <input class="dot__input" name="attr_resolve" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                          </div>
                          <input class="dot__hidden" name="attr_resolve" type="checkbox" value="5">
                          <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                            <input class="dot__input" name="attr_resolve" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                          </div>
                          <div class="dot dot--reset dot--circle">
                            <input class="dot__input" name="attr_resolve" type="radio" value="0"><span class="dot__clear">×</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="vitals">
        <input name="attr_vitals_toggle" type="hidden" value="0">
        <div class="vitals__settings">
          <input class="vitals__toggle" name="attr_vitals_toggle" type="checkbox"><span>y</span>
        </div>
        <div class="row vitals__row--normal">
          <input class="impaired" name="attr_impaired_health" type="hidden" value="0">
          <div class="health col-md-6"><span class="impaired__label" name="attr_impaired_health_label"> </span>
            <h3 class="health__title">Health</h3>
            <div class="health__dots">
              <div class="damage">
                <div class="damage__container">
                  <input class="damage__max" name="attr_health_max" type="hidden" value="3">
                  <input name="attr_health" type="hidden" value="0">
                  <input name="attr_health_aggravated" type="hidden" value="0">
                  <input name="attr_health_superficial" type="hidden" value="0">
                  <input class="point__hidden" name="attr_health_1" type="hidden">
                  <button class="point  point--square point__max--1" name="act_health_1" type="action"></button>
                  <input class="point__hidden" name="attr_health_2" type="hidden">
                  <button class="point  point--square point__max--2" name="act_health_2" type="action"></button>
                  <input class="point__hidden" name="attr_health_3" type="hidden">
                  <button class="point  point--square point__max--3" name="act_health_3" type="action"></button>
                  <input class="point__hidden" name="attr_health_4" type="hidden">
                  <button class="point  point--square point__max--4" name="act_health_4" type="action"></button>
                  <input class="point__hidden" name="attr_health_5" type="hidden">
                  <button class="point dot--rightmargin point--square point__max--5" name="act_health_5" type="action"></button>
                  <input class="point__hidden" name="attr_health_6" type="hidden">
                  <button class="point  point--square point__max--6" name="act_health_6" type="action"></button>
                  <input class="point__hidden" name="attr_health_7" type="hidden">
                  <button class="point  point--square point__max--7" name="act_health_7" type="action"></button>
                  <input class="point__hidden" name="attr_health_8" type="hidden">
                  <button class="point  point--square point__max--8" name="act_health_8" type="action"></button>
                  <input class="point__hidden" name="attr_health_9" type="hidden">
                  <button class="point  point--square point__max--9" name="act_health_9" type="action"></button>
                  <input class="point__hidden" name="attr_health_10" type="hidden">
                  <button class="point dot--rightmargin point--square point__max--10" name="act_health_10" type="action"></button>
                  <input class="point__hidden" name="attr_health_11" type="hidden">
                  <button class="point  point--square point__max--11" name="act_health_11" type="action"></button>
                  <input class="point__hidden" name="attr_health_12" type="hidden">
                  <button class="point  point--square point__max--12" name="act_health_12" type="action"></button>
                  <input class="point__hidden" name="attr_health_13" type="hidden">
                  <button class="point  point--square point__max--13" name="act_health_13" type="action"></button>
                  <input class="point__hidden" name="attr_health_14" type="hidden">
                  <button class="point  point--square point__max--14" name="act_health_14" type="action"></button>
                  <input class="point__hidden" name="attr_health_15" type="hidden">
                  <button class="point dot--rightmargin point--square point__max--15" name="act_health_15" type="action"></button>
                  <button class="point--reset" name="act_health_reset" type="action">×</button>
                </div>
              </div>
            </div>
          </div>
          <input name="attr_willpower_maximum" type="hidden" value="0">
          <input class="impaired" name="attr_impaired_willpower" type="hidden" value="0">
          <div class="willpower col-md-6"><span class="impaired__label" name="attr_impaired_willpower_label"> </span>
            <button class="action-roll willpower__title action-roll--redtext" name="act_willpower" type="action">
              <h3 class="willpower__title">Willpower</h3>
            </button>
            <div class="willpower__dots">
              <div class="damage">
                <div class="damage__container">
                  <input class="damage__max" name="attr_willpower_max" type="hidden" value="0">
                  <input name="attr_willpower" type="hidden" value="0">
                  <input name="attr_willpower_aggravated" type="hidden" value="0">
                  <input name="attr_willpower_superficial" type="hidden" value="0">
                  <input class="point__hidden" name="attr_willpower_1" type="hidden">
                  <button class="point  point--square point__max--1" name="act_willpower_1" type="action"></button>
                  <input class="point__hidden" name="attr_willpower_2" type="hidden">
                  <button class="point  point--square point__max--2" name="act_willpower_2" type="action"></button>
                  <input class="point__hidden" name="attr_willpower_3" type="hidden">
                  <button class="point  point--square point__max--3" name="act_willpower_3" type="action"></button>
                  <input class="point__hidden" name="attr_willpower_4" type="hidden">
                  <button class="point  point--square point__max--4" name="act_willpower_4" type="action"></button>
                  <input class="point__hidden" name="attr_willpower_5" type="hidden">
                  <button class="point dot--rightmargin point--square point__max--5" name="act_willpower_5" type="action"></button>
                  <input class="point__hidden" name="attr_willpower_6" type="hidden">
                  <button class="point  point--square point__max--6" name="act_willpower_6" type="action"></button>
                  <input class="point__hidden" name="attr_willpower_7" type="hidden">
                  <button class="point  point--square point__max--7" name="act_willpower_7" type="action"></button>
                  <input class="point__hidden" name="attr_willpower_8" type="hidden">
                  <button class="point  point--square point__max--8" name="act_willpower_8" type="action"></button>
                  <input class="point__hidden" name="attr_willpower_9" type="hidden">
                  <button class="point  point--square point__max--9" name="act_willpower_9" type="action"></button>
                  <input class="point__hidden" name="attr_willpower_10" type="hidden">
                  <button class="point dot--rightmargin point--square point__max--10" name="act_willpower_10" type="action"></button>
                  <input class="point__hidden" name="attr_willpower_11" type="hidden">
                  <button class="point  point--square point__max--11" name="act_willpower_11" type="action"></button>
                  <input class="point__hidden" name="attr_willpower_12" type="hidden">
                  <button class="point  point--square point__max--12" name="act_willpower_12" type="action"></button>
                  <input class="point__hidden" name="attr_willpower_13" type="hidden">
                  <button class="point  point--square point__max--13" name="act_willpower_13" type="action"></button>
                  <input class="point__hidden" name="attr_willpower_14" type="hidden">
                  <button class="point  point--square point__max--14" name="act_willpower_14" type="action"></button>
                  <input class="point__hidden" name="attr_willpower_15" type="hidden">
                  <button class="point dot--rightmargin point--square point__max--15" name="act_willpower_15" type="action"></button>
                  <button class="point--reset" name="act_willpower_reset" type="action">×</button>
                </div>
              </div>
            </div>
            <div class="willpower__buttons">
              <button class="action-roll resist" name="act_resist" type="action"><span>Resist Frenzy</span>
              </button>
              <button class="action-roll reroll" name="act_reroll" type="action"><span>Willpower Reroll</span>
              </button>
            </div>
          </div>
        </div>
        <div class="vitals__row--settings">
          <div class="row">
            <div class="col-md-6">
              <h3 class="health__title">Health</h3>
            </div>
            <div class="col-md-6">
              <h3 class="health__title">Willpower</h3>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="vitals__damage">
                <div class="vitals__superficial">
                  <label>Superficial Damage</label><span name="attr_health_superficial">0</span>
                </div>
                <div class="vitals__aggravated">
                  <label>Aggravated Damage</label><span name="attr_health_aggravated">0</span>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="vitals__damage">
                <div class="vitals__superficial">
                  <label>Superficial Damage</label><span name="attr_willpower_superficial">0</span>
                </div>
                <div class="vitals__aggravated">
                  <label>Aggravated Damage</label><span name="attr_willpower_aggravated">0</span>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="vitals__formula">
                <label>Maximum</label><span></span>
                <label>Stamina</label><span></span><span></span><span></span>
                <label>Mod</label><span name="attr_health_max">5</span><span>=</span><span name="name">3</span><span>+</span><span name="attr_stamina">2</span><span>+</span>
                <input name="attr_health_mod" type="number" value="0">
              </div>
            </div>
            <div class="col-md-6">
              <div class="vitals__formula">
                <label>Maximum</label><span></span>
                <label>Composure</label><span></span>
                <label>Resolve</label><span></span>
                <label>Mod</label><span name="attr_willpower_max">4</span><span>=</span><span name="attr_composure">2</span><span>+</span><span name="attr_resolve">2</span><span>+</span>
                <input name="attr_willpower_mod" type="number" value="0">
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 offset-md-3 vitals__button-container">
              <button class="vitals__button" name="act_startsession" type="action">Start of Session Healing</button>
            </div>
          </div>
        </div>
      </div>
      <div class="skills">
        <h2>Skills</h2>
        <div class="row">
          <div class="skills__column col-md-4">
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_athletics_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_athletics" type="hidden" value="0">
              <input name="attr_athletics_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_athletics_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_athletics" type="action"><span>Athletics</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_athletics" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_athletics" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_athletics" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_athletics" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_athletics" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_athletics" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_athletics" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_athletics" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_athletics" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_athletics" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_athletics" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_athletics" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_athletics" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_athletics_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_brawl_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_brawl" type="hidden" value="0">
              <input name="attr_brawl_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_brawl_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_brawl" type="action"><span>Brawl</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_brawl" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_brawl" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_brawl" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_brawl" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_brawl" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_brawl" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_brawl" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_brawl" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_brawl" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_brawl" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_brawl" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_brawl" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_brawl" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_brawl_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_craft_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_craft" type="hidden" value="0">
              <input name="attr_craft_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_craft_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_craft" type="action"><span>Craft</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_craft" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_craft" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_craft" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_craft" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_craft" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_craft" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_craft" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_craft" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_craft" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_craft" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_craft" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_craft" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_craft" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_craft_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_drive_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_drive" type="hidden" value="0">
              <input name="attr_drive_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_drive_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_drive" type="action"><span>Drive</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_drive" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_drive" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_drive" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_drive" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_drive" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_drive" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_drive" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_drive" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_drive" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_drive" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_drive" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_drive" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_drive" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_drive_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_firearms_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_firearms" type="hidden" value="0">
              <input name="attr_firearms_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_firearms_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_firearms" type="action"><span>Firearms</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_firearms" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_firearms" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_firearms" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_firearms" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_firearms" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_firearms" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_firearms" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_firearms" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_firearms" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_firearms" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_firearms" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_firearms" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_firearms" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_firearms_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_larceny_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_larceny" type="hidden" value="0">
              <input name="attr_larceny_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_larceny_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_larceny" type="action"><span>Larceny</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_larceny" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_larceny" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_larceny" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_larceny" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_larceny" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_larceny" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_larceny" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_larceny" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_larceny" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_larceny" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_larceny" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_larceny" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_larceny" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_larceny_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_melee_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_melee" type="hidden" value="0">
              <input name="attr_melee_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_melee_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_melee" type="action"><span>Melee</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_melee" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_melee" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_melee" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_melee" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_melee" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_melee" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_melee" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_melee" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_melee" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_melee" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_melee" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_melee" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_melee" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_melee_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_stealth_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_stealth" type="hidden" value="0">
              <input name="attr_stealth_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_stealth_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_stealth" type="action"><span>Stealth</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_stealth" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_stealth" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_stealth" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_stealth" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_stealth" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_stealth" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_stealth" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_stealth" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_stealth" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_stealth" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_stealth" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_stealth" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_stealth" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_stealth_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_survival_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_survival" type="hidden" value="0">
              <input name="attr_survival_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_survival_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_survival" type="action"><span>Survival</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_survival" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_survival" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_survival" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_survival" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_survival" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_survival" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_survival" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_survival" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_survival" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_survival" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_survival" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_survival" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_survival" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_survival_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
          </div>
          <div class="skills__column col-md-4">
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_animal_ken_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_animal_ken" type="hidden" value="0">
              <input name="attr_animal_ken_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_animal_ken_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_animal_ken" type="action"><span>Animal Ken</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_animal_ken" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_animal_ken" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_animal_ken" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_animal_ken" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_animal_ken" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_animal_ken" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_animal_ken" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_animal_ken" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_animal_ken" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_animal_ken" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_animal_ken" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_animal_ken" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_animal_ken" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_animal_ken_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_etiquette_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_etiquette" type="hidden" value="0">
              <input name="attr_etiquette_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_etiquette_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_etiquette" type="action"><span>Etiquette</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_etiquette" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_etiquette" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_etiquette" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_etiquette" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_etiquette" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_etiquette" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_etiquette" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_etiquette" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_etiquette" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_etiquette" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_etiquette" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_etiquette" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_etiquette" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_etiquette_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_insight_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_insight" type="hidden" value="0">
              <input name="attr_insight_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_insight_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_insight" type="action"><span>Insight</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_insight" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_insight" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_insight" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_insight" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_insight" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_insight" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_insight" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_insight" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_insight" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_insight" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_insight" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_insight" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_insight" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_insight_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_intimidation_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_intimidation" type="hidden" value="0">
              <input name="attr_intimidation_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_intimidation_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_intimidation" type="action"><span>Intimidation</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_intimidation" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_intimidation" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_intimidation" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_intimidation" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_intimidation" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_intimidation" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_intimidation" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_intimidation" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_intimidation" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_intimidation" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_intimidation" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_intimidation" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_intimidation" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_intimidation_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_leadership_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_leadership" type="hidden" value="0">
              <input name="attr_leadership_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_leadership_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_leadership" type="action"><span>Leadership</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_leadership" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_leadership" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_leadership" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_leadership" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_leadership" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_leadership" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_leadership" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_leadership" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_leadership" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_leadership" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_leadership" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_leadership" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_leadership" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_leadership_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_performance_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_performance" type="hidden" value="0">
              <input name="attr_performance_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_performance_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_performance" type="action"><span>Performance</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_performance" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_performance" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_performance" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_performance" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_performance" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_performance" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_performance" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_performance" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_performance" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_performance" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_performance" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_performance" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_performance" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_performance_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_persuasion_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_persuasion" type="hidden" value="0">
              <input name="attr_persuasion_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_persuasion_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_persuasion" type="action"><span>Persuasion</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_persuasion" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_persuasion" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_persuasion" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_persuasion" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_persuasion" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_persuasion" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_persuasion" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_persuasion" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_persuasion" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_persuasion" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_persuasion" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_persuasion" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_persuasion" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_persuasion_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_streetwise_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_streetwise" type="hidden" value="0">
              <input name="attr_streetwise_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_streetwise_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_streetwise" type="action"><span>Streetwise</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_streetwise" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_streetwise" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_streetwise" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_streetwise" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_streetwise" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_streetwise" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_streetwise" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_streetwise" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_streetwise" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_streetwise" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_streetwise" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_streetwise" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_streetwise" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_streetwise_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_subterfuge_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_subterfuge" type="hidden" value="0">
              <input name="attr_subterfuge_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_subterfuge_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_subterfuge" type="action"><span>Subterfuge</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_subterfuge" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_subterfuge" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_subterfuge" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_subterfuge" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_subterfuge" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_subterfuge" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_subterfuge" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_subterfuge" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_subterfuge" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_subterfuge" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_subterfuge" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_subterfuge" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_subterfuge" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_subterfuge_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
          </div>
          <div class="skills__column col-md-4">
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_academics_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_academics" type="hidden" value="0">
              <input name="attr_academics_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_academics_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_academics" type="action"><span>Academics</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_academics" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_academics" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_academics" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_academics" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_academics" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_academics" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_academics" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_academics" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_academics" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_academics" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_academics" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_academics" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_academics" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_academics_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_awareness_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_awareness" type="hidden" value="0">
              <input name="attr_awareness_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_awareness_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_awareness" type="action"><span>Awareness</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_awareness" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_awareness" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_awareness" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_awareness" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_awareness" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_awareness" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_awareness" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_awareness" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_awareness" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_awareness" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_awareness" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_awareness" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_awareness" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_awareness_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_finance_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_finance" type="hidden" value="0">
              <input name="attr_finance_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_finance_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_finance" type="action"><span>Finance</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_finance" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_finance" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_finance" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_finance" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_finance" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_finance" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_finance" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_finance" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_finance" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_finance" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_finance" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_finance" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_finance" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_finance_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_investigation_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_investigation" type="hidden" value="0">
              <input name="attr_investigation_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_investigation_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_investigation" type="action"><span>Investigation</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_investigation" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_investigation" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_investigation" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_investigation" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_investigation" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_investigation" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_investigation" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_investigation" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_investigation" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_investigation" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_investigation" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_investigation" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_investigation" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_investigation_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_medicine_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_medicine" type="hidden" value="0">
              <input name="attr_medicine_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_medicine_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_medicine" type="action"><span>Medicine</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_medicine" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_medicine" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_medicine" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_medicine" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_medicine" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_medicine" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_medicine" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_medicine" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_medicine" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_medicine" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_medicine" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_medicine" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_medicine" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_medicine_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_occult_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_occult" type="hidden" value="0">
              <input name="attr_occult_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_occult_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_occult" type="action"><span>Occult</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_occult" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_occult" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_occult" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_occult" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_occult" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_occult" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_occult" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_occult" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_occult" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_occult" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_occult" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_occult" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_occult" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_occult_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_politics_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_politics" type="hidden" value="0">
              <input name="attr_politics_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_politics_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_politics" type="action"><span>Politics</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_politics" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_politics" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_politics" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_politics" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_politics" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_politics" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_politics" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_politics" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_politics" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_politics" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_politics" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_politics" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_politics" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_politics_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_science_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_science" type="hidden" value="0">
              <input name="attr_science_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_science_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_science" type="action"><span>Science</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_science" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_science" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_science" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_science" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_science" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_science" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_science" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_science" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_science" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_science" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_science" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_science" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_science" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_science_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
            <div class="skill">
              <input class="skill__displaytoggle" name="attr_technology_display_toggle" type="hidden">
              <input class="skill__impairedtoggle" name="attr_impaired_technology" type="hidden" value="0">
              <input name="attr_technology_base" type="hidden">
              <div class="skill__wrapper row align-items-center">
                <div class="skill__control col-sm-auto">
                  <input name="attr_technology_display_toggle" type="checkbox"><span class="skill__expand">`</span><span class="skill__close">J</span>
                </div>
                <div class="skill__title col-sm-auto">
                  <button class="action-roll" name="act_technology" type="action"><span>Technology</span>
                  </button>
                </div>
                <div class="skill__filler col"></div>
                <div class="skill__dots col-sm-auto">
                  <div class="dots">
                    <input name="attr_technology" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_technology" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_technology" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_technology" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_technology" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_technology" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_technology" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_technology" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_technology" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_technology" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_technology" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_technology" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_technology" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row skill__details">
                <div class="skill__specialties col">
                  <input class="skill__specialinput"  name="attr_technology_specialities" type="text" placeholder="Skill specialties">
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row justify-content-between misc-stats">
        <div class="hunger col-md-6">
          <div class="input input--squares">
            <div class="input__title">Hunger</div>
            <div class="dots">
              <input name="attr_hunger" type="hidden" value="0">
              <div class="dots__wrapper">
                <div class="dots__container">
                  <input class="dot__hidden" checked="checked" name="attr_hunger" type="checkbox" value="0">
                  <input class="dot__hidden" name="attr_hunger" type="checkbox" value="1">
                  <div class="dot dot--1 dot--square dot_max_1 ">
                    <input class="dot__input" name="attr_hunger" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                  </div>
                  <input class="dot__hidden" name="attr_hunger" type="checkbox" value="2">
                  <div class="dot dot--2 dot--square dot_max_2 ">
                    <input class="dot__input" name="attr_hunger" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                  </div>
                  <input class="dot__hidden" name="attr_hunger" type="checkbox" value="3">
                  <div class="dot dot--3 dot--square dot_max_3 ">
                    <input class="dot__input" name="attr_hunger" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                  </div>
                  <input class="dot__hidden" name="attr_hunger" type="checkbox" value="4">
                  <div class="dot dot--4 dot--square dot_max_4 ">
                    <input class="dot__input" name="attr_hunger" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                  </div>
                  <input class="dot__hidden" name="attr_hunger" type="checkbox" value="5">
                  <div class="dot dot--5 dot--square dot_max_5 dot--rightmargin">
                    <input class="dot__input" name="attr_hunger" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                  </div>
                  <div class="dot dot--reset dot--square">
                    <input class="dot__input" name="attr_hunger" type="radio" value="0"><span class="dot__clear">×</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <button class="action-roll rouse" name="act_rouse" type="action"><span>Rouse Check</span>
          </button>
        </div>
        <div class="humanity col-md-6">
          <input name="attr_humanity_stains" type="hidden" value="0">
          <div class="humanity__title">
            <button class="action-roll action-roll--redtext" name="act_humanity" type="action"><span>Humanity</span>
            </button>
          </div>
          <div class="humanity__dots">
            <div class="dots dots--settings">
              <input name="attr_humanity" type="hidden" value="9">
              <input name="attr_humanity_settingstoggle" type="hidden" value="0">
              <div class="dots__wrapper">
                <div class="dots__container">
                  <input class="dot__hidden" checked="checked" name="attr_humanity" type="checkbox" value="0">
                  <input class="dot__hidden" name="attr_humanity" type="checkbox" value="1">
                  <div class="dot dot--1 dot--square dot_max_1 ">
                    <input class="dot__input" name="attr_humanity" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                  </div>
                  <input class="dot__hidden" name="attr_humanity" type="checkbox" value="2">
                  <div class="dot dot--2 dot--square dot_max_2 ">
                    <input class="dot__input" name="attr_humanity" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                  </div>
                  <input class="dot__hidden" name="attr_humanity" type="checkbox" value="3">
                  <div class="dot dot--3 dot--square dot_max_3 ">
                    <input class="dot__input" name="attr_humanity" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                  </div>
                  <input class="dot__hidden" name="attr_humanity" type="checkbox" value="4">
                  <div class="dot dot--4 dot--square dot_max_4 ">
                    <input class="dot__input" name="attr_humanity" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                  </div>
                  <input class="dot__hidden" name="attr_humanity" type="checkbox" value="5">
                  <div class="dot dot--5 dot--square dot_max_5 dot--rightmargin">
                    <input class="dot__input" name="attr_humanity" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                  </div>
                  <input class="dot__hidden" name="attr_humanity" type="checkbox" value="6">
                  <div class="dot dot--6 dot--square dot_max_6 ">
                    <input class="dot__input" name="attr_humanity" type="radio" value="6"><span class="dot__checkmark dot__checkmark--6"></span>
                  </div>
                  <input class="dot__hidden" name="attr_humanity" type="checkbox" value="7">
                  <div class="dot dot--7 dot--square dot_max_7 ">
                    <input class="dot__input" name="attr_humanity" type="radio" value="7"><span class="dot__checkmark dot__checkmark--7"></span>
                  </div>
                  <input class="dot__hidden" name="attr_humanity" type="checkbox" value="8">
                  <div class="dot dot--8 dot--square dot_max_8 ">
                    <input class="dot__input" name="attr_humanity" type="radio" value="8"><span class="dot__checkmark dot__checkmark--8"></span>
                  </div>
                  <input class="dot__hidden" name="attr_humanity" type="checkbox" value="9">
                  <div class="dot dot--9 dot--square dot_max_9 ">
                    <input class="dot__input" name="attr_humanity" type="radio" value="9"><span class="dot__checkmark dot__checkmark--9"></span>
                  </div>
                  <input class="dot__hidden" name="attr_humanity" type="checkbox" value="10">
                  <div class="dot dot--10 dot--square dot_max_10 dot--rightmargin">
                    <input class="dot__input" name="attr_humanity" type="radio" value="10"><span class="dot__checkmark dot__checkmark--10"></span>
                  </div>
                  <div class="dot dot--reset dot--square">
                    <input class="dot__input" name="attr_humanity" type="radio" value="0"><span class="dot__clear">×</span>
                  </div>
                </div>
              </div>
              <div class="dots__settings">
                <div class="dots__settingrow dots__settingrow--1-1">
                  <div class="dots__settingtitle">Stains</div>
                  <input class="dots__settingitem" name="attr_humanity_stains" type="number">
                </div>
              </div>
              <div class="dots__control">
                <div class="dots__settingbutton">
                  <input name="attr_humanity_settingstoggle" type="checkbox"><span>y</span>
                </div>
              </div>
            </div>
          </div>
          <button class="action-roll remorse" name="act_remorse" type="action"><span>Remorse Test</span>
          </button>
        </div>
      </div>
      <div class="row justify-content-around misc-stats">
        <div class="resonance col-md-6">
          <div class="input input--text">
            <div class="input__title">Resonance</div>
            <input class="input__interface" name="attr_resonance" type="text">
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <div class="disciplines">
            <h2 class="heading--noborder">Disciplines</h2>
            <fieldset class="repeating_disciplines" style="display: none;">
              <div class="discipline">
                <input class="discipline__displaytoggle" name="attr_discipline_display_toggle" type="hidden" value="on">
                <input class="discipline__build-roll-toggle" name="attr_discipline_build_roll" type="hidden">
                <div class="discipline__head">
                  <div class="discipline__title">
                    <input name="attr_discipline_name" type="text">
                  </div>
                  <div class="discipline__dots">
                    <div class="dots">
                      <input name="attr_discipline" type="hidden" value="0">
                      <div class="dots__wrapper">
                        <div class="dots__container">
                          <input class="dot__hidden" checked="checked" name="attr_discipline" type="checkbox" value="0">
                          <input class="dot__hidden" name="attr_discipline" type="checkbox" value="1">
                          <div class="dot dot--1 dot--circle dot_max_1 ">
                            <input class="dot__input" name="attr_discipline" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                          </div>
                          <input class="dot__hidden" name="attr_discipline" type="checkbox" value="2">
                          <div class="dot dot--2 dot--circle dot_max_2 ">
                            <input class="dot__input" name="attr_discipline" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                          </div>
                          <input class="dot__hidden" name="attr_discipline" type="checkbox" value="3">
                          <div class="dot dot--3 dot--circle dot_max_3 ">
                            <input class="dot__input" name="attr_discipline" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                          </div>
                          <input class="dot__hidden" name="attr_discipline" type="checkbox" value="4">
                          <div class="dot dot--4 dot--circle dot_max_4 ">
                            <input class="dot__input" name="attr_discipline" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                          </div>
                          <input class="dot__hidden" name="attr_discipline" type="checkbox" value="5">
                          <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                            <input class="dot__input" name="attr_discipline" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                          </div>
                          <div class="dot dot--reset dot--circle">
                            <input class="dot__input" name="attr_discipline" type="radio" value="0"><span class="dot__clear">×</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="discipline__controls">
                    <div class="discipline__control discipline__control--roll">
                      <input name="attr_discipline_build_roll" type="checkbox" title="title_discipline_roll"><img class="discipline__die" src="https://storage.googleapis.com/char-sheet-app-images-6e101411/vampire5e/dice-icon.png" alt="[alt_discipline_roll]"><span class="discipline__close">*</span>
                    </div>
                    <button class="discipline__control btn ui-draggable" type="roll" value="&amp;{template:vampirechat} {{character=@{character_name}}} {{title=@{discipline_name}}} {{rank=[[@{discipline}]]}} {{type=@{discipline_type}}} {{threat=@{discipline_threat}}} {{blood=@{discipline_blood}}} {{power_1_name=@{power_1_name}}} {{power_1_description=@{power_1_description}}} {{power_2_name=@{power_2_name}}} {{power_2_description=@{power_2_description}}} {{power_3_name=@{power_3_name}}} {{power_3_description=@{power_3_description}}} {{power_4_name=@{power_4_name}}} {{power_4_description=@{power_4_description}}} {{power_5_name=@{power_5_name}}} {{power_5_description=@{power_5_description}}} {{power_6_name=@{power_6_name}}} {{power_6_description=@{power_6_description}}} {{power_7_name=@{power_7_name}}} {{power_7_description=@{power_7_description}}} {{power_8_name=@{power_8_name}}} {{power_8_description=@{power_8_description}}} {{power_9_name=@{power_9_name}}} {{power_9_description=@{power_9_description}}} {{power_10_name=@{power_10_name}}} {{power_10_description=@{power_10_description}}}"><span class="discipline__tochat">w</span></button>
                    <div class="discipline__control">
                      <input checked="checked" name="attr_discipline_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                    </div>
                  </div>
                </div>
                <div class="discipline__details">
                  <div class="discipline__type">
                    <div class="discipline__subtitle">Type</div>
                    <input name="attr_discipline_type" type="text" placeholder="Discipline Type">
                  </div>
                  <div class="discipline__threat">
                    <div class="discipline__subtitle">Masquerade Threat</div>
                    <textarea name="attr_discipline_threat" placeholder="Discipline Threat"></textarea>
                  </div>
                  <div class="discipline__blood">
                    <div class="discipline__subtitle">Blood Resonance</div>
                    <textarea name="attr_discipline_blood" placeholder="Discipline Blood Resonance"></textarea>
                  </div>
                </div>
                <div class="discipline__roll-builder">
                  <div class="discipline__roll-operand">
                    <input class="discipline__roll-type-selector" name="attr_roll_type_1" type="hidden">
                    <select class="discipline__roll-type-selector" name="attr_roll_type_1">
                      <option selected="selected" value="attributes">Attributes</option>
                      <option value="skills">Skills</option>
                      <option value="discipline">Discipline</option>
                    </select>
                    <input name="attr_roll_attrib_1" type="hidden" value="0">
                    <select class="discipline__roll-attrs discipline__groupselect discipline__groupselect--roll_attrib_1" name="attr_roll_attrib_1">
                      <option class="false-group false-group--hidden" hidden="hidden" selected="selected" value="0">...</option>
                      <option class="false-group false-group--hidden" value="physical">Physical</option>
                      <option class="discipline__select-option--attrib" value="strength">Strength</option>
                      <option class="discipline__select-option--attrib" value="dexterity">Dexterity</option>
                      <option class="discipline__select-option--attrib" value="stamina">Stamina</option>
                      <option class="discipline__select-option--skills" value="athletics">Athletics</option>
                      <option class="discipline__select-option--skills" value="brawl">Brawl</option>
                      <option class="discipline__select-option--skills" value="craft">Craft</option>
                      <option class="discipline__select-option--skills" value="drive">Drive</option>
                      <option class="discipline__select-option--skills" value="firearms">Firearms</option>
                      <option class="discipline__select-option--skills" value="larceny">Larceny</option>
                      <option class="discipline__select-option--skills" value="melee">Melee</option>
                      <option class="discipline__select-option--skills" value="stealth">Stealth</option>
                      <option class="discipline__select-option--skills" value="survival">Survival</option>
                      <option class="false-group false-group--hidden" value="social">Social</option>
                      <option class="discipline__select-option--attrib" value="charisma">Charisma</option>
                      <option class="discipline__select-option--attrib" value="manipulation">Manipulation</option>
                      <option class="discipline__select-option--attrib" value="composure">Composure</option>
                      <option class="discipline__select-option--skills" value="animal_ken">Animal Ken</option>
                      <option class="discipline__select-option--skills" value="etiquette">Etiquette</option>
                      <option class="discipline__select-option--skills" value="insight">Insight</option>
                      <option class="discipline__select-option--skills" value="intimidation">Intimidation</option>
                      <option class="discipline__select-option--skills" value="leadership">Leadership</option>
                      <option class="discipline__select-option--skills" value="performance">Performance</option>
                      <option class="discipline__select-option--skills" value="persuasion">Persuasion</option>
                      <option class="discipline__select-option--skills" value="streetwise">Streetwise</option>
                      <option class="discipline__select-option--skills" value="subterfuge">Subterfuge</option>
                      <option class="false-group false-group--hidden" value="mental">Mental</option>
                      <option class="discipline__select-option--attrib" value="intelligence">Intelligence</option>
                      <option class="discipline__select-option--attrib" value="wits">Wits</option>
                      <option class="discipline__select-option--attrib" value="resolve">Resolve</option>
                      <option class="discipline__select-option--skills" value="academics">Academics</option>
                      <option class="discipline__select-option--skills" value="awareness">Awareness</option>
                      <option class="discipline__select-option--skills" value="finance">Finance</option>
                      <option class="discipline__select-option--skills" value="investigation">Investigation</option>
                      <option class="discipline__select-option--skills" value="medicine">Medicine</option>
                      <option class="discipline__select-option--skills" value="occult">Occult</option>
                      <option class="discipline__select-option--skills" value="politics">Politics</option>
                      <option class="discipline__select-option--skills" value="science">Science</option>
                      <option class="discipline__select-option--skills" value="technology">Technology</option>
                    </select><span class="discipline__roll-discipline" name="attr_discipline_name"></span>
                  </div>
                  <div class="discipline__roll-operand">
                    <input class="discipline__roll-type-selector" name="attr_roll_type_2" type="hidden">
                    <select class="discipline__roll-type-selector" name="attr_roll_type_2">
                      <option selected="selected" value="attributes">Attributes</option>
                      <option value="skills">Skills</option>
                      <option value="discipline">Discipline</option>
                    </select>
                    <input name="attr_roll_attrib_2" type="hidden" value="0">
                    <select class="discipline__roll-attrs discipline__groupselect discipline__groupselect--roll_attrib_2" name="attr_roll_attrib_2">
                      <option class="false-group false-group--hidden" hidden="hidden" selected="selected" value="0">...</option>
                      <option class="false-group false-group--hidden" value="physical">Physical</option>
                      <option class="discipline__select-option--attrib" value="strength">Strength</option>
                      <option class="discipline__select-option--attrib" value="dexterity">Dexterity</option>
                      <option class="discipline__select-option--attrib" value="stamina">Stamina</option>
                      <option class="discipline__select-option--skills" value="athletics">Athletics</option>
                      <option class="discipline__select-option--skills" value="brawl">Brawl</option>
                      <option class="discipline__select-option--skills" value="craft">Craft</option>
                      <option class="discipline__select-option--skills" value="drive">Drive</option>
                      <option class="discipline__select-option--skills" value="firearms">Firearms</option>
                      <option class="discipline__select-option--skills" value="larceny">Larceny</option>
                      <option class="discipline__select-option--skills" value="melee">Melee</option>
                      <option class="discipline__select-option--skills" value="stealth">Stealth</option>
                      <option class="discipline__select-option--skills" value="survival">Survival</option>
                      <option class="false-group false-group--hidden" value="social">Social</option>
                      <option class="discipline__select-option--attrib" value="charisma">Charisma</option>
                      <option class="discipline__select-option--attrib" value="manipulation">Manipulation</option>
                      <option class="discipline__select-option--attrib" value="composure">Composure</option>
                      <option class="discipline__select-option--skills" value="animal_ken">Animal Ken</option>
                      <option class="discipline__select-option--skills" value="etiquette">Etiquette</option>
                      <option class="discipline__select-option--skills" value="insight">Insight</option>
                      <option class="discipline__select-option--skills" value="intimidation">Intimidation</option>
                      <option class="discipline__select-option--skills" value="leadership">Leadership</option>
                      <option class="discipline__select-option--skills" value="performance">Performance</option>
                      <option class="discipline__select-option--skills" value="persuasion">Persuasion</option>
                      <option class="discipline__select-option--skills" value="streetwise">Streetwise</option>
                      <option class="discipline__select-option--skills" value="subterfuge">Subterfuge</option>
                      <option class="false-group false-group--hidden" value="mental">Mental</option>
                      <option class="discipline__select-option--attrib" value="intelligence">Intelligence</option>
                      <option class="discipline__select-option--attrib" value="wits">Wits</option>
                      <option class="discipline__select-option--attrib" value="resolve">Resolve</option>
                      <option class="discipline__select-option--skills" value="academics">Academics</option>
                      <option class="discipline__select-option--skills" value="awareness">Awareness</option>
                      <option class="discipline__select-option--skills" value="finance">Finance</option>
                      <option class="discipline__select-option--skills" value="investigation">Investigation</option>
                      <option class="discipline__select-option--skills" value="medicine">Medicine</option>
                      <option class="discipline__select-option--skills" value="occult">Occult</option>
                      <option class="discipline__select-option--skills" value="politics">Politics</option>
                      <option class="discipline__select-option--skills" value="science">Science</option>
                      <option class="discipline__select-option--skills" value="technology">Technology</option>
                    </select><span class="discipline__roll-discipline" name="attr_discipline_name"></span>
                  </div>
                  <div class="discipline__roll-display">
                    <div class="dots">
                      <input name="attr_roll_display_1" type="hidden" value="0">
                      <div class="dots__wrapper">
                        <div class="dots__container">
                          <input class="dot__hidden" checked="checked" name="attr_roll_display_1" type="checkbox" value="0">
                          <input class="dot__hidden" name="attr_roll_display_1" type="checkbox" value="1">
                          <div class="dot dot--1 dot--circle dot_max_1 ">
                            <input class="dot__input" name="attr_roll_display_1" type="hidden"><span class="dot__checkmark dot__checkmark--1"></span>
                          </div>
                          <input class="dot__hidden" name="attr_roll_display_1" type="checkbox" value="2">
                          <div class="dot dot--2 dot--circle dot_max_2 ">
                            <input class="dot__input" name="attr_roll_display_1" type="hidden"><span class="dot__checkmark dot__checkmark--2"></span>
                          </div>
                          <input class="dot__hidden" name="attr_roll_display_1" type="checkbox" value="3">
                          <div class="dot dot--3 dot--circle dot_max_3 ">
                            <input class="dot__input" name="attr_roll_display_1" type="hidden"><span class="dot__checkmark dot__checkmark--3"></span>
                          </div>
                          <input class="dot__hidden" name="attr_roll_display_1" type="checkbox" value="4">
                          <div class="dot dot--4 dot--circle dot_max_4 ">
                            <input class="dot__input" name="attr_roll_display_1" type="hidden"><span class="dot__checkmark dot__checkmark--4"></span>
                          </div>
                          <input class="dot__hidden" name="attr_roll_display_1" type="checkbox" value="5">
                          <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                            <input class="dot__input" name="attr_roll_display_1" type="hidden"><span class="dot__checkmark dot__checkmark--5"></span>
                          </div>
                        </div>
                      </div>
                    </div><span>+</span>
                    <div class="dots">
                      <input name="attr_roll_display_2" type="hidden" value="0">
                      <div class="dots__wrapper">
                        <div class="dots__container">
                          <input class="dot__hidden" checked="checked" name="attr_roll_display_2" type="checkbox" value="0">
                          <input class="dot__hidden" name="attr_roll_display_2" type="checkbox" value="1">
                          <div class="dot dot--1 dot--circle dot_max_1 ">
                            <input class="dot__input" name="attr_roll_display_2" type="hidden"><span class="dot__checkmark dot__checkmark--1"></span>
                          </div>
                          <input class="dot__hidden" name="attr_roll_display_2" type="checkbox" value="2">
                          <div class="dot dot--2 dot--circle dot_max_2 ">
                            <input class="dot__input" name="attr_roll_display_2" type="hidden"><span class="dot__checkmark dot__checkmark--2"></span>
                          </div>
                          <input class="dot__hidden" name="attr_roll_display_2" type="checkbox" value="3">
                          <div class="dot dot--3 dot--circle dot_max_3 ">
                            <input class="dot__input" name="attr_roll_display_2" type="hidden"><span class="dot__checkmark dot__checkmark--3"></span>
                          </div>
                          <input class="dot__hidden" name="attr_roll_display_2" type="checkbox" value="4">
                          <div class="dot dot--4 dot--circle dot_max_4 ">
                            <input class="dot__input" name="attr_roll_display_2" type="hidden"><span class="dot__checkmark dot__checkmark--4"></span>
                          </div>
                          <input class="dot__hidden" name="attr_roll_display_2" type="checkbox" value="5">
                          <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                            <input class="dot__input" name="attr_roll_display_2" type="hidden"><span class="dot__checkmark dot__checkmark--5"></span>
                          </div>
                        </div>
                      </div>
                    </div><span>+</span><span class="discipline__roll-potency" name="attr_roll_potency_bonus" title="Potency Bonus"> </span><span>=</span>
                    <button class="action-roll discipline__roll-button action-roll" name="act_disciplineroll" type="action"><span>Roll</span>
                    </button>
                  </div>
                </div>
                <div class="discipline__powers">
                  <input class="discipline__powercontrol" name="attr_power_count" type="hidden">
                  <div class="discipline-power discipline-power--1">
                    <input class="discipline-power__displaytoggle" name="attr_power_1_display_toggle" type="hidden" value="on">
                    <div class="discipline-power__titlebar">
                      <div class="discipline-power__title">
                        <input name="attr_power_1_name" type="text" placeholder="Power Name">
                      </div>
                      <div class="discipline-power__level">
                        <input name="attr_power_1_level" placeholder="1" type="number">
                      </div>
                      <div class="discipline-power__controls">
                        <div class="discipline-power__control">
                          <input name="attr_power_1_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                        </div>
                        <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_1_name}}} {{level=@{power_1_level}}} {{pools=@{power_1_dicepools}}} {{cost=@{power_1_cost}}} {{duration=@{power_1_duration}}} {{description=@{power_1_description}}} {{system=@{power_1_system}}}"><span>w</span></button>
                        <button class="discipline-power__control" name="act_disciplines-delete-1" type="action"><span>#</span></button>
                      </div>
                    </div>
                    <div class="discipline-power__display">
                      <div class="discipline-power__displayitem">
                        <div class="discipline-power__title">Dice Pools</div>
                        <input class="discipline-power__input" name="attr_power_1_dicepools" type="text" placeholder="Power Dice Pools">
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Cost</div>
                        <textarea class="discipline-power__textarea" name="attr_power_1_cost" type="text" placeholder="Power Cost"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Duration</div>
                        <textarea class="discipline-power__textarea" name="attr_power_1_duration" type="text" placeholder="Power Duration"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Description</div>
                        <textarea class="discipline-power__textarea" name="attr_power_1_description" placeholder="Power Description"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">System</div>
                        <textarea class="discipline-power__textarea" name="attr_power_1_system" placeholder="Power System"></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="discipline-power discipline-power--2">
                    <input class="discipline-power__displaytoggle" name="attr_power_2_display_toggle" type="hidden" value="0">
                    <div class="discipline-power__titlebar">
                      <div class="discipline-power__title">
                        <input name="attr_power_2_name" type="text" placeholder="Power Name">
                      </div>
                      <div class="discipline-power__level">
                        <input name="attr_power_2_level" placeholder="1" type="number">
                      </div>
                      <div class="discipline-power__controls">
                        <div class="discipline-power__control">
                          <input name="attr_power_2_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                        </div>
                        <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_2_name}}} {{level=@{power_2_level}}} {{pools=@{power_2_dicepools}}} {{cost=@{power_2_cost}}} {{duration=@{power_2_duration}}} {{description=@{power_2_description}}} {{system=@{power_2_system}}}"><span>w</span></button>
                        <button class="discipline-power__control" name="act_disciplines-delete-2" type="action"><span>#</span></button>
                      </div>
                    </div>
                    <div class="discipline-power__display">
                      <div class="discipline-power__displayitem">
                        <div class="discipline-power__title">Dice Pools</div>
                        <input class="discipline-power__input" name="attr_power_2_dicepools" type="text" placeholder="Power Dice Pools">
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Cost</div>
                        <textarea class="discipline-power__textarea" name="attr_power_2_cost" type="text" placeholder="Power Cost"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Duration</div>
                        <textarea class="discipline-power__textarea" name="attr_power_2_duration" type="text" placeholder="Power Duration"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Description</div>
                        <textarea class="discipline-power__textarea" name="attr_power_2_description" placeholder="Power Description"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">System</div>
                        <textarea class="discipline-power__textarea" name="attr_power_2_system" placeholder="Power System"></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="discipline-power discipline-power--3">
                    <input class="discipline-power__displaytoggle" name="attr_power_3_display_toggle" type="hidden" value="0">
                    <div class="discipline-power__titlebar">
                      <div class="discipline-power__title">
                        <input name="attr_power_3_name" type="text" placeholder="Power Name">
                      </div>
                      <div class="discipline-power__level">
                        <input name="attr_power_3_level" placeholder="1" type="number">
                      </div>
                      <div class="discipline-power__controls">
                        <div class="discipline-power__control">
                          <input name="attr_power_3_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                        </div>
                        <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_3_name}}} {{level=@{power_3_level}}} {{pools=@{power_3_dicepools}}} {{cost=@{power_3_cost}}} {{duration=@{power_3_duration}}} {{description=@{power_3_description}}} {{system=@{power_3_system}}}"><span>w</span></button>
                        <button class="discipline-power__control" name="act_disciplines-delete-3" type="action"><span>#</span></button>
                      </div>
                    </div>
                    <div class="discipline-power__display">
                      <div class="discipline-power__displayitem">
                        <div class="discipline-power__title">Dice Pools</div>
                        <input class="discipline-power__input" name="attr_power_3_dicepools" type="text" placeholder="Power Dice Pools">
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Cost</div>
                        <textarea class="discipline-power__textarea" name="attr_power_3_cost" type="text" placeholder="Power Cost"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Duration</div>
                        <textarea class="discipline-power__textarea" name="attr_power_3_duration" type="text" placeholder="Power Duration"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Description</div>
                        <textarea class="discipline-power__textarea" name="attr_power_3_description" placeholder="Power Description"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">System</div>
                        <textarea class="discipline-power__textarea" name="attr_power_3_system" placeholder="Power System"></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="discipline-power discipline-power--4">
                    <input class="discipline-power__displaytoggle" name="attr_power_4_display_toggle" type="hidden" value="0">
                    <div class="discipline-power__titlebar">
                      <div class="discipline-power__title">
                        <input name="attr_power_4_name" type="text" placeholder="Power Name">
                      </div>
                      <div class="discipline-power__level">
                        <input name="attr_power_4_level" placeholder="1" type="number">
                      </div>
                      <div class="discipline-power__controls">
                        <div class="discipline-power__control">
                          <input name="attr_power_4_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                        </div>
                        <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_4_name}}} {{level=@{power_4_level}}} {{pools=@{power_4_dicepools}}} {{cost=@{power_4_cost}}} {{duration=@{power_4_duration}}} {{description=@{power_4_description}}} {{system=@{power_4_system}}}"><span>w</span></button>
                        <button class="discipline-power__control" name="act_disciplines-delete-4" type="action"><span>#</span></button>
                      </div>
                    </div>
                    <div class="discipline-power__display">
                      <div class="discipline-power__displayitem">
                        <div class="discipline-power__title">Dice Pools</div>
                        <input class="discipline-power__input" name="attr_power_4_dicepools" type="text" placeholder="Power Dice Pools">
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Cost</div>
                        <textarea class="discipline-power__textarea" name="attr_power_4_cost" type="text" placeholder="Power Cost"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Duration</div>
                        <textarea class="discipline-power__textarea" name="attr_power_4_duration" type="text" placeholder="Power Duration"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Description</div>
                        <textarea class="discipline-power__textarea" name="attr_power_4_description" placeholder="Power Description"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">System</div>
                        <textarea class="discipline-power__textarea" name="attr_power_4_system" placeholder="Power System"></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="discipline-power discipline-power--5">
                    <input class="discipline-power__displaytoggle" name="attr_power_5_display_toggle" type="hidden" value="0">
                    <div class="discipline-power__titlebar">
                      <div class="discipline-power__title">
                        <input name="attr_power_5_name" type="text" placeholder="Power Name">
                      </div>
                      <div class="discipline-power__level">
                        <input name="attr_power_5_level" placeholder="1" type="number">
                      </div>
                      <div class="discipline-power__controls">
                        <div class="discipline-power__control">
                          <input name="attr_power_5_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                        </div>
                        <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_5_name}}} {{level=@{power_5_level}}} {{pools=@{power_5_dicepools}}} {{cost=@{power_5_cost}}} {{duration=@{power_5_duration}}} {{description=@{power_5_description}}} {{system=@{power_5_system}}}"><span>w</span></button>
                        <button class="discipline-power__control" name="act_disciplines-delete-5" type="action"><span>#</span></button>
                      </div>
                    </div>
                    <div class="discipline-power__display">
                      <div class="discipline-power__displayitem">
                        <div class="discipline-power__title">Dice Pools</div>
                        <input class="discipline-power__input" name="attr_power_5_dicepools" type="text" placeholder="Power Dice Pools">
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Cost</div>
                        <textarea class="discipline-power__textarea" name="attr_power_5_cost" type="text" placeholder="Power Cost"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Duration</div>
                        <textarea class="discipline-power__textarea" name="attr_power_5_duration" type="text" placeholder="Power Duration"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Description</div>
                        <textarea class="discipline-power__textarea" name="attr_power_5_description" placeholder="Power Description"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">System</div>
                        <textarea class="discipline-power__textarea" name="attr_power_5_system" placeholder="Power System"></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="discipline-power discipline-power--6">
                    <input class="discipline-power__displaytoggle" name="attr_power_6_display_toggle" type="hidden" value="0">
                    <div class="discipline-power__titlebar">
                      <div class="discipline-power__title">
                        <input name="attr_power_6_name" type="text" placeholder="Power Name">
                      </div>
                      <div class="discipline-power__level">
                        <input name="attr_power_6_level" placeholder="1" type="number">
                      </div>
                      <div class="discipline-power__controls">
                        <div class="discipline-power__control">
                          <input name="attr_power_6_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                        </div>
                        <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_6_name}}} {{level=@{power_6_level}}} {{pools=@{power_6_dicepools}}} {{cost=@{power_6_cost}}} {{duration=@{power_6_duration}}} {{description=@{power_6_description}}} {{system=@{power_6_system}}}"><span>w</span></button>
                        <button class="discipline-power__control" name="act_disciplines-delete-6" type="action"><span>#</span></button>
                      </div>
                    </div>
                    <div class="discipline-power__display">
                      <div class="discipline-power__displayitem">
                        <div class="discipline-power__title">Dice Pools</div>
                        <input class="discipline-power__input" name="attr_power_6_dicepools" type="text" placeholder="Power Dice Pools">
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Cost</div>
                        <textarea class="discipline-power__textarea" name="attr_power_6_cost" type="text" placeholder="Power Cost"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Duration</div>
                        <textarea class="discipline-power__textarea" name="attr_power_6_duration" type="text" placeholder="Power Duration"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Description</div>
                        <textarea class="discipline-power__textarea" name="attr_power_6_description" placeholder="Power Description"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">System</div>
                        <textarea class="discipline-power__textarea" name="attr_power_6_system" placeholder="Power System"></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="discipline-power discipline-power--7">
                    <input class="discipline-power__displaytoggle" name="attr_power_7_display_toggle" type="hidden" value="0">
                    <div class="discipline-power__titlebar">
                      <div class="discipline-power__title">
                        <input name="attr_power_7_name" type="text" placeholder="Power Name">
                      </div>
                      <div class="discipline-power__level">
                        <input name="attr_power_7_level" placeholder="1" type="number">
                      </div>
                      <div class="discipline-power__controls">
                        <div class="discipline-power__control">
                          <input name="attr_power_7_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                        </div>
                        <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_7_name}}} {{level=@{power_7_level}}} {{pools=@{power_7_dicepools}}} {{cost=@{power_7_cost}}} {{duration=@{power_7_duration}}} {{description=@{power_7_description}}} {{system=@{power_7_system}}}"><span>w</span></button>
                        <button class="discipline-power__control" name="act_disciplines-delete-7" type="action"><span>#</span></button>
                      </div>
                    </div>
                    <div class="discipline-power__display">
                      <div class="discipline-power__displayitem">
                        <div class="discipline-power__title">Dice Pools</div>
                        <input class="discipline-power__input" name="attr_power_7_dicepools" type="text" placeholder="Power Dice Pools">
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Cost</div>
                        <textarea class="discipline-power__textarea" name="attr_power_7_cost" type="text" placeholder="Power Cost"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Duration</div>
                        <textarea class="discipline-power__textarea" name="attr_power_7_duration" type="text" placeholder="Power Duration"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Description</div>
                        <textarea class="discipline-power__textarea" name="attr_power_7_description" placeholder="Power Description"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">System</div>
                        <textarea class="discipline-power__textarea" name="attr_power_7_system" placeholder="Power System"></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="discipline-power discipline-power--8">
                    <input class="discipline-power__displaytoggle" name="attr_power_8_display_toggle" type="hidden" value="0">
                    <div class="discipline-power__titlebar">
                      <div class="discipline-power__title">
                        <input name="attr_power_8_name" type="text" placeholder="Power Name">
                      </div>
                      <div class="discipline-power__level">
                        <input name="attr_power_8_level" placeholder="1" type="number">
                      </div>
                      <div class="discipline-power__controls">
                        <div class="discipline-power__control">
                          <input name="attr_power_8_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                        </div>
                        <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_8_name}}} {{level=@{power_8_level}}} {{pools=@{power_8_dicepools}}} {{cost=@{power_8_cost}}} {{duration=@{power_8_duration}}} {{description=@{power_8_description}}} {{system=@{power_8_system}}}"><span>w</span></button>
                        <button class="discipline-power__control" name="act_disciplines-delete-8" type="action"><span>#</span></button>
                      </div>
                    </div>
                    <div class="discipline-power__display">
                      <div class="discipline-power__displayitem">
                        <div class="discipline-power__title">Dice Pools</div>
                        <input class="discipline-power__input" name="attr_power_8_dicepools" type="text" placeholder="Power Dice Pools">
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Cost</div>
                        <textarea class="discipline-power__textarea" name="attr_power_8_cost" type="text" placeholder="Power Cost"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Duration</div>
                        <textarea class="discipline-power__textarea" name="attr_power_8_duration" type="text" placeholder="Power Duration"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Description</div>
                        <textarea class="discipline-power__textarea" name="attr_power_8_description" placeholder="Power Description"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">System</div>
                        <textarea class="discipline-power__textarea" name="attr_power_8_system" placeholder="Power System"></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="discipline-power discipline-power--9">
                    <input class="discipline-power__displaytoggle" name="attr_power_9_display_toggle" type="hidden" value="0">
                    <div class="discipline-power__titlebar">
                      <div class="discipline-power__title">
                        <input name="attr_power_9_name" type="text" placeholder="Power Name">
                      </div>
                      <div class="discipline-power__level">
                        <input name="attr_power_9_level" placeholder="1" type="number">
                      </div>
                      <div class="discipline-power__controls">
                        <div class="discipline-power__control">
                          <input name="attr_power_9_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                        </div>
                        <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_9_name}}} {{level=@{power_9_level}}} {{pools=@{power_9_dicepools}}} {{cost=@{power_9_cost}}} {{duration=@{power_9_duration}}} {{description=@{power_9_description}}} {{system=@{power_9_system}}}"><span>w</span></button>
                        <button class="discipline-power__control" name="act_disciplines-delete-9" type="action"><span>#</span></button>
                      </div>
                    </div>
                    <div class="discipline-power__display">
                      <div class="discipline-power__displayitem">
                        <div class="discipline-power__title">Dice Pools</div>
                        <input class="discipline-power__input" name="attr_power_9_dicepools" type="text" placeholder="Power Dice Pools">
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Cost</div>
                        <textarea class="discipline-power__textarea" name="attr_power_9_cost" type="text" placeholder="Power Cost"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Duration</div>
                        <textarea class="discipline-power__textarea" name="attr_power_9_duration" type="text" placeholder="Power Duration"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Description</div>
                        <textarea class="discipline-power__textarea" name="attr_power_9_description" placeholder="Power Description"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">System</div>
                        <textarea class="discipline-power__textarea" name="attr_power_9_system" placeholder="Power System"></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="discipline-power discipline-power--10">
                    <input class="discipline-power__displaytoggle" name="attr_power_10_display_toggle" type="hidden" value="0">
                    <div class="discipline-power__titlebar">
                      <div class="discipline-power__title">
                        <input name="attr_power_10_name" type="text" placeholder="Power Name">
                      </div>
                      <div class="discipline-power__level">
                        <input name="attr_power_10_level" placeholder="1" type="number">
                      </div>
                      <div class="discipline-power__controls">
                        <div class="discipline-power__control">
                          <input name="attr_power_10_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                        </div>
                        <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_10_name}}} {{level=@{power_10_level}}} {{pools=@{power_10_dicepools}}} {{cost=@{power_10_cost}}} {{duration=@{power_10_duration}}} {{description=@{power_10_description}}} {{system=@{power_10_system}}}"><span>w</span></button>
                        <button class="discipline-power__control" name="act_disciplines-delete-10" type="action"><span>#</span></button>
                      </div>
                    </div>
                    <div class="discipline-power__display">
                      <div class="discipline-power__displayitem">
                        <div class="discipline-power__title">Dice Pools</div>
                        <input class="discipline-power__input" name="attr_power_10_dicepools" type="text" placeholder="Power Dice Pools">
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Cost</div>
                        <textarea class="discipline-power__textarea" name="attr_power_10_cost" type="text" placeholder="Power Cost"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Duration</div>
                        <textarea class="discipline-power__textarea" name="attr_power_10_duration" type="text" placeholder="Power Duration"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">Description</div>
                        <textarea class="discipline-power__textarea" name="attr_power_10_description" placeholder="Power Description"></textarea>
                      </div>
                      <div class="discipline-power__displayitem--textarea">
                        <div class="discipline-power__title">System</div>
                        <textarea class="discipline-power__textarea" name="attr_power_10_system" placeholder="Power System"></textarea>
                      </div>
                    </div>
                  </div>
                  <button class="discipline__button--add" name="act_disciplines-add" type="action"><span class="discipline__icon">&amp;</span><span class="discipline__buttontext">Add Power</span></button>
                </div>
              </div>
            </fieldset><!--<div class="repcontainer" data-groupname="repeating_disciplines"></div><div class="repcontrol" data-groupname="repeating_disciplines"><button class="btn repcontrol_edit">Modify</button><button class="btn repcontrol_add">+Add</button></div>-->
          </div>
        </div>
        <div class="col-md-6">
          <div class="advantages">
            <h2 class="heading--noborder">Advantages</h2>
            <fieldset class="repeating_advantages" style="display: none;">
              <div class="advantage">
                <input class="advantage__displaytoggle" name="attr_advantage_display_toggle" type="hidden" value="on">
                <div class="advantage__titlebar">
                  <input class="advantage__name" name="attr_advantage_name" type="text">
                  <div class="advantage__dots">
                    <div class="dots">
                      <input name="attr_advantage" type="hidden" value="0">
                      <div class="dots__wrapper">
                        <div class="dots__container">
                          <input class="dot__hidden" checked="checked" name="attr_advantage" type="checkbox" value="0">
                          <input class="dot__hidden" name="attr_advantage" type="checkbox" value="1">
                          <div class="dot dot--1 dot--circle dot_max_1 ">
                            <input class="dot__input" name="attr_advantage" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                          </div>
                          <input class="dot__hidden" name="attr_advantage" type="checkbox" value="2">
                          <div class="dot dot--2 dot--circle dot_max_2 ">
                            <input class="dot__input" name="attr_advantage" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                          </div>
                          <input class="dot__hidden" name="attr_advantage" type="checkbox" value="3">
                          <div class="dot dot--3 dot--circle dot_max_3 ">
                            <input class="dot__input" name="attr_advantage" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                          </div>
                          <input class="dot__hidden" name="attr_advantage" type="checkbox" value="4">
                          <div class="dot dot--4 dot--circle dot_max_4 ">
                            <input class="dot__input" name="attr_advantage" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                          </div>
                          <input class="dot__hidden" name="attr_advantage" type="checkbox" value="5">
                          <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                            <input class="dot__input" name="attr_advantage" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                          </div>
                          <div class="dot dot--reset dot--circle">
                            <input class="dot__input" name="attr_advantage" type="radio" value="0"><span class="dot__clear">×</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="advantage__controls">
                    <button class="advantage__control btn ui-draggable" type="roll" value="&amp;{template:vampirechat} {{character=@{character_name}}} {{title=@{advantage_name}}} {{rank=[[@{advantage}]]}} {{category=@{advantage_category}}} {{theme=@{advantage_theme}}} {{description=@{advantage_description}}}"><span class="advantage__tochat">w</span></button>
                    <div class="advantage__control">
                      <input checked="checked" name="attr_advantage_display_toggle" type="checkbox"><span class="advantage__expand">`</span><span class="advantage__close">J</span>
                    </div>
                  </div>
                </div>
                <div class="advantage__display">
                  <div class="advantage__displayitem">
                    <div class="advantage__title">Category</div>
                    <input class="discipline-power__input" name="attr_advantage_category" type="text" placeholder="Advantage Category">
                  </div>
                  <div class="advantage__displayitem">
                    <div class="advantage__title">Theme</div>
                    <input class="discipline-power__input" name="attr_advantage_theme" type="text" placeholder="Advantage Theme">
                  </div>
                  <div class="advantage__displayitem">
                    <div class="advantage__title">Description</div>
                    <textarea class="discipline-power__textarea" name="attr_advantage_description" type="text" placeholder="Advantage Description"></textarea>
                  </div>
                </div>
              </div>
            </fieldset>
            <!--<div class="repcontainer" data-groupname="repeating_advantages"></div>
            <div class="repcontrol" data-groupname="repeating_advantages"><button class="btn repcontrol_edit">Modify</button><button class="btn repcontrol_add">+Add</button></div>-->
          </div>
          <div class="flaws">
            <h2 class="heading--noborder">Flaws</h2>
            <fieldset class="repeating_flaws" style="display: none;">
              <div class="flaw">
                <input class="flaw__displaytoggle" name="attr_flaw_display_toggle" type="hidden" value="on">
                <div class="flaw__titlebar">
                  <input class="flaw__name" name="attr_flaw_name" type="text" placeholder="Flaw Name">
                  <div class="flaw__dots">
                    <div class="dots">
                      <input name="attr_flaw" type="hidden" value="0">
                      <div class="dots__wrapper">
                        <div class="dots__container">
                          <input class="dot__hidden" checked="checked" name="attr_flaw" type="checkbox" value="0">
                          <input class="dot__hidden" name="attr_flaw" type="checkbox" value="1">
                          <div class="dot dot--1 dot--circle dot_max_1 ">
                            <input class="dot__input" name="attr_flaw" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                          </div>
                          <input class="dot__hidden" name="attr_flaw" type="checkbox" value="2">
                          <div class="dot dot--2 dot--circle dot_max_2 ">
                            <input class="dot__input" name="attr_flaw" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                          </div>
                          <input class="dot__hidden" name="attr_flaw" type="checkbox" value="3">
                          <div class="dot dot--3 dot--circle dot_max_3 ">
                            <input class="dot__input" name="attr_flaw" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                          </div>
                          <input class="dot__hidden" name="attr_flaw" type="checkbox" value="4">
                          <div class="dot dot--4 dot--circle dot_max_4 ">
                            <input class="dot__input" name="attr_flaw" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                          </div>
                          <input class="dot__hidden" name="attr_flaw" type="checkbox" value="5">
                          <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                            <input class="dot__input" name="attr_flaw" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                          </div>
                          <div class="dot dot--reset dot--circle">
                            <input class="dot__input" name="attr_flaw" type="radio" value="0"><span class="dot__clear">×</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="flaw__controls">
                    <button class="advantage__control btn ui-draggable" type="roll" value="&amp;{template:vampirechat} {{character=@{character_name}}} {{title=@{flaw_name}}} {{rank=[[@{flaw}]]}} {{category=@{flaw_category}}} {{theme=@{flaw_theme}}} {{description=@{flaw_description}}}"><span class="advantage__tochat">w</span></button>
                    <div class="flaw__control">
                      <input checked="checked" name="attr_flaw_display_toggle" type="checkbox"><span class="flaw__expand">`</span><span class="flaw__close">J</span>
                    </div>
                  </div>
                </div>
                <div class="flaw__display">
                  <div class="flaw__displayitem">
                    <div class="flaw__title">Category</div>
                    <input class="discipline-power__input" name="attr_flaw_category" type="text" placeholder="Flaw Category">
                  </div>
                  <div class="flaw__displayitem">
                    <div class="flaw__title">Theme</div>
                    <input class="discipline-power__input" name="attr_flaw_theme" type="text" placeholder="Flaw Theme">
                  </div>
                  <div class="flaw__displayitem">
                    <div class="flaw__title">Description</div>
                    <textarea class="discipline-power__textarea" name="attr_flaw_description" type="text" placeholder="Flaw Description"></textarea>
                  </div>
                </div>
              </div>
            </fieldset><!--<div class="repcontainer" data-groupname="repeating_flaws"></div><div class="repcontrol" data-groupname="repeating_flaws"><button class="btn repcontrol_edit">Modify</button><button class="btn repcontrol_add">+Add</button></div>-->
          </div>
        </div>
      </div>
    </div>
    <div class="reverse">
      <div class="row header">
        <div class="logo col-md-3"><img src="https://s3.amazonaws.com/files.d20.io/images/228598570/MXFnEFztdj2G9ndi1slSeA/max.png?1623710565"></div>
      </div>
      <div class="navigation row justify-content-between align-items-center">
        <div class="navigation__whisper col-md-3">
          <button class="action-roll navigation__roll" name="act_arbitrary" type="action">
          </button>
          <input name="attr_whisper_toggle" type="hidden" value="0">
          <div class="whisper">
            <input name="attr_whisper_toggle" type="checkbox">
            <div class="whisper__grid"><strong>Whisper Roll</strong><span class="whisper__slider"></span></div>
          </div>
        </div>
        <div class="navigation__pages col-md-4">
          <div class="navigation__container row justify-content-center">
            <button class="col navigation__item" name="act_front" type="action">Front</button>
            <button class="col navigation__item" name="act_reverse" type="action">Reverse</button>
          </div>
        </div>
        <div class="navigation__sheets col-md-2">
          <select class="navigation__select" name="attr_sheet_type">
            <option value="pc">PC Sheet</option>
            <option value="npc">SPC Sheet</option>

          </select>
        </div>
      </div>
      <div class="row strictures no-gutters">
        <div class="col-md-4">
          <div class="textarea">
            <label class="textarea__label">Chronicle Tenets</label>
            <textarea class="textarea__input textarea__inner" name="attr_tenets"></textarea>
          </div>
        </div>
        <div class="col-md-4">
          <div class="textarea">
            <label class="textarea__label">Touchstones &amp; Convictions</label>
            <textarea class="textarea__input textarea__inner" name="attr_touchstone_convictions"></textarea>
          </div>
        </div>
        <div class="col-md-4">
          <div class="textarea">
            <label class="textarea__label">Clan Bane</label>
            <textarea class="textarea__input textarea__inner" name="attr_bane"></textarea>
          </div>
        </div>
      </div>
      <div class="row align-items-stretch">
        <div class="col-md">
          <div class="blood">
            <div class="blood__title">
              <h4 class="heading--noborder">Blood Potency</h4>
              <div class="blood__potency">
                <div class="dots">
                  <input name="attr_blood_potency" type="hidden" value="0">
                  <div class="dots__wrapper">
                    <div class="dots__container">
                      <input class="dot__hidden" checked="checked" name="attr_blood_potency" type="checkbox" value="0">
                      <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="1">
                      <div class="dot dot--1 dot--circle dot_max_1 ">
                        <input class="dot__input" name="attr_blood_potency" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                      </div>
                      <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="2">
                      <div class="dot dot--2 dot--circle dot_max_2 ">
                        <input class="dot__input" name="attr_blood_potency" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                      </div>
                      <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="3">
                      <div class="dot dot--3 dot--circle dot_max_3 ">
                        <input class="dot__input" name="attr_blood_potency" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                      </div>
                      <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="4">
                      <div class="dot dot--4 dot--circle dot_max_4 ">
                        <input class="dot__input" name="attr_blood_potency" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                      </div>
                      <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="5">
                      <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                        <input class="dot__input" name="attr_blood_potency" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                      </div>
                      <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="6">
                      <div class="dot dot--6 dot--circle dot_max_6 ">
                        <input class="dot__input" name="attr_blood_potency" type="radio" value="6"><span class="dot__checkmark dot__checkmark--6"></span>
                      </div>
                      <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="7">
                      <div class="dot dot--7 dot--circle dot_max_7 ">
                        <input class="dot__input" name="attr_blood_potency" type="radio" value="7"><span class="dot__checkmark dot__checkmark--7"></span>
                      </div>
                      <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="8">
                      <div class="dot dot--8 dot--circle dot_max_8 ">
                        <input class="dot__input" name="attr_blood_potency" type="radio" value="8"><span class="dot__checkmark dot__checkmark--8"></span>
                      </div>
                      <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="9">
                      <div class="dot dot--9 dot--circle dot_max_9 ">
                        <input class="dot__input" name="attr_blood_potency" type="radio" value="9"><span class="dot__checkmark dot__checkmark--9"></span>
                      </div>
                      <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="10">
                      <div class="dot dot--10 dot--circle dot_max_10 dot--rightmargin">
                        <input class="dot__input" name="attr_blood_potency" type="radio" value="10"><span class="dot__checkmark dot__checkmark--10"></span>
                      </div>
                      <div class="dot dot--reset dot--circle">
                        <input class="dot__input" name="attr_blood_potency" type="radio" value="0"><span class="dot__clear">×</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="border-r">
              <div class="blood__grid">
                <div class="blood__item">
                  <div class="input input--text">
                    <div class="input__title">Blood Surge</div>
                    <input class="input__interface" name="attr_blood_surge" type="text">
                  </div>
                </div>
                <div class="blood__item">
                  <div class="input input--text">
                    <div class="input__title">Mend Amount</div>
                    <input class="input__interface" name="attr_blood_mend_amount" type="text">
                  </div>
                </div>
                <div class="blood__item">
                  <div class="input input--text">
                    <div class="input__title">Power Bonus</div>
                    <input class="input__interface" name="attr_blood_power_bonus" type="text">
                  </div>
                </div>
                <div class="blood__item">
                  <div class="input input--text">
                    <div class="input__title">Rouse Re-Roll</div>
                    <input class="input__interface" name="attr_blood_rouse" type="text">
                  </div>
                </div>
                <div class="blood__item">
                  <div class="input input--text">
                    <div class="input__title">Feeding Penalty</div>
                    <input class="input__interface" name="attr_blood_feeding_penalty" type="text">
                  </div>
                </div>
                <div class="blood__item">
                  <div class="input input--text">
                    <div class="input__title">Bane Severity</div>
                    <input class="input__interface" name="attr_blood_bane_severity" type="text">
                  </div>
                </div>
              </div>
              <div class="notes">
                <div class="textarea">
                  <label class="textarea__label">Notes</label>
                  <textarea class="textarea__input textarea__inner" name="attr_notes"></textarea>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md padding-t">
          <div class="experience">
            <div class="input input--number">
              <div class="input__title">Total Experience</div>
              <div class="input__spacer"></div>
              <input class="input__interface" name="attr_experience" type="number">
            </div>
            <div class="input input--number">
              <div class="input__title">Spent Experience</div>
              <div class="input__spacer"></div>
              <input class="input__interface" name="attr_experience_spent" type="number">
            </div>
          </div>
          <div class="bio">
            <div class="input input--text">
              <div class="input__title">True age</div>
              <input class="input__interface" name="attr_age_true" type="text">
            </div>
            <div class="input input--text">
              <div class="input__title">Apparent age</div>
              <input class="input__interface" name="attr_age_apparent" type="text">
            </div>
            <div class="input input--text">
              <div class="input__title">Date of birth</div>
              <input class="input__interface" name="attr_date_of_birth" type="text">
            </div>
            <div class="input input--text">
              <div class="input__title">Date of death</div>
              <input class="input__interface" name="attr_date_of_death" type="text">
            </div>
            <div class="input input--text">
              <div class="input__title">Coterie Type</div>
              <input class="input__interface" name="attr_coterie_type" type="text">
            </div>
            <div class="input input--textarea">
              <div class="input__title">Compulsions</div>
              <textarea class="input__interface" name="attr_compulsions"></textarea>
            </div>
            <div class="input input--textarea">
              <div class="input__title">Appearance</div>
              <textarea class="input__interface" name="attr_appearance"></textarea>
            </div>
            <div class="input input--textarea">
              <div class="input__title">Distinguishing features</div>
              <textarea class="input__interface" name="attr_features"></textarea>
            </div>
            <div class="input input--textarea">
              <div class="input__title">Former Ambition</div>
              <textarea class="input__interface" name="attr_former_ambition"></textarea>
            </div>
            <div class="input input--textarea">
              <div class="input__title">History</div>
              <textarea class="input__interface" name="attr_history"></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="reverse">
    <div class="row header">
      <div class="logo col-md-3"><img src="https://s3.amazonaws.com/files.d20.io/images/228598570/MXFnEFztdj2G9ndi1slSeA/max.png?1623710565"></div>
    </div>
    <div class="navigation row justify-content-between align-items-center">
      <div class="navigation__whisper col-md-3">
        <button class="action-roll navigation__roll" name="act_arbitrary" type="action">
        </button>
        <input name="attr_whisper_toggle" type="hidden" value="0">
        <div class="whisper">
          <input name="attr_whisper_toggle" type="checkbox">
          <div class="whisper__grid"><strong>Whisper Roll</strong><span class="whisper__slider"></span></div>
        </div>
      </div>
      <div class="navigation__pages col-md-4">
        <div class="navigation__container row justify-content-center">
          <button class="col navigation__item" name="act_front" type="action">Front</button>
          <button class="col navigation__item" name="act_reverse" type="action">Reverse</button>
        </div>
      </div>
      <div class="navigation__sheets col-md-2">
        <select class="navigation__select" name="attr_sheet_type">
          <option value="pc">PC Sheet</option>
          <option value="npc">SPC Sheet</option>

        </select>
      </div>
    </div>
    <div class="row strictures no-gutters">
      <div class="col-md-4">
        <div class="textarea">
          <label class="textarea__label">Chronicle Tenets</label>
          <textarea class="textarea__input textarea__inner" name="attr_tenets"></textarea>
        </div>
      </div>
      <div class="col-md-4">
        <div class="textarea">
          <label class="textarea__label">Touchstones &amp; Convictions</label>
          <textarea class="textarea__input textarea__inner" name="attr_touchstone_convictions"></textarea>
        </div>
      </div>
      <div class="col-md-4">
        <div class="textarea">
          <label class="textarea__label">Clan Bane</label>
          <textarea class="textarea__input textarea__inner" name="attr_bane"></textarea>
        </div>
      </div>
    </div>
    <div class="row align-items-stretch">
      <div class="col-md">
        <div class="blood">
          <div class="blood__title">
            <h4 class="heading--noborder">Blood Potency</h4>
            <div class="blood__potency">
              <div class="dots">
                <input name="attr_blood_potency" type="hidden" value="0">
                <div class="dots__wrapper">
                  <div class="dots__container">
                    <input class="dot__hidden" checked="checked" name="attr_blood_potency" type="checkbox" value="0">
                    <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="1">
                    <div class="dot dot--1 dot--circle dot_max_1 ">
                      <input class="dot__input" name="attr_blood_potency" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                    </div>
                    <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="2">
                    <div class="dot dot--2 dot--circle dot_max_2 ">
                      <input class="dot__input" name="attr_blood_potency" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                    </div>
                    <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="3">
                    <div class="dot dot--3 dot--circle dot_max_3 ">
                      <input class="dot__input" name="attr_blood_potency" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                    </div>
                    <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="4">
                    <div class="dot dot--4 dot--circle dot_max_4 ">
                      <input class="dot__input" name="attr_blood_potency" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                    </div>
                    <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="5">
                    <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                      <input class="dot__input" name="attr_blood_potency" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                    </div>
                    <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="6">
                    <div class="dot dot--6 dot--circle dot_max_6 ">
                      <input class="dot__input" name="attr_blood_potency" type="radio" value="6"><span class="dot__checkmark dot__checkmark--6"></span>
                    </div>
                    <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="7">
                    <div class="dot dot--7 dot--circle dot_max_7 ">
                      <input class="dot__input" name="attr_blood_potency" type="radio" value="7"><span class="dot__checkmark dot__checkmark--7"></span>
                    </div>
                    <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="8">
                    <div class="dot dot--8 dot--circle dot_max_8 ">
                      <input class="dot__input" name="attr_blood_potency" type="radio" value="8"><span class="dot__checkmark dot__checkmark--8"></span>
                    </div>
                    <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="9">
                    <div class="dot dot--9 dot--circle dot_max_9 ">
                      <input class="dot__input" name="attr_blood_potency" type="radio" value="9"><span class="dot__checkmark dot__checkmark--9"></span>
                    </div>
                    <input class="dot__hidden" name="attr_blood_potency" type="checkbox" value="10">
                    <div class="dot dot--10 dot--circle dot_max_10 dot--rightmargin">
                      <input class="dot__input" name="attr_blood_potency" type="radio" value="10"><span class="dot__checkmark dot__checkmark--10"></span>
                    </div>
                    <div class="dot dot--reset dot--circle">
                      <input class="dot__input" name="attr_blood_potency" type="radio" value="0"><span class="dot__clear">×</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="border-r">
            <div class="blood__grid">
              <div class="blood__item">
                <div class="input input--text">
                  <div class="input__title">Blood Surge</div>
                  <input class="input__interface" name="attr_blood_surge" type="text">
                </div>
              </div>
              <div class="blood__item">
                <div class="input input--text">
                  <div class="input__title">Mend Amount</div>
                  <input class="input__interface" name="attr_blood_mend_amount" type="text">
                </div>
              </div>
              <div class="blood__item">
                <div class="input input--text">
                  <div class="input__title">Power Bonus</div>
                  <input class="input__interface" name="attr_blood_power_bonus" type="text">
                </div>
              </div>
              <div class="blood__item">
                <div class="input input--text">
                  <div class="input__title">Rouse Re-Roll</div>
                  <input class="input__interface" name="attr_blood_rouse" type="text">
                </div>
              </div>
              <div class="blood__item">
                <div class="input input--text">
                  <div class="input__title">Feeding Penalty</div>
                  <input class="input__interface" name="attr_blood_feeding_penalty" type="text">
                </div>
              </div>
              <div class="blood__item">
                <div class="input input--text">
                  <div class="input__title">Bane Severity</div>
                  <input class="input__interface" name="attr_blood_bane_severity" type="text">
                </div>
              </div>
            </div>
            <div class="notes">
              <div class="textarea">
                <label class="textarea__label">Notes</label>
                <textarea class="textarea__input textarea__inner" name="attr_notes"></textarea>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md padding-t">
        <div class="experience">
          <div class="input input--number">
            <div class="input__title">Total Experience</div>
            <div class="input__spacer"></div>
            <input class="input__interface" name="attr_experience" type="number">
          </div>
          <div class="input input--number">
            <div class="input__title">Spent Experience</div>
            <div class="input__spacer"></div>
            <input class="input__interface" name="attr_experience_spent" type="number">
          </div>
        </div>
        <div class="bio">
          <div class="input input--text">
            <div class="input__title">True age</div>
            <input class="input__interface" name="attr_age_true" type="text">
          </div>
          <div class="input input--text">
            <div class="input__title">Apparent age</div>
            <input class="input__interface" name="attr_age_apparent" type="text">
          </div>
          <div class="input input--text">
            <div class="input__title">Date of birth</div>
            <input class="input__interface" name="attr_date_of_birth" type="text">
          </div>
          <div class="input input--text">
            <div class="input__title">Date of death</div>
            <input class="input__interface" name="attr_date_of_death" type="text">
          </div>
          <div class="input input--text">
            <div class="input__title">Coterie Type</div>
            <input class="input__interface" name="attr_coterie_type" type="text">
          </div>
          <div class="input input--textarea">
            <div class="input__title">Compulsions</div>
            <textarea class="input__interface" name="attr_compulsions"></textarea>
          </div>
          <div class="input input--textarea">
            <div class="input__title">Appearance</div>
            <textarea class="input__interface" name="attr_appearance"></textarea>
          </div>
          <div class="input input--textarea">
            <div class="input__title">Distinguishing features</div>
            <textarea class="input__interface" name="attr_features"></textarea>
          </div>
          <div class="input input--textarea">
            <div class="input__title">Former Ambition</div>
            <textarea class="input__interface" name="attr_former_ambition"></textarea>
          </div>
          <div class="input input--textarea">
            <div class="input__title">History</div>
            <textarea class="input__interface" name="attr_history"></textarea>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="npc">
    <div class="row header justify-content-around">
      <div class="logo col-md-4"><img src="https://s3.amazonaws.com/files.d20.io/images/228598570/MXFnEFztdj2G9ndi1slSeA/max.png?1623710565"></div>
    </div>
    <input name="attr_section_characteristics" type="hidden" value="0">
    <input name="attr_section_secondary" type="hidden" value="0">
    <input name="attr_section_generaldiff" type="hidden" value="0">
    <input name="attr_section_exceptional" type="hidden" value="0">
    <input name="attr_section_skills" type="hidden" value="0">
    <input name="attr_section_disciplines" type="hidden" value="0">
    <input name="attr_section_special" type="hidden" value="0">
    <div class="navigation row justify-content-between align-items-center">
      <div class="navigation__whisper col-md-3">
        <button class="action-roll navigation__roll" name="act_arbitrary" type="action">
        </button>
        <input name="attr_whisper_toggle" type="hidden" value="0">
        <div class="whisper">
          <input name="attr_whisper_toggle" type="checkbox">
          <div class="whisper__grid"><strong>Whisper Roll</strong><span class="whisper__slider"></span></div>
        </div>
      </div>
      <div class="navigation__pages col-md-4">
        <div class="navigation__container row justify-content-center">
          <div class="sections">
            <div class="sections__control">
              <input name="attr_spcsettings_modal_toggle" type="checkbox" value="1">
              <div class="section-control"><span class="section-control__icon">y</span><span class="section-control__text">Configure Sheet</span></div>
            </div>
          </div>
        </div>
      </div>
      <div class="navigation__sheets col-md-2">
        <select class="navigation__select" name="attr_sheet_type">
          <option value="pc">PC Sheet</option>
          <option value="npc">SPC Sheet</option>

        </select>
      </div>
    </div>
    <div class="row npcname">
      <input name="attr_npcname_edit_toggle" type="hidden" value="0">
      <div class="npcname__edit--off">
        <h1 class="npcname__header col"><span name="attr_character_name">Macros</span></h1>
        <div class="npcname__editbutton">
          <input name="attr_npcname_edit_toggle" type="checkbox" value="1">
        </div>
      </div>
      <div class="npcname__edit--on">
        <div class="npcname__editwrapper">
          <input class="npcname__input" name="attr_character_name" type="text">
          <div class="npcname__confirm">
            <input name="attr_npcname_edit_toggle" type="checkbox" value="1"><span>3</span>
          </div>
        </div>
      </div>
    </div>
    <div class="section--simple">
      <div class="row standardpools">
        <div class="col-md-4">
          <div class="pool">
            <div class="pool__title">
              <button class="action-roll pool__roll" name="act_npc-physical" type="action"><span>Physical</span></button>
            </div>
            <input class="pool__input" name="attr_physical" type="number">
          </div>
        </div>
        <div class="col-md-4">
          <div class="pool">
            <div class="pool__title">
              <button class="action-roll pool__roll" name="act_npc-social" type="action"><span>Social</span></button>
            </div>
            <input class="pool__input" name="attr_social" type="number">
          </div>
        </div>
        <div class="col-md-4">
          <div class="pool">
            <div class="pool__title">
              <button class="action-roll pool__roll" name="act_npc-mental" type="action"><span>Mental</span></button>
            </div>
            <input class="pool__input" name="attr_mental" type="number">
          </div>
        </div>
      </div>
    </div>
    <div class="section--complex">
      <div class="row attributes">
        <div class="attributes__column col-md-4">
          <h3>physical</h3>
          <div class="attributes__wrapper">
            <div class="pool">
              <div class="pool__title">
                <button class="action-roll pool__roll" name="act_npc-strength" type="action"><span>Strength</span></button>
              </div>
              <input class="pool__input" name="attr_strength" type="number">
            </div>
            <div class="pool">
              <div class="pool__title">
                <button class="action-roll pool__roll" name="act_npc-dexterity" type="action"><span>Dexterity</span></button>
              </div>
              <input class="pool__input" name="attr_dexterity" type="number">
            </div>
            <div class="pool">
              <div class="pool__title">
                <button class="action-roll pool__roll" name="act_npc-stamina" type="action"><span>Stamina</span></button>
              </div>
              <input class="pool__input" name="attr_stamina" type="number">
            </div>
          </div>
        </div>
        <div class="attributes__column col-md-4">
          <h3>social</h3>
          <div class="attributes__wrapper">
            <div class="pool">
              <div class="pool__title">
                <button class="action-roll pool__roll" name="act_npc-charisma" type="action"><span>Charisma</span></button>
              </div>
              <input class="pool__input" name="attr_charisma" type="number">
            </div>
            <div class="pool">
              <div class="pool__title">
                <button class="action-roll pool__roll" name="act_npc-manipulation" type="action"><span>Manipulation</span></button>
              </div>
              <input class="pool__input" name="attr_manipulation" type="number">
            </div>
            <div class="pool">
              <div class="pool__title">
                <button class="action-roll pool__roll" name="act_npc-composure" type="action"><span>Composure</span></button>
              </div>
              <input class="pool__input" name="attr_composure" type="number">
            </div>
          </div>
        </div>
        <div class="attributes__column col-md-4">
          <h3>mental</h3>
          <div class="attributes__wrapper">
            <div class="pool">
              <div class="pool__title">
                <button class="action-roll pool__roll" name="act_npc-intelligence" type="action"><span>Intelligence</span></button>
              </div>
              <input class="pool__input" name="attr_intelligence" type="number">
            </div>
            <div class="pool">
              <div class="pool__title">
                <button class="action-roll pool__roll" name="act_npc-wits" type="action"><span>Wits</span></button>
              </div>
              <input class="pool__input" name="attr_wits" type="number">
            </div>
            <div class="pool">
              <div class="pool__title">
                <button class="action-roll pool__roll" name="act_npc-resolve" type="action"><span>Resolve</span></button>
              </div>
              <input class="pool__input" name="attr_resolve" type="number">
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-6 section--secondary">
        <div class="secondaryattributes">
          <h2>Secondary Attributes</h2>
          <div class="row">
            <div class="col-md-6">
              <div class="input input--number">
                <div class="input__title">Health</div>
                <input class="input__interface" name="attr_health" type="number">
              </div>
            </div>
            <div class="col-md-6">
              <div class="input input--number">
                <div class="input__title">Willpower</div>
                <input class="input__interface" name="attr_willpower" type="number">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6 section--generaldiff">
        <div class="secondaryattributes">
          <h2>General Difficulties</h2>
          <div class="row">
            <div class="col-md-6">
              <div class="input input--number">
                <div class="input__title">Excellent</div>
                <input class="input__interface" name="attr_general_excellent" type="number">
              </div>
            </div>
            <div class="col-md-6">
              <div class="input input--number">
                <div class="input__title">Mediocre</div>
                <input class="input__interface" name="attr_general_mediocre" type="number">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6 section--skills">
        <div class="skills">
          <h2>Skills</h2>
          <fieldset class="repeating_npcskills" style="display: none;">
            <div class="repeatingpool">
              <input class="repeatingpool__edittoggle" name="attr_skill_edit" type="hidden" value="on">
              <div class="repeatingpool__title">
                <button class="action-roll pool__roll" name="act_npc-skill" type="action"><span name="attr_skill_name"></span></button>
              </div>
              <input class="repeatingpool__name" name="attr_skill_name" type="text">
              <input class="repeatingpool__input" name="attr_skill" type="number" value="0">
              <div class="repeatingpool__edit">
                <input class="repeatingpool__checkbox" checked="checked" name="attr_skill_edit" type="checkbox"><span class="repeatingpool__editoff">p</span><span class="repeatingpool__editon">3</span>
              </div>
            </div>
          </fieldset><div class="repcontainer" data-groupname="repeating_npcskills"></div><div class="repcontrol" data-groupname="repeating_npcskills"><button class="btn repcontrol_edit">Modify</button><button class="btn repcontrol_add">+Add</button></div>
        </div>
      </div>
      <div class="col-md-6 section--exceptional">
        <div class="exceptionalpools">
          <h2>Exceptional Pools</h2>
          <fieldset class="repeating_npcexceptional" style="display: none;">
            <div class="repeatingpool">
              <input class="repeatingpool__edittoggle" name="attr_exceptional_edit" type="hidden" value="on">
              <div class="repeatingpool__title">
                <button class="action-roll pool__roll" name="act_npc-exceptional" type="action"><span name="attr_exceptional_name"></span></button>
              </div>
              <input class="repeatingpool__name" name="attr_exceptional_name" type="text">
              <input class="repeatingpool__input" name="attr_exceptional" type="number" value="0">
              <div class="repeatingpool__edit">
                <input class="repeatingpool__checkbox" checked="checked" name="attr_exceptional_edit" type="checkbox"><span class="repeatingpool__editoff">p</span><span class="repeatingpool__editon">3</span>
              </div>
            </div>
          </fieldset><div class="repcontainer" data-groupname="repeating_npcexceptional"></div><div class="repcontrol" data-groupname="repeating_npcexceptional"><button class="btn repcontrol_edit">Modify</button><button class="btn repcontrol_add">+Add</button></div>
        </div>
      </div>
      <div class="col-md-6 section--disciplines">
        <div class="disciplines">
          <h2>Disciplines</h2>
          <fieldset class="repeating_disciplines" style="display: none;">
            <div class="discipline">
              <input class="discipline__displaytoggle" name="attr_discipline_display_toggle" type="hidden" value="on">
              <input class="discipline__build-roll-toggle" name="attr_discipline_build_roll" type="hidden">
              <div class="discipline__head">
                <div class="discipline__title">
                  <input name="attr_discipline_name" type="text">
                </div>
                <div class="discipline__dots">
                  <div class="dots">
                    <input name="attr_discipline" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_discipline" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_discipline" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_discipline" type="radio" value="1"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_discipline" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_discipline" type="radio" value="2"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_discipline" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_discipline" type="radio" value="3"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_discipline" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_discipline" type="radio" value="4"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_discipline" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_discipline" type="radio" value="5"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                        <div class="dot dot--reset dot--circle">
                          <input class="dot__input" name="attr_discipline" type="radio" value="0"><span class="dot__clear">×</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="discipline__controls">
                  <div class="discipline__control discipline__control--roll">
                    <input name="attr_discipline_build_roll" type="checkbox" title="title_discipline_roll"><img class="discipline__die" src="https://storage.googleapis.com/char-sheet-app-images-6e101411/vampire5e/dice-icon.png" alt="[alt_discipline_roll]"><span class="discipline__close">*</span>
                  </div>
                  <button class="discipline__control btn ui-draggable" type="roll" value="&amp;{template:vampirechat} {{character=@{character_name}}} {{title=@{discipline_name}}} {{rank=[[@{discipline}]]}} {{type=@{discipline_type}}} {{threat=@{discipline_threat}}} {{blood=@{discipline_blood}}} {{power_1_name=@{power_1_name}}} {{power_1_description=@{power_1_description}}} {{power_2_name=@{power_2_name}}} {{power_2_description=@{power_2_description}}} {{power_3_name=@{power_3_name}}} {{power_3_description=@{power_3_description}}} {{power_4_name=@{power_4_name}}} {{power_4_description=@{power_4_description}}} {{power_5_name=@{power_5_name}}} {{power_5_description=@{power_5_description}}} {{power_6_name=@{power_6_name}}} {{power_6_description=@{power_6_description}}} {{power_7_name=@{power_7_name}}} {{power_7_description=@{power_7_description}}} {{power_8_name=@{power_8_name}}} {{power_8_description=@{power_8_description}}} {{power_9_name=@{power_9_name}}} {{power_9_description=@{power_9_description}}} {{power_10_name=@{power_10_name}}} {{power_10_description=@{power_10_description}}}"><span class="discipline__tochat">w</span></button>
                  <div class="discipline__control">
                    <input checked="checked" name="attr_discipline_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                  </div>
                </div>
              </div>
              <div class="discipline__details">
                <div class="discipline__type">
                  <div class="discipline__subtitle">Type</div>
                  <input name="attr_discipline_type" type="text" placeholder="Discipline Type">
                </div>
                <div class="discipline__threat">
                  <div class="discipline__subtitle">Masquerade Threat</div>
                  <textarea name="attr_discipline_threat" placeholder="Discipline Threat"></textarea>
                </div>
                <div class="discipline__blood">
                  <div class="discipline__subtitle">Blood Resonance</div>
                  <textarea name="attr_discipline_blood" placeholder="Discipline Blood Resonance"></textarea>
                </div>
              </div>
              <div class="discipline__roll-builder">
                <div class="discipline__roll-operand">
                  <input class="discipline__roll-type-selector" name="attr_roll_type_1" type="hidden">
                  <select class="discipline__roll-type-selector" name="attr_roll_type_1">
                    <option selected="selected" value="attributes">Attributes</option>
                    <option value="skills">Skills</option>
                    <option value="discipline">Discipline</option>
                  </select>
                  <input name="attr_roll_attrib_1" type="hidden" value="0">
                  <select class="discipline__roll-attrs discipline__groupselect discipline__groupselect--roll_attrib_1" name="attr_roll_attrib_1">
                    <option class="false-group false-group--hidden" hidden="hidden" selected="selected" value="0">...</option>
                    <option class="false-group false-group--hidden" value="physical">Physical</option>
                    <option class="discipline__select-option--attrib" value="strength">Strength</option>
                    <option class="discipline__select-option--attrib" value="dexterity">Dexterity</option>
                    <option class="discipline__select-option--attrib" value="stamina">Stamina</option>
                    <option class="discipline__select-option--skills" value="athletics">Athletics</option>
                    <option class="discipline__select-option--skills" value="brawl">Brawl</option>
                    <option class="discipline__select-option--skills" value="craft">Craft</option>
                    <option class="discipline__select-option--skills" value="drive">Drive</option>
                    <option class="discipline__select-option--skills" value="firearms">Firearms</option>
                    <option class="discipline__select-option--skills" value="larceny">Larceny</option>
                    <option class="discipline__select-option--skills" value="melee">Melee</option>
                    <option class="discipline__select-option--skills" value="stealth">Stealth</option>
                    <option class="discipline__select-option--skills" value="survival">Survival</option>
                    <option class="false-group false-group--hidden" value="social">Social</option>
                    <option class="discipline__select-option--attrib" value="charisma">Charisma</option>
                    <option class="discipline__select-option--attrib" value="manipulation">Manipulation</option>
                    <option class="discipline__select-option--attrib" value="composure">Composure</option>
                    <option class="discipline__select-option--skills" value="animal_ken">Animal Ken</option>
                    <option class="discipline__select-option--skills" value="etiquette">Etiquette</option>
                    <option class="discipline__select-option--skills" value="insight">Insight</option>
                    <option class="discipline__select-option--skills" value="intimidation">Intimidation</option>
                    <option class="discipline__select-option--skills" value="leadership">Leadership</option>
                    <option class="discipline__select-option--skills" value="performance">Performance</option>
                    <option class="discipline__select-option--skills" value="persuasion">Persuasion</option>
                    <option class="discipline__select-option--skills" value="streetwise">Streetwise</option>
                    <option class="discipline__select-option--skills" value="subterfuge">Subterfuge</option>
                    <option class="false-group false-group--hidden" value="mental">Mental</option>
                    <option class="discipline__select-option--attrib" value="intelligence">Intelligence</option>
                    <option class="discipline__select-option--attrib" value="wits">Wits</option>
                    <option class="discipline__select-option--attrib" value="resolve">Resolve</option>
                    <option class="discipline__select-option--skills" value="academics">Academics</option>
                    <option class="discipline__select-option--skills" value="awareness">Awareness</option>
                    <option class="discipline__select-option--skills" value="finance">Finance</option>
                    <option class="discipline__select-option--skills" value="investigation">Investigation</option>
                    <option class="discipline__select-option--skills" value="medicine">Medicine</option>
                    <option class="discipline__select-option--skills" value="occult">Occult</option>
                    <option class="discipline__select-option--skills" value="politics">Politics</option>
                    <option class="discipline__select-option--skills" value="science">Science</option>
                    <option class="discipline__select-option--skills" value="technology">Technology</option>
                  </select><span class="discipline__roll-discipline" name="attr_discipline_name"></span>
                </div>
                <div class="discipline__roll-operand">
                  <input class="discipline__roll-type-selector" name="attr_roll_type_2" type="hidden">
                  <select class="discipline__roll-type-selector" name="attr_roll_type_2">
                    <option selected="selected" value="attributes">Attributes</option>
                    <option value="skills">Skills</option>
                    <option value="discipline">Discipline</option>
                  </select>
                  <input name="attr_roll_attrib_2" type="hidden" value="0">
                  <select class="discipline__roll-attrs discipline__groupselect discipline__groupselect--roll_attrib_2" name="attr_roll_attrib_2">
                    <option class="false-group false-group--hidden" hidden="hidden" selected="selected" value="0">...</option>
                    <option class="false-group false-group--hidden" value="physical">Physical</option>
                    <option class="discipline__select-option--attrib" value="strength">Strength</option>
                    <option class="discipline__select-option--attrib" value="dexterity">Dexterity</option>
                    <option class="discipline__select-option--attrib" value="stamina">Stamina</option>
                    <option class="discipline__select-option--skills" value="athletics">Athletics</option>
                    <option class="discipline__select-option--skills" value="brawl">Brawl</option>
                    <option class="discipline__select-option--skills" value="craft">Craft</option>
                    <option class="discipline__select-option--skills" value="drive">Drive</option>
                    <option class="discipline__select-option--skills" value="firearms">Firearms</option>
                    <option class="discipline__select-option--skills" value="larceny">Larceny</option>
                    <option class="discipline__select-option--skills" value="melee">Melee</option>
                    <option class="discipline__select-option--skills" value="stealth">Stealth</option>
                    <option class="discipline__select-option--skills" value="survival">Survival</option>
                    <option class="false-group false-group--hidden" value="social">Social</option>
                    <option class="discipline__select-option--attrib" value="charisma">Charisma</option>
                    <option class="discipline__select-option--attrib" value="manipulation">Manipulation</option>
                    <option class="discipline__select-option--attrib" value="composure">Composure</option>
                    <option class="discipline__select-option--skills" value="animal_ken">Animal Ken</option>
                    <option class="discipline__select-option--skills" value="etiquette">Etiquette</option>
                    <option class="discipline__select-option--skills" value="insight">Insight</option>
                    <option class="discipline__select-option--skills" value="intimidation">Intimidation</option>
                    <option class="discipline__select-option--skills" value="leadership">Leadership</option>
                    <option class="discipline__select-option--skills" value="performance">Performance</option>
                    <option class="discipline__select-option--skills" value="persuasion">Persuasion</option>
                    <option class="discipline__select-option--skills" value="streetwise">Streetwise</option>
                    <option class="discipline__select-option--skills" value="subterfuge">Subterfuge</option>
                    <option class="false-group false-group--hidden" value="mental">Mental</option>
                    <option class="discipline__select-option--attrib" value="intelligence">Intelligence</option>
                    <option class="discipline__select-option--attrib" value="wits">Wits</option>
                    <option class="discipline__select-option--attrib" value="resolve">Resolve</option>
                    <option class="discipline__select-option--skills" value="academics">Academics</option>
                    <option class="discipline__select-option--skills" value="awareness">Awareness</option>
                    <option class="discipline__select-option--skills" value="finance">Finance</option>
                    <option class="discipline__select-option--skills" value="investigation">Investigation</option>
                    <option class="discipline__select-option--skills" value="medicine">Medicine</option>
                    <option class="discipline__select-option--skills" value="occult">Occult</option>
                    <option class="discipline__select-option--skills" value="politics">Politics</option>
                    <option class="discipline__select-option--skills" value="science">Science</option>
                    <option class="discipline__select-option--skills" value="technology">Technology</option>
                  </select><span class="discipline__roll-discipline" name="attr_discipline_name"></span>
                </div>
                <div class="discipline__roll-display">
                  <div class="dots">
                    <input name="attr_roll_display_1" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_roll_display_1" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_roll_display_1" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_roll_display_1" type="hidden"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_roll_display_1" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_roll_display_1" type="hidden"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_roll_display_1" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_roll_display_1" type="hidden"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_roll_display_1" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_roll_display_1" type="hidden"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_roll_display_1" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_roll_display_1" type="hidden"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                      </div>
                    </div>
                  </div><span>+</span>
                  <div class="dots">
                    <input name="attr_roll_display_2" type="hidden" value="0">
                    <div class="dots__wrapper">
                      <div class="dots__container">
                        <input class="dot__hidden" checked="checked" name="attr_roll_display_2" type="checkbox" value="0">
                        <input class="dot__hidden" name="attr_roll_display_2" type="checkbox" value="1">
                        <div class="dot dot--1 dot--circle dot_max_1 ">
                          <input class="dot__input" name="attr_roll_display_2" type="hidden"><span class="dot__checkmark dot__checkmark--1"></span>
                        </div>
                        <input class="dot__hidden" name="attr_roll_display_2" type="checkbox" value="2">
                        <div class="dot dot--2 dot--circle dot_max_2 ">
                          <input class="dot__input" name="attr_roll_display_2" type="hidden"><span class="dot__checkmark dot__checkmark--2"></span>
                        </div>
                        <input class="dot__hidden" name="attr_roll_display_2" type="checkbox" value="3">
                        <div class="dot dot--3 dot--circle dot_max_3 ">
                          <input class="dot__input" name="attr_roll_display_2" type="hidden"><span class="dot__checkmark dot__checkmark--3"></span>
                        </div>
                        <input class="dot__hidden" name="attr_roll_display_2" type="checkbox" value="4">
                        <div class="dot dot--4 dot--circle dot_max_4 ">
                          <input class="dot__input" name="attr_roll_display_2" type="hidden"><span class="dot__checkmark dot__checkmark--4"></span>
                        </div>
                        <input class="dot__hidden" name="attr_roll_display_2" type="checkbox" value="5">
                        <div class="dot dot--5 dot--circle dot_max_5 dot--rightmargin">
                          <input class="dot__input" name="attr_roll_display_2" type="hidden"><span class="dot__checkmark dot__checkmark--5"></span>
                        </div>
                      </div>
                    </div>
                  </div><span>+</span><span class="discipline__roll-potency" name="attr_roll_potency_bonus" title="Potency Bonus"> </span><span>=</span>
                  <button class="action-roll discipline__roll-button action-roll" name="act_disciplineroll" type="action"><span>Roll</span>
                  </button>
                </div>
              </div>
              <div class="discipline__powers">
                <input class="discipline__powercontrol" name="attr_power_count" type="hidden">
                <div class="discipline-power discipline-power--1">
                  <input class="discipline-power__displaytoggle" name="attr_power_1_display_toggle" type="hidden" value="on">
                  <div class="discipline-power__titlebar">
                    <div class="discipline-power__title">
                      <input name="attr_power_1_name" type="text" placeholder="Power Name">
                    </div>
                    <div class="discipline-power__level">
                      <input name="attr_power_1_level" placeholder="1" type="number">
                    </div>
                    <div class="discipline-power__controls">
                      <div class="discipline-power__control">
                        <input name="attr_power_1_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                      </div>
                      <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_1_name}}} {{level=@{power_1_level}}} {{pools=@{power_1_dicepools}}} {{cost=@{power_1_cost}}} {{duration=@{power_1_duration}}} {{description=@{power_1_description}}} {{system=@{power_1_system}}}"><span>w</span></button>
                      <button class="discipline-power__control" name="act_disciplines-delete-1" type="action"><span>#</span></button>
                    </div>
                  </div>
                  <div class="discipline-power__display">
                    <div class="discipline-power__displayitem">
                      <div class="discipline-power__title">Dice Pools</div>
                      <input class="discipline-power__input" name="attr_power_1_dicepools" type="text" placeholder="Power Dice Pools">
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Cost</div>
                      <textarea class="discipline-power__textarea" name="attr_power_1_cost" type="text" placeholder="Power Cost"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Duration</div>
                      <textarea class="discipline-power__textarea" name="attr_power_1_duration" type="text" placeholder="Power Duration"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Description</div>
                      <textarea class="discipline-power__textarea" name="attr_power_1_description" placeholder="Power Description"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">System</div>
                      <textarea class="discipline-power__textarea" name="attr_power_1_system" placeholder="Power System"></textarea>
                    </div>
                  </div>
                </div>
                <div class="discipline-power discipline-power--2">
                  <input class="discipline-power__displaytoggle" name="attr_power_2_display_toggle" type="hidden" value="0">
                  <div class="discipline-power__titlebar">
                    <div class="discipline-power__title">
                      <input name="attr_power_2_name" type="text" placeholder="Power Name">
                    </div>
                    <div class="discipline-power__level">
                      <input name="attr_power_2_level" placeholder="1" type="number">
                    </div>
                    <div class="discipline-power__controls">
                      <div class="discipline-power__control">
                        <input name="attr_power_2_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                      </div>
                      <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_2_name}}} {{level=@{power_2_level}}} {{pools=@{power_2_dicepools}}} {{cost=@{power_2_cost}}} {{duration=@{power_2_duration}}} {{description=@{power_2_description}}} {{system=@{power_2_system}}}"><span>w</span></button>
                      <button class="discipline-power__control" name="act_disciplines-delete-2" type="action"><span>#</span></button>
                    </div>
                  </div>
                  <div class="discipline-power__display">
                    <div class="discipline-power__displayitem">
                      <div class="discipline-power__title">Dice Pools</div>
                      <input class="discipline-power__input" name="attr_power_2_dicepools" type="text" placeholder="Power Dice Pools">
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Cost</div>
                      <textarea class="discipline-power__textarea" name="attr_power_2_cost" type="text" placeholder="Power Cost"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Duration</div>
                      <textarea class="discipline-power__textarea" name="attr_power_2_duration" type="text" placeholder="Power Duration"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Description</div>
                      <textarea class="discipline-power__textarea" name="attr_power_2_description" placeholder="Power Description"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">System</div>
                      <textarea class="discipline-power__textarea" name="attr_power_2_system" placeholder="Power System"></textarea>
                    </div>
                  </div>
                </div>
                <div class="discipline-power discipline-power--3">
                  <input class="discipline-power__displaytoggle" name="attr_power_3_display_toggle" type="hidden" value="0">
                  <div class="discipline-power__titlebar">
                    <div class="discipline-power__title">
                      <input name="attr_power_3_name" type="text" placeholder="Power Name">
                    </div>
                    <div class="discipline-power__level">
                      <input name="attr_power_3_level" placeholder="1" type="number">
                    </div>
                    <div class="discipline-power__controls">
                      <div class="discipline-power__control">
                        <input name="attr_power_3_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                      </div>
                      <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_3_name}}} {{level=@{power_3_level}}} {{pools=@{power_3_dicepools}}} {{cost=@{power_3_cost}}} {{duration=@{power_3_duration}}} {{description=@{power_3_description}}} {{system=@{power_3_system}}}"><span>w</span></button>
                      <button class="discipline-power__control" name="act_disciplines-delete-3" type="action"><span>#</span></button>
                    </div>
                  </div>
                  <div class="discipline-power__display">
                    <div class="discipline-power__displayitem">
                      <div class="discipline-power__title">Dice Pools</div>
                      <input class="discipline-power__input" name="attr_power_3_dicepools" type="text" placeholder="Power Dice Pools">
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Cost</div>
                      <textarea class="discipline-power__textarea" name="attr_power_3_cost" type="text" placeholder="Power Cost"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Duration</div>
                      <textarea class="discipline-power__textarea" name="attr_power_3_duration" type="text" placeholder="Power Duration"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Description</div>
                      <textarea class="discipline-power__textarea" name="attr_power_3_description" placeholder="Power Description"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">System</div>
                      <textarea class="discipline-power__textarea" name="attr_power_3_system" placeholder="Power System"></textarea>
                    </div>
                  </div>
                </div>
                <div class="discipline-power discipline-power--4">
                  <input class="discipline-power__displaytoggle" name="attr_power_4_display_toggle" type="hidden" value="0">
                  <div class="discipline-power__titlebar">
                    <div class="discipline-power__title">
                      <input name="attr_power_4_name" type="text" placeholder="Power Name">
                    </div>
                    <div class="discipline-power__level">
                      <input name="attr_power_4_level" placeholder="1" type="number">
                    </div>
                    <div class="discipline-power__controls">
                      <div class="discipline-power__control">
                        <input name="attr_power_4_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                      </div>
                      <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_4_name}}} {{level=@{power_4_level}}} {{pools=@{power_4_dicepools}}} {{cost=@{power_4_cost}}} {{duration=@{power_4_duration}}} {{description=@{power_4_description}}} {{system=@{power_4_system}}}"><span>w</span></button>
                      <button class="discipline-power__control" name="act_disciplines-delete-4" type="action"><span>#</span></button>
                    </div>
                  </div>
                  <div class="discipline-power__display">
                    <div class="discipline-power__displayitem">
                      <div class="discipline-power__title">Dice Pools</div>
                      <input class="discipline-power__input" name="attr_power_4_dicepools" type="text" placeholder="Power Dice Pools">
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Cost</div>
                      <textarea class="discipline-power__textarea" name="attr_power_4_cost" type="text" placeholder="Power Cost"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Duration</div>
                      <textarea class="discipline-power__textarea" name="attr_power_4_duration" type="text" placeholder="Power Duration"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Description</div>
                      <textarea class="discipline-power__textarea" name="attr_power_4_description" placeholder="Power Description"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">System</div>
                      <textarea class="discipline-power__textarea" name="attr_power_4_system" placeholder="Power System"></textarea>
                    </div>
                  </div>
                </div>
                <div class="discipline-power discipline-power--5">
                  <input class="discipline-power__displaytoggle" name="attr_power_5_display_toggle" type="hidden" value="0">
                  <div class="discipline-power__titlebar">
                    <div class="discipline-power__title">
                      <input name="attr_power_5_name" type="text" placeholder="Power Name">
                    </div>
                    <div class="discipline-power__level">
                      <input name="attr_power_5_level" placeholder="1" type="number">
                    </div>
                    <div class="discipline-power__controls">
                      <div class="discipline-power__control">
                        <input name="attr_power_5_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                      </div>
                      <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_5_name}}} {{level=@{power_5_level}}} {{pools=@{power_5_dicepools}}} {{cost=@{power_5_cost}}} {{duration=@{power_5_duration}}} {{description=@{power_5_description}}} {{system=@{power_5_system}}}"><span>w</span></button>
                      <button class="discipline-power__control" name="act_disciplines-delete-5" type="action"><span>#</span></button>
                    </div>
                  </div>
                  <div class="discipline-power__display">
                    <div class="discipline-power__displayitem">
                      <div class="discipline-power__title">Dice Pools</div>
                      <input class="discipline-power__input" name="attr_power_5_dicepools" type="text" placeholder="Power Dice Pools">
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Cost</div>
                      <textarea class="discipline-power__textarea" name="attr_power_5_cost" type="text" placeholder="Power Cost"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Duration</div>
                      <textarea class="discipline-power__textarea" name="attr_power_5_duration" type="text" placeholder="Power Duration"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Description</div>
                      <textarea class="discipline-power__textarea" name="attr_power_5_description" placeholder="Power Description"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">System</div>
                      <textarea class="discipline-power__textarea" name="attr_power_5_system" placeholder="Power System"></textarea>
                    </div>
                  </div>
                </div>
                <div class="discipline-power discipline-power--6">
                  <input class="discipline-power__displaytoggle" name="attr_power_6_display_toggle" type="hidden" value="0">
                  <div class="discipline-power__titlebar">
                    <div class="discipline-power__title">
                      <input name="attr_power_6_name" type="text" placeholder="Power Name">
                    </div>
                    <div class="discipline-power__level">
                      <input name="attr_power_6_level" placeholder="1" type="number">
                    </div>
                    <div class="discipline-power__controls">
                      <div class="discipline-power__control">
                        <input name="attr_power_6_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                      </div>
                      <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_6_name}}} {{level=@{power_6_level}}} {{pools=@{power_6_dicepools}}} {{cost=@{power_6_cost}}} {{duration=@{power_6_duration}}} {{description=@{power_6_description}}} {{system=@{power_6_system}}}"><span>w</span></button>
                      <button class="discipline-power__control" name="act_disciplines-delete-6" type="action"><span>#</span></button>
                    </div>
                  </div>
                  <div class="discipline-power__display">
                    <div class="discipline-power__displayitem">
                      <div class="discipline-power__title">Dice Pools</div>
                      <input class="discipline-power__input" name="attr_power_6_dicepools" type="text" placeholder="Power Dice Pools">
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Cost</div>
                      <textarea class="discipline-power__textarea" name="attr_power_6_cost" type="text" placeholder="Power Cost"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Duration</div>
                      <textarea class="discipline-power__textarea" name="attr_power_6_duration" type="text" placeholder="Power Duration"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Description</div>
                      <textarea class="discipline-power__textarea" name="attr_power_6_description" placeholder="Power Description"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">System</div>
                      <textarea class="discipline-power__textarea" name="attr_power_6_system" placeholder="Power System"></textarea>
                    </div>
                  </div>
                </div>
                <div class="discipline-power discipline-power--7">
                  <input class="discipline-power__displaytoggle" name="attr_power_7_display_toggle" type="hidden" value="0">
                  <div class="discipline-power__titlebar">
                    <div class="discipline-power__title">
                      <input name="attr_power_7_name" type="text" placeholder="Power Name">
                    </div>
                    <div class="discipline-power__level">
                      <input name="attr_power_7_level" placeholder="1" type="number">
                    </div>
                    <div class="discipline-power__controls">
                      <div class="discipline-power__control">
                        <input name="attr_power_7_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                      </div>
                      <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_7_name}}} {{level=@{power_7_level}}} {{pools=@{power_7_dicepools}}} {{cost=@{power_7_cost}}} {{duration=@{power_7_duration}}} {{description=@{power_7_description}}} {{system=@{power_7_system}}}"><span>w</span></button>
                      <button class="discipline-power__control" name="act_disciplines-delete-7" type="action"><span>#</span></button>
                    </div>
                  </div>
                  <div class="discipline-power__display">
                    <div class="discipline-power__displayitem">
                      <div class="discipline-power__title">Dice Pools</div>
                      <input class="discipline-power__input" name="attr_power_7_dicepools" type="text" placeholder="Power Dice Pools">
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Cost</div>
                      <textarea class="discipline-power__textarea" name="attr_power_7_cost" type="text" placeholder="Power Cost"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Duration</div>
                      <textarea class="discipline-power__textarea" name="attr_power_7_duration" type="text" placeholder="Power Duration"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Description</div>
                      <textarea class="discipline-power__textarea" name="attr_power_7_description" placeholder="Power Description"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">System</div>
                      <textarea class="discipline-power__textarea" name="attr_power_7_system" placeholder="Power System"></textarea>
                    </div>
                  </div>
                </div>
                <div class="discipline-power discipline-power--8">
                  <input class="discipline-power__displaytoggle" name="attr_power_8_display_toggle" type="hidden" value="0">
                  <div class="discipline-power__titlebar">
                    <div class="discipline-power__title">
                      <input name="attr_power_8_name" type="text" placeholder="Power Name">
                    </div>
                    <div class="discipline-power__level">
                      <input name="attr_power_8_level" placeholder="1" type="number">
                    </div>
                    <div class="discipline-power__controls">
                      <div class="discipline-power__control">
                        <input name="attr_power_8_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                      </div>
                      <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_8_name}}} {{level=@{power_8_level}}} {{pools=@{power_8_dicepools}}} {{cost=@{power_8_cost}}} {{duration=@{power_8_duration}}} {{description=@{power_8_description}}} {{system=@{power_8_system}}}"><span>w</span></button>
                      <button class="discipline-power__control" name="act_disciplines-delete-8" type="action"><span>#</span></button>
                    </div>
                  </div>
                  <div class="discipline-power__display">
                    <div class="discipline-power__displayitem">
                      <div class="discipline-power__title">Dice Pools</div>
                      <input class="discipline-power__input" name="attr_power_8_dicepools" type="text" placeholder="Power Dice Pools">
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Cost</div>
                      <textarea class="discipline-power__textarea" name="attr_power_8_cost" type="text" placeholder="Power Cost"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Duration</div>
                      <textarea class="discipline-power__textarea" name="attr_power_8_duration" type="text" placeholder="Power Duration"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Description</div>
                      <textarea class="discipline-power__textarea" name="attr_power_8_description" placeholder="Power Description"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">System</div>
                      <textarea class="discipline-power__textarea" name="attr_power_8_system" placeholder="Power System"></textarea>
                    </div>
                  </div>
                </div>
                <div class="discipline-power discipline-power--9">
                  <input class="discipline-power__displaytoggle" name="attr_power_9_display_toggle" type="hidden" value="0">
                  <div class="discipline-power__titlebar">
                    <div class="discipline-power__title">
                      <input name="attr_power_9_name" type="text" placeholder="Power Name">
                    </div>
                    <div class="discipline-power__level">
                      <input name="attr_power_9_level" placeholder="1" type="number">
                    </div>
                    <div class="discipline-power__controls">
                      <div class="discipline-power__control">
                        <input name="attr_power_9_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                      </div>
                      <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_9_name}}} {{level=@{power_9_level}}} {{pools=@{power_9_dicepools}}} {{cost=@{power_9_cost}}} {{duration=@{power_9_duration}}} {{description=@{power_9_description}}} {{system=@{power_9_system}}}"><span>w</span></button>
                      <button class="discipline-power__control" name="act_disciplines-delete-9" type="action"><span>#</span></button>
                    </div>
                  </div>
                  <div class="discipline-power__display">
                    <div class="discipline-power__displayitem">
                      <div class="discipline-power__title">Dice Pools</div>
                      <input class="discipline-power__input" name="attr_power_9_dicepools" type="text" placeholder="Power Dice Pools">
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Cost</div>
                      <textarea class="discipline-power__textarea" name="attr_power_9_cost" type="text" placeholder="Power Cost"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Duration</div>
                      <textarea class="discipline-power__textarea" name="attr_power_9_duration" type="text" placeholder="Power Duration"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Description</div>
                      <textarea class="discipline-power__textarea" name="attr_power_9_description" placeholder="Power Description"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">System</div>
                      <textarea class="discipline-power__textarea" name="attr_power_9_system" placeholder="Power System"></textarea>
                    </div>
                  </div>
                </div>
                <div class="discipline-power discipline-power--10">
                  <input class="discipline-power__displaytoggle" name="attr_power_10_display_toggle" type="hidden" value="0">
                  <div class="discipline-power__titlebar">
                    <div class="discipline-power__title">
                      <input name="attr_power_10_name" type="text" placeholder="Power Name">
                    </div>
                    <div class="discipline-power__level">
                      <input name="attr_power_10_level" placeholder="1" type="number">
                    </div>
                    <div class="discipline-power__controls">
                      <div class="discipline-power__control">
                        <input name="attr_power_10_display_toggle" type="checkbox"><span class="discipline__expand">`</span><span class="discipline__close">J</span>
                      </div>
                      <button class="discipline-power__control btn ui-draggable" type="roll" value="&amp;{template:vampirepower} {{character=@{character_name}}} {{title=@{power_10_name}}} {{level=@{power_10_level}}} {{pools=@{power_10_dicepools}}} {{cost=@{power_10_cost}}} {{duration=@{power_10_duration}}} {{description=@{power_10_description}}} {{system=@{power_10_system}}}"><span>w</span></button>
                      <button class="discipline-power__control" name="act_disciplines-delete-10" type="action"><span>#</span></button>
                    </div>
                  </div>
                  <div class="discipline-power__display">
                    <div class="discipline-power__displayitem">
                      <div class="discipline-power__title">Dice Pools</div>
                      <input class="discipline-power__input" name="attr_power_10_dicepools" type="text" placeholder="Power Dice Pools">
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Cost</div>
                      <textarea class="discipline-power__textarea" name="attr_power_10_cost" type="text" placeholder="Power Cost"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Duration</div>
                      <textarea class="discipline-power__textarea" name="attr_power_10_duration" type="text" placeholder="Power Duration"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">Description</div>
                      <textarea class="discipline-power__textarea" name="attr_power_10_description" placeholder="Power Description"></textarea>
                    </div>
                    <div class="discipline-power__displayitem--textarea">
                      <div class="discipline-power__title">System</div>
                      <textarea class="discipline-power__textarea" name="attr_power_10_system" placeholder="Power System"></textarea>
                    </div>
                  </div>
                </div>
                <button class="discipline__button--add" name="act_disciplines-add" type="action"><span class="discipline__icon">&amp;</span><span class="discipline__buttontext">Add Power</span></button>
              </div>
            </div>
          </fieldset><!--<div class="repcontainer" data-groupname="repeating_disciplines"></div><div class="repcontrol" data-groupname="repeating_disciplines"><button class="btn repcontrol_edit">Modify</button><button class="btn repcontrol_add">+Add</button></div>-->
        </div>
      </div>
      <div class="col-md-6 section--special">
        <div class="special">
          <h2>Special</h2>
          <textarea class="special__textarea" name="attr_special" placeholder="Werewolves suffer Aggravated damage from silver weapons and fire only..."></textarea>
        </div>
      </div>
    </div>
  </div>
  <div class="coterie"></div>
</div>






</div>



<!-- THIS IS WHERE ROLL TEMPLATES WILL GO -->


<rolltemplate class="sheet-rolltemplate-vampirecomp">
  <div class="sheet-roll">
    <div class="sheet-roll__container">
      <div class="sheet-roll__character">{{character}}</div>
      <div class="sheet-roll__title">{{title}}
      </div>

      {{#rollGreater() computed::rolls 0}}
      <div class="sheet-roll__results">

        {{#rollGreater() computed::rolls 0}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_1 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_1}}</span></div>
          {{/rollLess() roll_1 6}}
          {{#rollBetween() roll_1 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_1}}</span></div>
          {{/rollBetween() roll_1 6 9}}
          {{#rollTotal() roll_1 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_1}}</span></div>
          {{/rollTotal() roll_1 10}}
        </div>{{/rollGreater() computed::rolls 0}}

        {{#rollGreater() computed::rolls 1}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_2 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_2}}</span></div>
          {{/rollLess() roll_2 6}}
          {{#rollBetween() roll_2 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_2}}</span></div>
          {{/rollBetween() roll_2 6 9}}
          {{#rollTotal() roll_2 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_2}}</span></div>
          {{/rollTotal() roll_2 10}}
        </div>{{/rollGreater() computed::rolls 1}}

        {{#rollGreater() computed::rolls 2}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_3 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_3}}</span></div>
          {{/rollLess() roll_3 6}}
          {{#rollBetween() roll_3 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_3}}</span></div>
          {{/rollBetween() roll_3 6 9}}
          {{#rollTotal() roll_3 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_3}}</span></div>
          {{/rollTotal() roll_3 10}}
        </div>{{/rollGreater() computed::rolls 2}}

        {{#rollGreater() computed::rolls 3}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_4 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_4}}</span></div>
          {{/rollLess() roll_4 6}}
          {{#rollBetween() roll_4 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_4}}</span></div>
          {{/rollBetween() roll_4 6 9}}
          {{#rollTotal() roll_4 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_4}}</span></div>
          {{/rollTotal() roll_4 10}}
        </div>{{/rollGreater() computed::rolls 3}}

        {{#rollGreater() computed::rolls 4}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_5 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_5}}</span></div>
          {{/rollLess() roll_5 6}}
          {{#rollBetween() roll_5 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_5}}</span></div>
          {{/rollBetween() roll_5 6 9}}
          {{#rollTotal() roll_5 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_5}}</span></div>
          {{/rollTotal() roll_5 10}}
        </div>{{/rollGreater() computed::rolls 4}}

        {{#rollGreater() computed::rolls 5}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_6 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_6}}</span></div>
          {{/rollLess() roll_6 6}}
          {{#rollBetween() roll_6 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_6}}</span></div>
          {{/rollBetween() roll_6 6 9}}
          {{#rollTotal() roll_6 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_6}}</span></div>
          {{/rollTotal() roll_6 10}}
        </div>{{/rollGreater() computed::rolls 5}}

        {{#rollGreater() computed::rolls 6}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_7 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_7}}</span></div>
          {{/rollLess() roll_7 6}}
          {{#rollBetween() roll_7 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_7}}</span></div>
          {{/rollBetween() roll_7 6 9}}
          {{#rollTotal() roll_7 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_7}}</span></div>
          {{/rollTotal() roll_7 10}}
        </div>{{/rollGreater() computed::rolls 6}}

        {{#rollGreater() computed::rolls 7}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_8 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_8}}</span></div>
          {{/rollLess() roll_8 6}}
          {{#rollBetween() roll_8 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_8}}</span></div>
          {{/rollBetween() roll_8 6 9}}
          {{#rollTotal() roll_8 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_8}}</span></div>
          {{/rollTotal() roll_8 10}}
        </div>{{/rollGreater() computed::rolls 7}}

        {{#rollGreater() computed::rolls 8}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_9 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_9}}</span></div>
          {{/rollLess() roll_9 6}}
          {{#rollBetween() roll_9 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_9}}</span></div>
          {{/rollBetween() roll_9 6 9}}
          {{#rollTotal() roll_9 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_9}}</span></div>
          {{/rollTotal() roll_9 10}}
        </div>{{/rollGreater() computed::rolls 8}}

        {{#rollGreater() computed::rolls 9}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_10 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_10}}</span></div>
          {{/rollLess() roll_10 6}}
          {{#rollBetween() roll_10 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_10}}</span></div>
          {{/rollBetween() roll_10 6 9}}
          {{#rollTotal() roll_10 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_10}}</span></div>
          {{/rollTotal() roll_10 10}}
        </div>{{/rollGreater() computed::rolls 9}}

        {{#rollGreater() computed::rolls 10}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_11 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_11}}</span></div>
          {{/rollLess() roll_11 6}}
          {{#rollBetween() roll_11 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_11}}</span></div>
          {{/rollBetween() roll_11 6 9}}
          {{#rollTotal() roll_11 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_11}}</span></div>
          {{/rollTotal() roll_11 10}}
        </div>{{/rollGreater() computed::rolls 10}}

        {{#rollGreater() computed::rolls 11}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_12 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_12}}</span></div>
          {{/rollLess() roll_12 6}}
          {{#rollBetween() roll_12 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_12}}</span></div>
          {{/rollBetween() roll_12 6 9}}
          {{#rollTotal() roll_12 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_12}}</span></div>
          {{/rollTotal() roll_12 10}}
        </div>{{/rollGreater() computed::rolls 11}}

        {{#rollGreater() computed::rolls 12}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_13 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_13}}</span></div>
          {{/rollLess() roll_13 6}}
          {{#rollBetween() roll_13 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_13}}</span></div>
          {{/rollBetween() roll_13 6 9}}
          {{#rollTotal() roll_13 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_13}}</span></div>
          {{/rollTotal() roll_13 10}}
        </div>{{/rollGreater() computed::rolls 12}}

        {{#rollGreater() computed::rolls 13}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_14 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_14}}</span></div>
          {{/rollLess() roll_14 6}}
          {{#rollBetween() roll_14 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_14}}</span></div>
          {{/rollBetween() roll_14 6 9}}
          {{#rollTotal() roll_14 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_14}}</span></div>
          {{/rollTotal() roll_14 10}}
        </div>{{/rollGreater() computed::rolls 13}}

        {{#rollGreater() computed::rolls 14}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_15 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_15}}</span></div>
          {{/rollLess() roll_15 6}}
          {{#rollBetween() roll_15 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_15}}</span></div>
          {{/rollBetween() roll_15 6 9}}
          {{#rollTotal() roll_15 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_15}}</span></div>
          {{/rollTotal() roll_15 10}}
        </div>{{/rollGreater() computed::rolls 14}}

        {{#rollGreater() computed::rolls 15}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_16 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_16}}</span></div>
          {{/rollLess() roll_16 6}}
          {{#rollBetween() roll_16 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_16}}</span></div>
          {{/rollBetween() roll_16 6 9}}
          {{#rollTotal() roll_16 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_16}}</span></div>
          {{/rollTotal() roll_16 10}}
        </div>{{/rollGreater() computed::rolls 15}}

        {{#rollGreater() computed::rolls 16}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_17 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_17}}</span></div>
          {{/rollLess() roll_17 6}}
          {{#rollBetween() roll_17 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_17}}</span></div>
          {{/rollBetween() roll_17 6 9}}
          {{#rollTotal() roll_17 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_17}}</span></div>
          {{/rollTotal() roll_17 10}}
        </div>{{/rollGreater() computed::rolls 16}}

        {{#rollGreater() computed::rolls 17}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_18 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_18}}</span></div>
          {{/rollLess() roll_18 6}}
          {{#rollBetween() roll_18 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_18}}</span></div>
          {{/rollBetween() roll_18 6 9}}
          {{#rollTotal() roll_18 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_18}}</span></div>
          {{/rollTotal() roll_18 10}}
        </div>{{/rollGreater() computed::rolls 17}}

        {{#rollGreater() computed::rolls 18}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_19 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_19}}</span></div>
          {{/rollLess() roll_19 6}}
          {{#rollBetween() roll_19 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_19}}</span></div>
          {{/rollBetween() roll_19 6 9}}
          {{#rollTotal() roll_19 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_19}}</span></div>
          {{/rollTotal() roll_19 10}}
        </div>{{/rollGreater() computed::rolls 18}}

        {{#rollGreater() computed::rolls 19}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_20 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_20}}</span></div>
          {{/rollLess() roll_20 6}}
          {{#rollBetween() roll_20 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_20}}</span></div>
          {{/rollBetween() roll_20 6 9}}
          {{#rollTotal() roll_20 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_20}}</span></div>
          {{/rollTotal() roll_20 10}}
        </div>{{/rollGreater() computed::rolls 19}}

        {{#rollGreater() computed::rolls 20}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_21 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_21}}</span></div>
          {{/rollLess() roll_21 6}}
          {{#rollBetween() roll_21 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_21}}</span></div>
          {{/rollBetween() roll_21 6 9}}
          {{#rollTotal() roll_21 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_21}}</span></div>
          {{/rollTotal() roll_21 10}}
        </div>{{/rollGreater() computed::rolls 20}}

        {{#rollGreater() computed::rolls 21}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_22 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_22}}</span></div>
          {{/rollLess() roll_22 6}}
          {{#rollBetween() roll_22 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_22}}</span></div>
          {{/rollBetween() roll_22 6 9}}
          {{#rollTotal() roll_22 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_22}}</span></div>
          {{/rollTotal() roll_22 10}}
        </div>{{/rollGreater() computed::rolls 21}}

        {{#rollGreater() computed::rolls 22}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_23 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_23}}</span></div>
          {{/rollLess() roll_23 6}}
          {{#rollBetween() roll_23 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_23}}</span></div>
          {{/rollBetween() roll_23 6 9}}
          {{#rollTotal() roll_23 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_23}}</span></div>
          {{/rollTotal() roll_23 10}}
        </div>{{/rollGreater() computed::rolls 22}}

        {{#rollGreater() computed::rolls 23}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_24 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_24}}</span></div>
          {{/rollLess() roll_24 6}}
          {{#rollBetween() roll_24 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_24}}</span></div>
          {{/rollBetween() roll_24 6 9}}
          {{#rollTotal() roll_24 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_24}}</span></div>
          {{/rollTotal() roll_24 10}}
        </div>{{/rollGreater() computed::rolls 23}}

        {{#rollGreater() computed::rolls 24}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_25 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_25}}</span></div>
          {{/rollLess() roll_25 6}}
          {{#rollBetween() roll_25 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_25}}</span></div>
          {{/rollBetween() roll_25 6 9}}
          {{#rollTotal() roll_25 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_25}}</span></div>
          {{/rollTotal() roll_25 10}}
        </div>{{/rollGreater() computed::rolls 24}}

        {{#rollGreater() computed::rolls 25}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_26 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_26}}</span></div>
          {{/rollLess() roll_26 6}}
          {{#rollBetween() roll_26 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_26}}</span></div>
          {{/rollBetween() roll_26 6 9}}
          {{#rollTotal() roll_26 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_26}}</span></div>
          {{/rollTotal() roll_26 10}}
        </div>{{/rollGreater() computed::rolls 25}}

        {{#rollGreater() computed::rolls 26}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_27 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_27}}</span></div>
          {{/rollLess() roll_27 6}}
          {{#rollBetween() roll_27 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_27}}</span></div>
          {{/rollBetween() roll_27 6 9}}
          {{#rollTotal() roll_27 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_27}}</span></div>
          {{/rollTotal() roll_27 10}}
        </div>{{/rollGreater() computed::rolls 26}}

        {{#rollGreater() computed::rolls 27}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_28 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_28}}</span></div>
          {{/rollLess() roll_28 6}}
          {{#rollBetween() roll_28 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_28}}</span></div>
          {{/rollBetween() roll_28 6 9}}
          {{#rollTotal() roll_28 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_28}}</span></div>
          {{/rollTotal() roll_28 10}}
        </div>{{/rollGreater() computed::rolls 27}}

        {{#rollGreater() computed::rolls 28}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_29 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_29}}</span></div>
          {{/rollLess() roll_29 6}}
          {{#rollBetween() roll_29 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_29}}</span></div>
          {{/rollBetween() roll_29 6 9}}
          {{#rollTotal() roll_29 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_29}}</span></div>
          {{/rollTotal() roll_29 10}}
        </div>{{/rollGreater() computed::rolls 28}}

        {{#rollGreater() computed::rolls 29}}
<div class="sheet-roll__spacer">
          {{#rollLess() roll_30 6}} <!--Failure-->
          <div class="sheet-roll__result sheet-roll__result--failure"></div><div class="sheet-roll__dice sheet-roll__dice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{roll_30}}</span></div>
          {{/rollLess() roll_30 6}}
          {{#rollBetween() roll_30 6 9}} <!--Success-->
          <div class="sheet-roll__result sheet-roll__result--success"></div><div class="sheet-roll__dice sheet-roll__dice--success"><span class="inlinerollresult showtip tipsy-n-right">{{roll_30}}</span></div>
          {{/rollBetween() roll_30 6 9}}
          {{#rollTotal() roll_30 10}} <!--Critical Success-->
          <div class="sheet-roll__result sheet-roll__result--crit"></div><div class="sheet-roll__dice sheet-roll__dice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{roll_30}}</span></div>
          {{/rollTotal() roll_30 10}}
        </div>{{/rollGreater() computed::rolls 29}}



      </div>
      {{/rollGreater() computed::rolls 0}}


      {{#computed::hunger}}
      <div class="sheet-roll__results"><!--Rage dice area-->

        {{#rollGreater() computed::hunger 0}}
        <div class="sheet-roll__spacer">
          {{#rollLess() blood_roll_1 3}} <!--Crit Fail-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--critfailure"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--critfail"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_1}}</span></div>
          {{/rollLess() blood_roll_1 3}}
          {{#rollBetween() blood_roll_1 2 5}} <!--Failure-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--failure"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_1}}</span></div>
          {{/rollBetween() blood_roll_1 2 5}}
          {{#rollBetween() blood_roll_1 6 9}} <!--Success-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--success"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--success"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_1}}</span></div>
          {{/rollBetween() blood_roll_1 6 9}}
          {{#rollTotal() blood_roll_1 10}} <!--Critical Success-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--crit"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_1}}</span></div>
          {{/rollTotal() blood_roll_1 10}}
        </div>{{/rollGreater() computed::hunger 0}}

        {{#rollGreater() computed::hunger 1}}
        <div class="sheet-roll__spacer">
          {{#rollLess() blood_roll_2 3}} <!--Crit Fail-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--critfailure"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--critfail"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_2}}</span></div>
          {{/rollLess() blood_roll_2 3}}
          {{#rollBetween() blood_roll_2 2 5}} <!--Failure-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--failure"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_2}}</span></div>
          {{/rollBetween() blood_roll_2 2 5}}
          {{#rollBetween() blood_roll_2 6 9}} <!--Success-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--success"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--success"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_2}}</span></div>
          {{/rollBetween() blood_roll_2 6 9}}
          {{#rollTotal() blood_roll_2 10}} <!--Critical Success-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--crit"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_2}}</span></div>
          {{/rollTotal() blood_roll_2 10}}
        </div>{{/rollGreater() computed::hunger 1}}

        {{#rollGreater() computed::hunger 2}}
        <div class="sheet-roll__spacer">
          {{#rollLess() blood_roll_3 3}} <!--Crit Fail-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--critfailure"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--critfail"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_3}}</span></div>
          {{/rollLess() blood_roll_3 3}}
          {{#rollBetween() blood_roll_3 2 5}} <!--Failure-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--failure"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_3}}</span></div>
          {{/rollBetween() blood_roll_3 2 5}}
          {{#rollBetween() blood_roll_3 6 9}} <!--Success-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--success"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--success"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_3}}</span></div>
          {{/rollBetween() blood_roll_3 6 9}}
          {{#rollTotal() blood_roll_3 10}} <!--Critical Success-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--crit"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_3}}</span></div>
          {{/rollTotal() blood_roll_3 10}}
        </div>{{/rollGreater() computed::hunger 2}}

        {{#rollGreater() computed::hunger 3}}
        <div class="sheet-roll__spacer">
          {{#rollLess() blood_roll_4 3}} <!--Crit Fail-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--critfailure"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--critfail"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_4}}</span></div>
          {{/rollLess() blood_roll_4 3}}
          {{#rollBetween() blood_roll_4 2 5}} <!--Failure-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--failure"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_4}}</span></div>
          {{/rollBetween() blood_roll_4 2 5}}
          {{#rollBetween() blood_roll_4 6 9}} <!--Success-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--success"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--success"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_4}}</span></div>
          {{/rollBetween() blood_roll_4 6 9}}
          {{#rollTotal() blood_roll_4 10}} <!--Critical Success-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--crit"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_4}}</span></div>
          {{/rollTotal() blood_roll_4 10}}
        </div>{{/rollGreater() computed::hunger 3}}

        {{#rollGreater() computed::hunger 4}}
        <div class="sheet-roll__spacer">
          {{#rollLess() blood_roll_5 3}} <!--Crit Fail-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--critfailure"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--critfail"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_5}}</span></div>
          {{/rollLess() blood_roll_5 3}}
          {{#rollBetween() blood_roll_5 2 5}} <!--Failure-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--failure"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--failure"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_5}}</span></div>
          {{/rollBetween() blood_roll_5 2 5}}
          {{#rollBetween() blood_roll_5 6 9}} <!--Success-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--success"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--success"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_5}}</span></div>
          {{/rollBetween() blood_roll_5 6 9}}
          {{#rollTotal() blood_roll_5 10}} <!--Critical Success-->
          <div class="sheet-roll__bloodresult sheet-roll__bloodresult--crit"></div><div class="sheet-roll__blooddice sheet-roll__blooddice--crit"><span class="inlinerollresult showtip tipsy-n-right">{{blood_roll_5}}</span></div>
          {{/rollTotal() blood_roll_5 10}}
        </div>{{/rollGreater() computed::hunger 4}}






      </div>
      {{/computed::hunger}}

      <div class="sheet-roll__dicerolled"> <!--Total dice rolled area-->
        <div class="sheet-roll__count">
          <div class="sheet-roll__label">Dice Rolled:</div>
          <div class="sheet-roll__value"><span class="inlinerollresult showtip tipsy-n-right">{{computed::rolls}}</span></div>
          <div class="sheet-roll__value--hunger"><span class="inlinerollresult showtip tipsy-n-right">{{hunger}}</span></div>
        </div>
      </div>
      <div class="sheet-roll__dicerolled"> <!--Successes area-->
        <div class="sheet-roll__count">
          <div class="sheet-roll__label">Successes:</div>
          <div class="sheet-roll__value"><span class="inlinerollresult showtip tipsy-n-right">{{computed::successes}}</span></div>
          <div class="sheet-roll__value--spacing">of</div>
          <div class="sheet-roll__value"><span class="inlinerollresult showtip tipsy-n-right">{{difficulty}}</span></div>
        </div>
      </div>
      {{#rollTotal() computed::bestial_fail 1}}
      <div class="sheet-roll__dicerolled">
        <div class="sheet-roll__count">
          <div class="sheet-roll__label--hunger">BRUTAL RESULT</div>
        </div>
      </div>
      {{/rollTotal() computed::bestial_fail 1}}


      {{#rollTotal() computed::messy_critical 1}}
      <div class="sheet-roll__dicerolled">
        <div class="sheet-roll__count">
          <div class="sheet-roll__label--hunger">MESSY CRITICAL</div>
        </div>
      </div>
      {{/rollTotal() computed::messy_critical 1}}

    </div>
  </div>
</rolltemplate>





<script type="text/worker">


/*  on('clicked:repeating_weapons:weapondmg', function(eventInfo){ //this area is going to be for developing the main roll template
  	getAttrs(['repeating_weapons_DMG'], function(values){
  		const dmg = values.repeating_weapons_DMG;
  		startRoll(`@{whisper} &{template:damage} {{damageDealt=[[${dmg}]]}} {{critInjury=[[2d6]]}} {{crits=[[0]]}}`,
  		(results) => {
  			let computed = 0;
  			const theDice = results.results.damageDealt.rolls;
  			console.log(theDice);

  			for(let groupOfDice of theDice) {
  				if (groupOfDice.sides == 6) {

  					for (let element of groupOfDice.results) {
  			  	if (element === 6) {
  						computed = computed+1;
  			  	}
  			  	}
  				}
  			}
  			finishRoll(results.rollId,{
  				crits : computed
  			});
  		});
  	});
  });
*/


/*  //this section copied from CP copied from roll20 forum, I don't think I need it here though
  	//A function to combine getting repeating and non repeating attributes.
  const getAllAttrs = function(props,sectionDetails,callback){
    getSections(sectionDetails,(repeats,sections)=>{
      getAttrs([...props,...repeats],(attributes)=>{
        callback(attributes,sections);
      })
    });
  };
  //Iterates over the provided repeating sections and assembles an array of attributes to get from those sections for each row.
  const getSections = function(section_details,callback){
    let queueClone = _.clone(section_details);
    const worker = (queue,repeatAttrs=[],sections={})=>{
      let detail = queue.shift();
      getSectionIDs(detail.section,(IDs)=>{
        sections[detail.section] = IDs;
        IDs.forEach((id)=>{
          detail.fields.forEach((f)=>{
            repeatAttrs.push(`${detail.section}_${id}_${f}`);
          });
        });
        repeatAttrs.push(`_reporder_${detail.section}`);
        if(queue.length){
          worker(queue,repeatAttrs,sections);
        }else{
          callback(repeatAttrs,sections);
        }
      });
    };
    if(!queueClone[0]){
      callback([],{});
    }
    worker(queueClone);
  };

  const repeatingSections = [{section:['repeating_disciplines','repeating_advantages','repeating_flaws','repeating_npcskills','repeating_npcexceptional'],fields:['discipline']}];//Replace these with your sheet's repeating sections
  //const actionRefs = [''];//Replace these with the non repeating attributes for your sheet.
  const actionCallUpdate = function(){
    getAllAttrs(['character_name'],repeatingSections,(attributes,sections)=>{
      let actions = Object.keys(attributes).filter((key)=>key!=='character_name');
      const setObj = actions.reduce((accumulator,actionName)=>{
        accumulator[actionName] = `%{${attributes.character_name}|${actionName}}`;//Update the action call
        return accumulator;//The memo (accumulator in this case) must always be returned when using a reduce function
      },{});
      setAttrs(setObj,{silent:true});//Apply the changes
    });
  };

  on('sheet:opened change:character_name change:repeating_weapons',actionCallUpdate);
  //End of https://app.roll20.net/forum/post/10534166/action-buttons-in-the-macro-bar

*/
/*
const rollbtnlist = [
"strength", "dexterity", "stamina",
"athletics", "brawl", "craft", "drive", "firearms", "larceny", "melee", "stealth", "survival",
"charisma", "manipulation", "composure",
"animal_ken", "etiquette", "insight", "intimidation", "leadership", "performance", "persuasion", "streetwise", "subterfuge",
"intelligence", "wits", "resolve",
"academics", "awareness", "finance", "investigation", "medicine", "occult", "politics", "science", "technology",
"willpower", "resist", "reroll", "arbitrary", "repeating_disciplines:disciplineroll"

];
rollbtnlist.forEach(button => {
  on(`clicked:${button}`, function() {
    //roll stuffs
    console.log(`${button}`);
  });
});


//Need to add seperate rouse btn and remorse btn






  //Autocalc maximum health and willpower
  on("change:stamina change:composure change:resolve change:willpower_mod change:health_mod sheet:opened", function() {
    getAttrs([
      "stamina",
      "composure",
      "resolve",
      "willpower_mod",
      "health_mod"
      ], function(values) {

        const STAM = parseInt(values.stamina)||0;
        const COMP = parseInt(values.composure)||0;
        const RESOLVE = parseInt(values.resolve)||0;
        const WILLMOD = parseInt(values.willpower_mod)||0;
        const HEALTHMOD = parseInt(values.health_mod)||0;

        var maxhealth = 3+STAM+HEALTHMOD;
        var maxwill = COMP+RESOLVE+WILLMOD;

        setAttrs({
          "health_max" : maxhealth,
          "willpower_max" : maxwill
        });
      });
  });

  //Allow adding powers (up to 10) in repeating disciplines tables
  on("clicked:repeating_disciplines:disciplines-add", function() {
    getAttrs([
      "repeating_disciplines_power_count"
    ], function(values){
      const POWERCOUNT = parseInt(values.repeating_disciplines_power_count)||0;

      var newpowercount = POWERCOUNT+1;

      setAttrs({
        "repeating_disciplines_power_count" : newpowercount
      });
    });
  });

  //Make delete button delete powers
  //on("clicked:repeating_disciplines:disciplines", //fck this, Not dealing with this right now


  //create @{CHARACTERNAMEHERE| for use in roll templates
  on("change:character_name", function() {
    getAttrs([
      "character_name"
    ], function (values) {
        const CHARACTERNAME = values.character_name;

        var CHARNAMEAPPEND = `@{${CHARACTERNAME}|`;

        setAttrs({
          "char_name_string" : CHARNAMEAPPEND
        });
    });
  });


  on('change:whisper_toggle', function () {
  	getAttrs(["whisper_toggle", "whisper"], function (values) {
  		var checked = parseInt(values.whisper_toggle)||0;
  		if (checked === 1) {
  			setAttrs({
  				"whisper": "/w gm"
  			});
  		}
  		else {
  			setAttrs({
  				"whisper": ""
  			});
  		}
  	});
  });
*/


  /**
 * Universal Drag and Drop Handler for the Roll20 VTT.
 */

class DragAndDrop {

  /**
   * default settings
   */

  options = {
    triggers: [ "drop_name" ],
    categoryAttribute: "drop_category",
    dataAttribute: "drop_data",
    dropFields: [ "drop_name", "drop_category", "drop_data" ],
    provideContext: [],
  }

  dropObjects = {};

  /**
   * returns the provided trigger variables as change triggers
   */

  get triggers() {
    return this.options.triggers.map(trigger => `change:${trigger}`).join(" ");
  }

  /**
   * creates a new drag and drop handler
   * @param {object} options the configuration object for the new handler
   * @param {object} options.categories a key value pair of category objects defining
   * how drag and drop data should be handled
   */

  constructor(options) {
    if (options) this.options = {...this.options, ...options};
    if (this.options.triggers) this.registerEventHandlers();
    this.dropPages = new DropPages(this);
  }

  /**
   * registers all event handlers
   */

  registerEventHandlers() {
    this.registerDropHandlers();
    this.registerActionHandlers();
  }

  /**
   * registers handlers for dropping content into the drag and drop handler
   */

  registerDropHandlers() {
    on(this.triggers, (eventInfo) => {
      if (!eventInfo.newValue || eventInfo.newValue === "") return;
      getAttrs(this.options.dropFields, (values) => this.handleDrop(values));
    });
  }

  /**
   * registers handlers for action buttons to interact with modals, etc.
   */

  registerActionHandlers() {
    const actions = this.findActions(this.options.categories);
    actions.forEach(action => on(action.trigger, action.function));
  }

  /**
   * recursively finds all the actions in the drag and drop configuration
   * @param {object} categories the categories config object
   * @returns {array} the actions contained in the categories config
   */

  findActions(categories) {
    let actions = [];
    for (const name in categories) {
      const category = categories[name];
      if (category.options && category.options.query) {
        actions = [...actions, ...this.getActionsFromCategory(category.options.query)]
      }
      if (category.subCategories) {
        actions = [...actions, ...this.findActions(category.subCategories)];
      }
    }
    return actions;
  }

  /**
   * extracts the actions from a given query configuration object
   * TODO: Refactor this
   * @param {object} query the category query configuration
   * @returns {array} all of the actions from a category
   */

  getActionsFromCategory(query) {
    const actions = [];
    if (query.buttons) {
      for (const button in query.buttons) {
        const context = query.buttons[button];
        actions.push({
          trigger: `clicked:${button}`,
          function: () => this.continueDrop(query.modal, context),
        });
      }
    }
    if (query.continue) {
      query.continue.forEach(trigger => {
        actions.push({
          trigger: `clicked:${trigger}`,
          function: () => this.continueDrop(query.modal)
        });
      })
    }
    if (query.abandon) {
      query.abandon.forEach(trigger => {
        actions.push({
          trigger: `clicked:${trigger}`,
          function: () => this.abandonDrop(query.modal)
        })
      });
    }
    return actions
  }

  /**
   * continues the drop action after a modal confirm button has been clicked
   * @param {string} modal the attribute that controls the modal setting
   * @param {object} context an object containing attributes to be added to the provided object
   */

  continueDrop(modal, context = {}) {
    setAttrs({ [modal]: 0 }, () => {
      getAttrs(this.options.dropFields, (values) => this.handleDrop(values, context, true));
    });
  }

  /**
   * cancels the drop after a modal reject button has been clicked
   * @param {string} modal the attribute that controls the modal setting
   */

  abandonDrop(modal) {
    setAttrs({ [modal]: 0 }, () => {
      this.clearDropFields();
    });
  }

  /**
   * controls the drop process: finds the object, loads a modal if required, otherwise passes
   * object and options to the factory
   * @param {object} values the values of the drop object
   * @param {object} context additional data values passed from action buttons
   * @param {boolean} bypass bypasses the requirement for a modal
   */

  handleDrop(values, context = {}, bypass = false) {
    context = { ...context, dropPages: this.dropPages };
    const category = values[this.options.categoryAttribute];
    const { klass, options } = this.getClassByCategoryOrSubcategory(category, values);
    let request = [ ...this.options.provideContext ];
    if (options.query && options.query.openOn) request = [ ...request, ...options.query.openOn.map(attr => attr.name)];
    getAttrs(request, attrs => {
      if (this.shouldBypass(options, attrs)) bypass = true;
      if (options.query && !bypass) setAttrs({ [options.query.modal]: "on" })
      else this.factory(klass, { ...options, ...context, ...attrs }, values);
    });
  }

  shouldBypass(options, attrs) {
    if (!options.query || !options.query.openOn) return false;
    if (!attrs) return true;
    const checkAttributes = options.query.openOn;
    let bypass = true;
    checkAttributes.forEach(attribute => {
      const name = attribute.name;
      const attr = attrs[name];
      const isAttribute = (typeof attr !== "undefined");
      const isDefault = (attr == attribute.value);
      const isEmpty = (attr == "")
      if (isAttribute && !isDefault && !isEmpty) bypass = false;
    })
    return bypass;
  }

  /**
   * tries to create the drop object, catching errors, and finally clearing drop data.
   * @param {class} klass the class to be created.
   * @param {object} options configuration options for the settings
   * @param {object} page the dropped values (i.e. drop_name, drop_category, etc.)
   * @returns the instantiated class
   */

  factory(klass, options, page) {
    try {
      const id = generateRowID();
      this.dropObjects[id] = new klass(page, options);
      return this.dropObjects[id];
    } catch (e) {
      console.error(e);
    } finally {
      this.clearDropFields();
    }
  }

  /**
   * returns the category, or subcategory (if it exists)
   * @param {string} category the category of the dropped page
   * @param {object} values the values from the dropped page
   * @returns {object} the category or subcategory of the dropped page
   */

  getClassByCategoryOrSubcategory(category, values) {
    const selectedCategory = this.options.categories[category];
    if (!selectedCategory) throw new Error(this.generateCategoryError(category, this.options.categories));
    const subcategoryField = selectedCategory.subcategoryField;
    const dropData = values[this.options.dataAttribute];
    if (subcategoryField) return this.getSubcategoryClass(category, subcategoryField, dropData);
    else return this.getCategoryClass(selectedCategory);
  }

  /**
   * finds the class and configuration options for a given category
   * @param {object} category the category configuration of the dropped item
   * @returns an object containing the class and category options of the given category
   */

  getCategoryClass(category) {
    const klass = this.getObjectByType(category.type);
    const options = category.options;
    return { klass, options };
  }

  /**
   * finds the class and configuration options for a given subcategory
   * @param {string} category the category of the dropped page
   * @param {string} subcategoryKey the variable name for the dropped page's subcategory
   * @param {object} data the dropped page's data
   * @returns an object containing the class and category options of the given category
   */

  getSubcategoryClass(category, subcategoryKey, data) {
    const selectedCategory = this.options.categories[category];
    const subcategoryName = this.getSubcategoryName(subcategoryKey, data);
    const subCategory = selectedCategory.subCategories[subcategoryName];
    if (!subCategory) throw new Error(this.generateCategoryError(subcategoryName, selectedCategory.subCategories))
    const klass = this.getObjectByType(subCategory.type);
    const options = subCategory.options;
    return { klass, options }
  }

  /**
   * extracts the value of the specificed subcategory field from the dropped page's data.
   * throws an error if that field can't be located
   * @param {string} subcategoryKey the variable name of the dropped page's subcategory
   * @param {object} data the dropped page's data
   * @returns the page's subcategory
   */

  getSubcategoryName(subcategoryKey, data) {
    if (typeof data === "string") data = JSON.parse(data);
    if (data[subcategoryKey]) return data[subcategoryKey];
    else throw new Error(`Expected to find a field called ${subcategoryKey} in the drop data, but it was missing.`);
  }

  /**
   * collates category names and provided category name into an error message
   * @param {string} category the name of the provided category
   * @param {object} categories contains all possible categories
   * @returns {string} error message to be thrown
   */

  generateCategoryError(category, categories) {
    const categoryNames = Object.keys(categories).join(", ")
    return `Expected category to be one of ${categoryNames}. Instead found ${category}`;
  }

  /**
   * returns the class required for the page drop. if a custom class is provided, it implements that instead
   * @param {string|object} type the type of drop (static or repeating) or the custom class provided
   * @returns the respective class for the drop
   */

  getObjectByType(type) {
    if (typeof type === "Object") return type;
    else if (type === "static") return Drop;
    else if (type === "repeating") return DropRow;
    else throw new Error(`There is no object type that matches ${type}`)
  }

  /**
   * clears the drop fields listed in the drop config to prepare for future drops
   */

  clearDropFields() {
    const blankAttrs = {};
    this.options.dropFields.forEach(field => blankAttrs[field] = "");
    setAttrs(blankAttrs);
  }
}

/**
 * Class for static drops (i.e. not to a repeating section)
 */

class Drop {

  /**
   * default configuration
   */

  attributes = {};
  blobs = [];
  unwantedKeys = [ "expansion", "data-list", "category", "data-description", "imports" ];
  clearSections = [];
  clearAttributes = [];
  pagesRequest = [];
  attributeMapping = {};
  blobHandlers = {};
  prefix = false;

  /**
   * runs through the lifecycle of the class, utilizing lifecycle functions if provided
   * @param {object} page the content of the dropped page (i.e. drop_name, drop_category, etc.)
   * @param {object} options the category's config object
   */

  constructor(page, options) {
    this._loadFunctions(options);
    if (typeof this.beforeLoad === "function") this.beforeLoad();
    this._load(page, options);
    if (typeof this.bypass === "function") return this.bypass();
    if (typeof this.afterLoad === "function") this.afterLoad();
    this.processBlobs();
    if (this.pagesRequest) this.getPages();
    if (typeof this.beforeWrite === "function") this.beforeWrite();
    this._write(page, options)
    if (typeof this.afterWrite === "function") this.afterWrite();
  }

  /**
   * extracts lifecycle functions from the configuration object
   * @param {object} options configuration object for the dropped category
   */

  _loadFunctions(options) {
    if (options.bypass) this.bypass = options.bypass;
    if (options.beforeLoad) this.beforeLoad = options.beforeLoad;
    if (options.afterLoad) this.afterLoad = options.afterLoad;
    if (options.beforeWrite) this.beforeWrite = options.beforeWrite;
    if (options.afterWrite) this.afterWrite = options.afterWrite;
    if (options.dropPages) this.dropPages = options.dropPages;
  }

  /**
   * extracts variables from page and options to prime the class
   * TODO: This function could do with some refactoring
   * @param {object} page the content of the dropped page
   * @param {object} options configuration object for the dropped category
   */

  _load(page, options) {
    this.name = page.drop_name;
    this.category = page.drop_category;
    this.clearSections = options.clearSections || [];
    this.clearAttributes = options.clearAttributes || [];
    this.clearPage();
    this.data = this.parseData(page.drop_data);
    this.blobs = [...this.blobs, ...this.extractBlobs()];
    this.prefix = options.prefix || false;
    this.options = options;
    this.createDropAttributes();
    if (options && options.attributes) this.attributes = { ...this.attributes, ...options.attributes };
    if (options && options.addNameToAttributes) this.attributes.name = this.name;
    if (options && options.attributeMapping) this.attributeMapping = {...this.attributeMapping, ...options.attributeMapping};
    if (options && options.breakRepeat) this.breakRepeat = true;
    if (options && options.blobHandlers) this.blobHandlers = { ...this.blobHandlers, ...options.blobHandlers };
    this.pagesRequest = [ ...this.pagesRequest, ...this.parsePageList(this.data.Imports) ];
    this.remapAttributes();
    if (typeof this._loadExtension === "function") this._loadExtension(page, options);
  }

  /**
   * recursively converts page data into json objects
   * @param {string|object} data page data to converted into json
   * @returns {object} page data converted into json
   */

  parseData(data) {
    if (!data) return {};
    const parsed = this.convertToJSON(data);
    let finalData = (parsed) ? parsed : data;
    Object.keys(finalData).forEach(key => {
      const recursiveParse = this.convertToJSON(finalData[key]);
      if (recursiveParse) finalData[key] = this.parseData(finalData[key]);
    });
    return finalData;
  }

  /**
   * converts content to json or returns false
   * @param {?} string an object to be converted as a json object
   * @returns {object|boolean} parsed object or false
   */

  convertToJSON(string) {
    try {
      return JSON.parse(string);
    } catch (e) {
      return false;
    }
  }

  /**
   * extracts blobs from page data
   * @returns the blobs from page data
   */

  extractBlobs() {
    if (!this.data.blobs) return [];
    if (!Array.isArray(this.data.blobs)) this.data.blobs = this.convertBlobsToArray(this.data.blobs)
    const { blobs } = this.data;
    return blobs;
  }

  convertBlobsToArray(blobs) {
    const blobArray = [];
    for (const blobName in blobs) {
      const blob = blobs[blobName];
      blob.name = blobName;
      blobArray.push(blob);
    }
    return blobArray;
  }

  /**
   * converts string page list into array
   * @param {string} list of pages
   * @returns {array} list of pages split into array
   */

  parsePageList(list) {
    if (!list) return [];
    return list.split(",").map(item => item.trim()) || [];
  }

  /**
   * extracts non-blobs from page data
   * @returns non-blob page data
   */

  extractAttributes() {
    if (!this.data) return {};
    const { blobs, ...notBlobs } = this.data;
    return notBlobs;
  }

  createDropAttributes() {
    this.attributes = {...this.attributes, ...this.extractAttributes()};
    Object.keys(this.attributes).forEach((key) => {
      if (this.unwantedKeys.includes(key.toLowerCase())) delete this.attributes[key];
    });
  }

  remapAttributes() {
    if (!this.attributes) return;
    Object.keys(this.attributes).forEach((oldKey) => {
      const newKey = this.attributeMapping[oldKey];
      const replacedKey = this.cleanKey(oldKey);
      if (newKey) {
        this.attributes[newKey] = this.attributes[oldKey];
        delete this.attributes[oldKey];
      } else if (replacedKey !== oldKey && !this.attributes[replacedKey]) {
        this.attributes[replacedKey] = this.attributes[oldKey];
        delete this.attributes[oldKey];
      }
    });
  }

  cleanKey(key) {
    return key.replace(/ /g, "_")
              .replace(/^data-/i, "")
              .trim()
              .toLowerCase();
  }

  processBlobs() {
    this.blobs.forEach(blob => {
      if (typeof this.blobHandlers[blob.type] === "function") {
        const othis = this;
        this.blobHandlers[blob.type](blob, othis);
      } else {
        this.defaultBlobHandler(blob);
      }
    });
  }

  getPages() {
    if (this.breakRepeat || !this.pagesRequest) return;
    this.dropPages.importPages(this.pagesRequest);
  }

  clearPage() {
    this.clearSections.forEach(section => {
      getSectionIDs(section, ids => {
        ids.forEach(id => removeRepeatingRow(`repeating_${section}_${id}`));
      })
    });
    this.clearAttributes.forEach(attribute => this.attributes[attribute] = "");
  }

  defaultBlobHandler(blob) {
    for (const key in blob) {
      if (!this.attributes[key]) this.attributes[key] = blob[key];
      else (this.attributes[`${this.cleanKey(blob.name)}_${key}`] = blob[key])
    }
    this.attributes = { ...this.attributes, ...blob };
    delete blob.type;
  }

  cleanAttributes() {
    let clonedAttributes = JSON.parse(JSON.stringify(this.attributes)); // deep clones object
    Object.keys(clonedAttributes).forEach(key => {
      let value = clonedAttributes[key];
      if (typeof value !== "string" && typeof value !== "number") delete clonedAttributes[key];
      if (typeof value === "number") clonedAttributes[key] = `${value}`;
    });
    return clonedAttributes;
  }

  get attrs() {
    const attributes = {};
    Object.entries(this.cleanAttributes()).forEach(([key, value]) => {
      const newKey = (this.prefix) ? `${this.prefix}_${key}`: key;
      attributes[newKey] = value;
    });
    return attributes;
  }

  _write() {
    setAttrs(this.attrs);
  }
}

/**
 * Class for row drops (i.e. a repeating section)
 */
class DropRow extends Drop {

  constructor(page, options) {
    super(page, options);
  }

  _loadExtension(page, options) {
    const { repeatingID, sectionName, scopeSectionName } = options || {};
    this.scopeSectionName = scopeSectionName || false;
    this.sectionName = sectionName || this.sectionName || page.category || "";
    this.id = repeatingID || generateRowID();
    this.attributes = { ...this.attributes, name: this.name };
  }

  buildRowName() {
    return (this.prefix) ? `repeating_${this.sectionName}_${this.id}_${this.prefix}` : `repeating_${this.sectionName}_${this.id}`;
  }

  get attrs() {
    const attributes = {};
    Object.entries(this.cleanAttributes()).forEach(([key, value]) => {
      let newKey = `${this.buildRowName()}_${key}`;
      if (key === "$base") newKey = this.buildRowName();
      attributes[newKey] = value;
    });
    return attributes;
  }
}

class DropPages {

  constructor(parent) {
    this.parent = parent;
  }

  importPages(pageArray) {
    if (pageArray === "") return false;
    this.pageArray = (typeof pageArray === "string") ? [ pageArray ] : pageArray;
    if (this.pageArray.length === 0) return;
    this.cleanPageArray();
    getCompendiumPage(this.pageArray, (data) => {
      if (!Array.isArray(data)) this.giveDropToParent(data);
      else data.forEach((page) => this.giveDropToParent(page));
    });
  }

  cleanPageArray() {
    this.pageExtras = {};
    this.pageArray = this.pageArray.map(page => {
      page = page.replace(/]/gi, "").trim();
      const [name, ...extras] = page.split("[");
      const pageName = name.split(":")[1].trim();
      extras.map(extra => extra.trim());
      this.pageExtras[pageName] = extras;
      return name.trim();
    });
  }

  giveDropToParent(page) {
    if (Object.keys(page.data).length < 3) return false;
    const extras = this.pageExtras[page.name] || "";
    const drop = {
      drop_name: page.name,
      drop_category: page.data.Category,
      drop_data: page.data
    };
    this.parent.handleDrop(drop, { extras, breakRepeat: true }, true);
  }
}

if (typeof module !== "undefined") {
  module.exports = {
    DragAndDrop,
    Drop,
    DropRow,
    DropPages,
  }
}// GLOBALS

const G_PHYSICAL_ATTRIBUTES = ["strength", "dexterity", "stamina"];
const G_SOCIAL_ATTRIBUTES = ["charisma", "manipulation", "composure"];
const G_MENTAL_ATTRIBUTES = ["intelligence", "wits", "resolve"];
const G_ATTRIBUTES = [...G_PHYSICAL_ATTRIBUTES, ...G_SOCIAL_ATTRIBUTES, ...G_MENTAL_ATTRIBUTES];
const G_NPCATTRIBUTES = ["physical", "social", "mental"];
const G_PHYSICAL_SKILLS = ["athletics", "brawl", "craft", "drive", "firearms", "larceny", "melee", "stealth", "survival"];
const G_SOCIAL_SKILLS = ["animal_ken", "etiquette", "insight", "intimidation", "leadership", "performance", "persuasion", "streetwise", "subterfuge"];
const G_MENTAL_SKILLS = ["academics", "awareness", "finance", "investigation", "medicine", "occult", "politics", "science", "technology"];
const G_SKILLS = [...G_PHYSICAL_SKILLS, ...G_SOCIAL_SKILLS, ...G_MENTAL_SKILLS];
const G_SOCIAL = [...G_SOCIAL_ATTRIBUTES, ...G_SOCIAL_SKILLS];
const G_PHYSICAL = [...G_PHYSICAL_ATTRIBUTES, ...G_PHYSICAL_SKILLS];
const G_MENTAL = [...G_MENTAL_ATTRIBUTES, ...G_MENTAL_SKILLS];
const G_SECONDARY_STATISTICS = ["health", "willpower", "resonance", "hunger", "character_name"];
const G_MAX_POWERS = 15;
const G_POWER_ARRAY = Array.from(Array(G_MAX_POWERS).keys()).map((item) => item + 1);
const G_DISCIPLINE_OPERANDS = 2;
  /**
 * Turns a string into an object, or returns false
 * @param {String} string The String to be parsed
 * @returns Either the parsed JSON string if possible, or false if not
 */

const parseJSON = (string) => {
  let json = {};
  try {
    json = JSON.parse(string);
  } catch (e) {
    json = false;
  }
  return json;
};

/**
 * Sorts an Object by a key of the child elements
 * @param {Object} object The Object to be sorted
 * @param {String} key The key by which to sort
 * @returns {Object} The sorted object
 */

const sortObject = (object, key) => {
  const array = Object.entries(object);
  const sortedArray = array.sort(([keya, valuesa], [keyb, valuesb]) => valuesa[key] > valuesb[key]);
  return Object.fromEntries(sortedArray);
};

/**
 * Retrives the Unique ID of a repeating section
 * @param {String} value The string from which the UID will be extracted
 * @returns {String} The UID
 */

const getUID = function (value) {
  const regexp = /-.{19}(?=_)|-.{19}$/g;
  const valueAsString = String(value);
  const match = valueAsString.match(regexp);
  return match ? match.join() : "";
};

const getAttrDetails = (sourceAttribute) => {
  const [repeating, section, id, ...attr] = sourceAttribute.split("_");
  return {
    repeating,
    section,
    id,
    attr: attr.join("_"),
  };
};

const convertToIntegers = (object) => {
  if (typeof object !== "object") return console.warn(`Expected an object but got ${typeof object} instead`);
  for (const key in object) {
    object[key] = parseInt(object[key]) || 0;
  }
  return object;
};

/**
 * This allows us to set a user's active id. Allowing for us to enable async sheetworkers.
 * @param {String} id
 * @returns
 */

const _setActiveCharacterId = (id) => {
  var oldId = getActiveCharacterId();
  var event = new CustomEvent("message");
  event.data = { id: "0", type: "setActiveCharacter", data: id };
  self.dispatchEvent(event);
  return oldId;
};

/**
 * This allows us to getattrs as a promise
 * @param {Array} query
 * @returns
 */

const getAttrsAsync = (query) => {
  const activeID = getActiveCharacterId();
  return new Promise((resolve, reject) => {
    try {
      getAttrs(query, (results) => resolve(results));
    } catch (e) {
      reject(console.error(e));
    }
  }).finally((result) => _setActiveCharacterId(activeID));
};

/**
 * This allows us to get repeating ids as a promise
 * @param {Array} query
 * @returns
 */

const getSectionIDsAsync = (query) => {
  const activeID = getActiveCharacterId();
  return new Promise((resolve, reject) => {
    try {
      getSectionIDs(query, (results) => resolve(results));
    } catch (e) {
      reject(console.error(e));
    }
  }).finally((result) => _setActiveCharacterId(activeID));
};

const aggregateRepeatingIDs = (repeatingSections, callback, aggregate = {}) => {
  repeatingSections = [...repeatingSections];
  if (!Array.isArray(repeatingSections))
    throw new Error(`aggregateRepeatingIDs expected array of section names, but instead received ${typeof repeatingSections}`);
  const section = repeatingSections.shift();
  getSectionIDs(`repeating_${section}`, (ids) => {
    aggregate[section] = ids;
    if (repeatingSections.length === 0) callback(aggregate);
    else aggregateRepeatingIDs(repeatingSections, callback, aggregate);
  });
};
  const vampire = (() => {
  /** Removes a power from the triggering discipline.
   *
   * @param {Object} eventInfo as provided by the sheetworker functions
   * @param {Number} index of the triggering power row
   */

  const deleteDisciplinePower = (eventInfo, index) => {
    const id = getUID(eventInfo.sourceAttribute);
    const prefix = `repeating_disciplines_${id}_power`;
    const attrs = [`${prefix}_count`];
    G_POWER_ARRAY.forEach((i) => {
      attrs.push(`${prefix}_${i}_name`);
      attrs.push(`${prefix}_${i}_level`);
      attrs.push(`${prefix}_${i}_dicepools`);
      attrs.push(`${prefix}_${i}_cost`);
      attrs.push(`${prefix}_${i}_duration`);
      attrs.push(`${prefix}_${i}_description`);
      attrs.push(`${prefix}_${i}_system`);
    });

    getAttrs(attrs, (values) => {
      let newValues = {};
      newValues[`${prefix}_count`] = values[`${prefix}_count`] - 1;

      newValues = { ...newValues, ...rebuildPowersList(values, index, prefix) };

      setAttrs(newValues);
    });
  };

  /** Clears old stats for a discipline roll's operand, conditionally updating
   * the display dots based on the newValue in EventInfo
   *
   * @param {Object} eventInfo as provided by the event listener
   * @param {Number} operand specifies the operand inputs+displays that should be updated
   */

  const updateDisciplineRollType = (eventInfo, operand) => {
    const id = getUID(eventInfo.sourceAttribute);
    const prefix = `repeating_disciplines_${id}_roll`;
    const attrs = {};

    getAttrs(
      [
        `repeating_disciplines_${id}_discipline`,
        `${prefix}_type_${operand}`,
        `${prefix}_attrib_${operand}`,
        ...G_ATTRIBUTES,
        ...G_SKILLS,
      ],
      (values) => {
        attrs[`${prefix}_display_${operand}`] =
          values[`${prefix}_type_${operand}`] === "discipline"
            ? values[`repeating_disciplines_${id}_discipline`]
            : values[`${prefix}_attrib_${operand}`] !== "0"
            ? values[values[`${prefix}_attrib_${operand}`]]
            : 0;
        setAttrs(attrs, { silent: true });
      }
    );
  };

  /** Updates display for discipline roll to match new skill or attr
   *
   * @param {Object} eventInfo as provided by the event listener
   * @param {Number} operand specifies the operand inputs+displays that should be updated
   */

  const updateDisciplineRollStat = (eventInfo, operand) => {
    const id = getUID(eventInfo.sourceAttribute);
    const prefix = `repeating_disciplines_${id}_roll`;
    const attrs = {};

    getAttrs([...G_ATTRIBUTES, ...G_SKILLS], (values) => {
      attrs[`${prefix}_display_${operand}`] = values[eventInfo.newValue];

      setAttrs(attrs, { silent: true });
    });
  };

  /** Calculates a new resonance bonus for discipline rolls and applies it across
   * all disciplines
   *
   * @param {Object} eventInfo as provided by event listener
   */

  const updateDisciplinePotency = () => {
    getAttrs(["blood_potency"], (values) => {
      const potency = values["blood_potency"];
      const bonus = Math.floor(potency / 2);
      const attrs = {};

      getSectionIDs("disciplines", (idArray) => {
        idArray.forEach((id) => {
          attrs[`repeating_disciplines_${id}_roll_potency_bonus`] = bonus;
        });

        setAttrs(attrs, { silent: true });
      });
    });
  };

  /** Scans through all disciplines to update dot displays in roll builder
   * for any displays that are showing the provided skill or attribute
   *
   * @param {*} eventInfo as provided by event listener
   * @param {*} matchName the name of the attribute that is being sought after
   */
  const updateDisciplineAttrDisplays = (eventInfo, matchName) => {
    const repeatObj = {};
    const setObj = {};
    let requestArr = [];
    getSectionIDs("disciplines", (idArray) => {
      //Assemble an object to keep track of all of the keys for the values of the getAttrs
      //While simlutaneously assembling the actual request array to feed into getAttrs
      //If there's a better way, dear gods please tell me
      idArray.forEach((id) => {
        const prefix = `repeating_disciplines_${id}_roll`;
        repeatObj[id] = {
          operand_1: [`${prefix}_type_1`, `${prefix}_attrib_1`],
          operand_2: [`${prefix}_type_2`, `${prefix}_attrib_2`],
        };
        requestArr = [...requestArr, ...repeatObj[id].operand_1, ...repeatObj[id].operand_2];
      });

      getAttrs(requestArr, (values) => {
        idArray.forEach((id) => {
          if (values[repeatObj[id].operand_1[0]] !== "discipline" && values[repeatObj[id].operand_1[1]] === matchName)
            setObj[`repeating_disciplines_${id}_roll_display_1`] = eventInfo.newValue;
          if (values[repeatObj[id].operand_2[0]] !== "discipline" && values[repeatObj[id].operand_2[1]] === matchName)
            setObj[`repeating_disciplines_${id}_roll_display_2`] = eventInfo.newValue;
        });
        setAttrs(setObj, { silent: true });
      });
    });
  };

  /** Checks if either roll type variable is set to discipline and updates
   *  dot display to match
   * @param {*} eventInfo as provided by the event listener
   */
  const updateDisciplineDisplay = (eventInfo) => {
    const id = getUID(eventInfo.sourceAttribute);
    const setObj = {};
    getAttrs([`repeating_disciplines_${id}_roll_type_1`, `repeating_disciplines_${id}_roll_type_2`], (values) => {
      Object.keys(values).forEach((operand, index) => {
        if (values[operand] === "discipline")
          setObj[`repeating_disciplines_${id}_roll_display_${index + 1}`] = eventInfo.newValue;
      });
      setAttrs(setObj, { silent: true });
    });
  };

  /** Loops through each power in a given discipline and reorders them if empty
   *
   * @param {Object} eventInfo as provided by the event listener
   * @param {Number} index of the triggering power row
   */

  const rebuildPowersList = (values, index, prefix) => {
    let newValues = {};

    G_POWER_ARRAY.forEach((iterator) => {
      const current = {
        [`${prefix}_${iterator}_name`]: values[`${prefix}_${iterator}_name`] || "",
        [`${prefix}_${iterator}_level`]: values[`${prefix}_${iterator}_level`] || "",
        [`${prefix}_${iterator}_dicepools`]: values[`${prefix}_${iterator}_dicepools`] || "",
        [`${prefix}_${iterator}_cost`]: values[`${prefix}_${iterator}_cost`] || "",
        [`${prefix}_${iterator}_duration`]: values[`${prefix}_${iterator}_duration`] || "",
        [`${prefix}_${iterator}_description`]: values[`${prefix}_${iterator}_description`] || "",
        [`${prefix}_${iterator}_system`]: values[`${prefix}_${iterator}_system`] || "",
      };
      const nextIteration = iterator + 1;
      const next = {
        [`${prefix}_${iterator}_name`]: values[`${prefix}_${nextIteration}_name`] || "",
        [`${prefix}_${iterator}_level`]: values[`${prefix}_${nextIteration}_level`] || "",
        [`${prefix}_${iterator}_dicepools`]: values[`${prefix}_${nextIteration}_dicepools`] || "",
        [`${prefix}_${iterator}_cost`]: values[`${prefix}_${nextIteration}_cost`] || "",
        [`${prefix}_${iterator}_duration`]: values[`${prefix}_${nextIteration}_duration`] || "",
        [`${prefix}_${iterator}_description`]: values[`${prefix}_${nextIteration}_description`] || "",
        [`${prefix}_${iterator}_system`]: values[`${prefix}_${nextIteration}_system`] || "",
      };

      newValues = iterator < index ? { ...newValues, ...current } : { ...newValues, ...next };
    });

    return newValues;
  };

  /** Creates a blank power row at the end of the disciplines current list
   * @param {Object} eventInfo as provided by the event listener
   */

  const addDisciplinePower = (eventInfo) => {
    const id = getUID(eventInfo.sourceAttribute);
    const prefix = `repeating_disciplines_${id}_power`;
    getAttrs([`${prefix}_count`], (values) => {
      const count = +values[`${prefix}_count`] + 1;
      setAttrs({ [`${prefix}_count`]: count });
    });
  };

  /** Works out how many powers there are in a given discipline, and hides empty ones
   *
   * @param {Object} eventInfo as provided by the event listener
   * @returns
   */

  const calculateDisciplineLength = (eventInfo) => {
    const id = getUID(eventInfo.sourceAttribute);
    const prefix = `repeating_disciplines_${id}_power`;
    const attrs = [`${prefix}_count`];
    const source = eventInfo.sourceAttribute;
    if (source.indexOf("power_count") > -1) return;
    G_POWER_ARRAY.forEach((i) => {
      attrs.push(`${prefix}_${i}_name`);
      attrs.push(`${prefix}_${i}_level`);
      attrs.push(`${prefix}_${i}_dicepools`);
      attrs.push(`${prefix}_${i}_cost`);
      attrs.push(`${prefix}_${i}_duration`);
      attrs.push(`${prefix}_${i}_description`);
      attrs.push(`${prefix}_${i}_system`);
    });

    getAttrs(attrs, (values) => {
      let newValues = {};
      let count = 0;
      G_POWER_ARRAY.forEach((iterator) => {
        count =
          values[`${prefix}_${iterator}_name`] ||
          values[`${prefix}_${iterator}_level`] ||
          values[`${prefix}_${iterator}_dicepools`] ||
          values[`${prefix}_${iterator}_cost`] ||
          values[`${prefix}_${iterator}_duration`] ||
          values[`${prefix}_${iterator}_description`] ||
          values[`${prefix}_${iterator}_system`]
            ? iterator
            : count;
      });
      newValues[`${prefix}_count`] = count;
      setAttrs(newValues);
    });
  };

  /** Calculates whether the user has more humanity than they have stains and if they do, resets their stains
   *
   * @param {Object} values from the getAttrs, contains:
   * @param {String} values.humanity the character's current humanity
   * @param {String} values.humanity_stains the character's current stains
   */

  const calculateMaxStains = (values) => {
    const { humanity, humanity_stains } = values;
    const updateAttrs = {};
    const newMax = +humanity - +humanity_stains;
    updateAttrs["humanity_max"] = newMax;
    const stain_difference = 10 - +humanity_stains;
    const humanity_difference = 10 - +humanity;
    if (humanity >= stain_difference) updateAttrs["humanity_stains"] = humanity_difference;
    return updateAttrs;
  };

  /** Calculates whether the user has more humanity than they have stains and if they do, resets their stains
   *
   * @param {Object} values from the getAttrs.
   * @param {string} track the name of the current track
   */

  const calculateImpairement = (values, track) => {
    const update = {};
    const current = +values[track] || 0;
    const max = +values[`${track}_max`] || 10;
    const compare = max !== 0 ? max : 10;

    if (current >= compare) {
      update[`impaired_${track}`] = 1;
      update[`impaired_${track}_label`] = getTranslationByKey("Impaired");
    } else {
      update[`impaired_${track}`] = 0;
      update[`impaired_${track}_label`] = " ";
    }
    return update;
  };

  const toggleDamageTrackItem = (values, track, index) => {
    const state = values[`${track}_${index}`] || "";
    return state === "" ? "s" : state === "s" ? "a" : "";
  };

  const calculateTotalDamage = (values) => {
    const track_values = Object.values(values);
    let aggravated = 0;
    let superficial = 0;
    let total = 0;
    track_values.forEach((value) => {
      if (value === "a") aggravated++;
      if (value === "s") superficial++;
      if (value !== "") total++;
    });
    return { aggravated, superficial, total };
  };

  const calculateMaxHealth = (values) => {
    const { stamina, health_mod } = values;
    const health_max = +stamina + 3 + +health_mod;
    return health_max;
  };

  const calculateMaxWillpower = (values) => {
    const { composure, resolve, willpower_mod } = values;
    const willpower_max = +composure + +resolve + +willpower_mod;
    return willpower_max;
  };

  const resetDamageTracker = (values, tracker) => {
    let aggravated = values[`${tracker}_aggravated`];
    let superficial = values[`${tracker}_superficial`];
    const track = {};
    for (let i = 1; i <= 15; i++) {
      if (superficial > 0) {
        track[`${tracker}_${i}`] = "s";
        superficial--;
      } else if (aggravated > 0) {
        track[`${tracker}_${i}`] = "a";
        aggravated--;
      } else {
        track[`${tracker}_${i}`] = "";
      }
    }
    return track;
  };

  const healAtSessionStart = (values) => {
    let {
      stamina,
      composure,
      resolve,
      health_superficial,
      health_aggravated,
      willpower_superficial,
      willpower_aggravated,
    } = convertToIntegers(values);
    const health_superficial_prev = health_superficial;
    const willpower_superficial_prev = willpower_superficial;
    const willpower_aggravated_prev = willpower_aggravated;
    const willpower_healing = composure > resolve ? composure : resolve;
    health_superficial = health_superficial - stamina < 0 ? 0 : health_superficial - stamina;
    willpower_superficial =
      willpower_superficial - willpower_healing < 0 ? 0 : willpower_superficial - willpower_healing;
    willpower_aggravated = willpower_aggravated - 1 < 0 ? 0 : willpower_aggravated - 1;

    notifyOfSessionStartHealing({
      health_superficial,
      willpower_superficial,
      willpower_aggravated,
      health_superficial_healing: stamina,
      willpower_superficial_healing: willpower_healing,
      willpower_aggravated_healing: 1,
      health_superficial_prev,
      willpower_superficial_prev,
      willpower_aggravated_prev,
    });

    return {
      health_superficial,
      willpower_superficial,
      willpower_aggravated,
      ...resetDamageTracker({ health_aggravated, health_superficial }, "health"),
      ...resetDamageTracker({ willpower_aggravated, willpower_superficial }, "willpower"),
    };
  };

  const notifyOfSessionStartHealing = async (healing_data) => {
    const {
      health_superficial,
      willpower_superficial,
      willpower_aggravated,
      health_superficial_healing,
      willpower_superficial_healing,
      willpower_aggravated_healing,
      health_superficial_prev,
      willpower_superficial_prev,
      willpower_aggravated_prev,
    } = healing_data;

    const roll = [
      `&{template:vampire}`,
      `@{whisper}`,
      `&{template:vampire}`,
      `{{title=^{Start of Session Healing}}}`,
      `{{character=@{character_name}}}`,
      `{{healing=true}}`,
      `{{healing_health_superficial=${health_superficial}}}`,
      `{{healing_health_superficial_increase=${health_superficial_healing}}}`,
      `{{healing_health_superficial_prev=${health_superficial_prev}}}`,
      `{{healing_willpower_superficial=${willpower_superficial}}}`,
      `{{healing_willpower_superficial_increase=${willpower_superficial_healing}}}`,
      `{{healing_willpower_superficial_prev=${willpower_superficial_prev}}}`,
      `{{healing_willpower_aggravated=${willpower_aggravated}}}`,
      `{{healing_willpower_aggravated_increase=${willpower_aggravated_healing}}}`,
      `{{healing_willpower_aggravated_prev=${willpower_aggravated_prev}}}`,
    ].join("");

    const result = await startRoll(roll);

    const rollID = result.rollId;

    finishRoll(rollID);
  };

  const updateSPC = () => {
    getAttrs(
      [
        "sheet_type",
        "npc_updated",
        ...G_ATTRIBUTES,
        ...G_NPCATTRIBUTES,
        "health",
        "willpower",
        "special",
        "general_excellent",
        "general_mediocre",
      ],
      (values) => {
        if (values["npc_updated"] === "on" || values["sheet_type"] !== "npc") return;
        const sections = {
          section_characteristics: "0",
          npc_updated: "on",
        };

        G_ATTRIBUTES.forEach((attribute) => {
          if (values[attribute] && values[attribute] != "0") sections.section_characteristics = "1";
        });

        if (values["special"]) sections.section_special = "1";
        if (values["health"] || values["willpower"]) sections.secondary = "1";
        if (values["general_excellent"] || values["general_mediocre"]) sections.general = "1";

        aggregateRepeatingIDs(["npcskills", "npcexceptional", "disciplines"], (ids) => {
          if (ids.npcskills.length > 0) sections.section_skills = "1";
          if (ids.npcexceptional.length > 0) sections.section_exceptional = "1";
          if (ids.disciplines.length > 0) sections.section_disciplines = "1";
          setAttrs(sections);
        });
      }
    );
  };

  return {
    deleteDisciplinePower,
    updateDisciplineAttrDisplays,
    updateDisciplineDisplay,
    updateDisciplineRollType,
    updateDisciplineRollStat,
    updateDisciplinePotency,
    addDisciplinePower,
    calculateDisciplineLength,
    calculateMaxStains,
    calculateImpairement,
    toggleDamageTrackItem,
    calculateTotalDamage,
    calculateMaxHealth,
    calculateMaxWillpower,
    resetDamageTracker,
    healAtSessionStart,
    updateSPC,
  };
})();
  const allRepeatingSections = ["disciplines", "advantages", "flaws", "npcexceptional", "npcskills"];
const allAttrs = [
  "strength",
  "dexterity",
  "stamina",
  "charisma",
  "manipulation",
  "composure",
  "intelligence",
  "wits",
  "resolve",
  "excellent",
  "mediocre",
  "special",
  "chronicle",
  //"sire",
  "concept",
  //"ambition",
  "auspice",
  //"desire",
  //"predator",
  "patron",
  //"clan",
  "tribe",
  //"generation",
  "health",
  "health_max",
  "willpower",
  "willpower_max",
];

const disciplineCategory = {
  type: "static",
  options: {
    async bypass() {
      setAttrs({ discipline_name: this.name, discipline_data: JSON.stringify(this.data) }, {}, () => {
        startCharactermancer("dropdiscipline");
      });
    },
  },
};

const advantageCategory = {
  categoryName: "advantage",
  type: "repeating",
  options: {
    prefix: "advantage",
    sectionName: "advantages",
    attributeMapping: {
      "Sub Category": "category",
    },
    beforeWrite() {
      const attributes = this.attributes;
      let advantage;
      if (attributes.cost) {
        if (attributes.cost.Fixed) advantage = attributes.cost.Fixed;
        else if (attributes.cost.Min) advantage = attributes.cost.Min;
        this.attributes["$base"] = advantage;
      }
    },
  },
};

const flawCategory = {
  categoryName: "flaw",
  type: "repeating",
  options: {
    prefix: "flaw",
    sectionName: "flaws",
    attributeMapping: {
      "Sub Category": "category",
    },
    beforeWrite() {
      const attributes = this.attributes;
      let flaw;
      if (attributes.cost) {
        if (attributes.cost.Fixed) flaw = attributes.cost.Fixed;
        else if (attributes.cost.Min) flaw = attributes.cost.Min;
        this.attributes["$base"] = flaw;
      }
    },
  },
};

const spcFunctions = {
  characteristics(attributes) {
    return {
      section_characteristics: attributes.physical | attributes.social | attributes.mental ? "0" : "1",
    };
  },
  secondaryAttributes(attributes) {
    return {
      section_secondary: attributes.health | attributes.willpower ? "1" : "0",
    };
  },
  generalDifficulties(attributes) {
    const generalDifficulties = attributes.general_difficulties || false;
    if (!generalDifficulties) return { section_generaldiff: "0" };
    return {
      section_generaldiff: "1",
      general_excellent: generalDifficulties.Excellent,
      general_mediocre: generalDifficulties.Mediocre,
    };
  },
  skills(attributes) {
    const skills = attributes.skills || false;
    if (!skills) return { section_skills: "0" };
    const skillsUpdate = {
      section_skills: "1",
    };
    skills.forEach((skill) => {
      const id = generateRowID();
      skillsUpdate[`repeating_npcskills_${id}_skill_name`] = skill.Pool;
      skillsUpdate[`repeating_npcskills_${id}_skill`] = skill.Dots;
      skillsUpdate[`repeating_npcskills_${id}_skill_edit`] = "0";
    });
    return skillsUpdate;
  },
  exceptionalPools(attributes) {
    const exceptional = attributes.exceptional || false;
    if (!exceptional) return { section_exceptional: "0" };
    const exceptionalUpdate = {
      section_exceptional: "1",
    };
    exceptional.forEach((pool) => {
      const id = generateRowID();
      exceptionalUpdate[`repeating_npcexceptional_${id}_exceptional_name`] = pool.Pool;
      exceptionalUpdate[`repeating_npcexceptional_${id}_exceptional`] = pool.Dots;
      exceptionalUpdate[`repeating_npcexceptional_${id}_exceptional_edit`] = "0";
    });
    return exceptionalUpdate;
  },
  disciplines(attributes) {
    const disciplines = attributes.disciplines || false;
    if (!disciplines) return { section_disciplines: "0" };
    const disciplineUpdate = {
      section_disciplines: "1",
    };
    disciplines.forEach((discipline) => {
      const id = generateRowID();
      disciplineUpdate[`repeating_disciplines_${id}_discipline_name`] = discipline.Pool;
      disciplineUpdate[`repeating_disciplines_${id}_discipline`] = discipline.Dots;
      disciplineUpdate[`repeating_disciplines_${id}_discipline_display_toggle`] = "0";
    });
    return disciplineUpdate;
  },
  special(attributes) {
    return {
      section_special: attributes.special ? "1" : "0",
    };
  },
};

const spcCategory = {
  categoryName: "spc",
  type: "static",
  options: {
    query: {
      modal: "spcmodal_toggle",
      abandon: ["spc-dismiss"],
      continue: ["spc-confirm"],
      openOn: [
        { name: "character_name", value: "" },
        { name: "strength", value: "" },
        { name: "dexterity", value: "" },
        { name: "stamina", value: "" },
        { name: "charisma", value: "" },
        { name: "manipulation", value: "" },
        { name: "composure", value: "" },
        { name: "intelligence", value: "" },
        { name: "wits", value: "" },
        { name: "resolve", value: "" },
        { name: "physical", value: "" },
        { name: "social", value: "" },
        { name: "mental", value: "" },
      ],
    },
    clearSections: allRepeatingSections,
    clearAttributes: allAttrs,
    afterLoad() {
      const newAttributes = {
        character_name: this.name,
        sheet_type: "npc",
        ...spcFunctions.characteristics(this.attributes),
        ...spcFunctions.secondaryAttributes(this.attributes),
        ...spcFunctions.generalDifficulties(this.attributes),
        ...spcFunctions.skills(this.attributes),
        ...spcFunctions.exceptionalPools(this.attributes),
        ...spcFunctions.disciplines(this.attributes),
        ...spcFunctions.special(this.attributes),
      };
      this.attributes = {
        ...this.attributes,
        ...newAttributes,
      };
    },
  },
};

const dragAndDropConfig = {
  categories: {
    SPCs: spcCategory,
    Disciplines: disciplineCategory,
    Advantages: advantageCategory,
    Flaws: flawCategory,
  },
};

const dragAndDrop = new DragAndDrop(dragAndDropConfig);

console.log("Drag and Drop Initialized");
  // Triggered by Drag and Drop
// on("change:drop_name", (eventInfo) => {
//   if (eventInfo.sourceType === "sheetworker" || eventInfo.newValue === "") return false;
//   const dropArray = ["drop_name", "drop_category", "drop_data"];
//   const attrsArray = [...G_ATTRIBUTES, ...G_SECONDARY_STATISTICS, ...G_SKILLS];
//   const combinedArray = [...dropArray, ...attrsArray];
//   getAttrs(combinedArray, (values) => {
//     const attrs = vampire.DragAndDrop.handleDragAndDrop(values);
//     setAttrs(attrs);
//   });
// });

["front", "reverse"].forEach((button) => on(`clicked:${button}`, (eventInfo) => setAttrs({ sheet_page: button })));

// When we click the delete discipline power button
G_POWER_ARRAY.forEach((index) => {
  on(`clicked:repeating_disciplines:disciplines-delete-${index}`, (eventInfo) => vampire.deleteDisciplinePower(eventInfo, index));
});

// When we change a discipline roll operand's type, we change the display to match
Array.from(Array(G_DISCIPLINE_OPERANDS).keys(), (key) => ++key).forEach((operand) => {
  on(`change:repeating_disciplines:roll_type_${operand}`, (eventInfo) => vampire.updateDisciplineRollType(eventInfo, operand));
});

//When we change a discipline roll's attribute or skill, we change the display to match
Array.from(Array(G_DISCIPLINE_OPERANDS).keys(), (key) => ++key).forEach((operand) => {
  on(`change:repeating_disciplines:roll_attrib_${operand}`, (eventInfo) => vampire.updateDisciplineRollStat(eventInfo, operand));
});

//When we change an attribute or skill, we update the discipline roll builder displays to match
[...G_SKILLS, ...G_ATTRIBUTES].forEach(item =>
  on(`change:${item}`, (eventInfo) => vampire.updateDisciplineAttrDisplays(eventInfo, item))
)

//When we change a discpline value, we update that discipline's roll builder displays to match
on(`change:repeating_disciplines:discipline`, eventInfo => vampire.updateDisciplineDisplay(eventInfo))

//When we update the Blood Potency stat, we update discipline resonance bonus
on("change:blood_potency", (eventInfo) => vampire.updateDisciplinePotency());

// When we click the add discipline power button, we add a discipline power
on(`clicked:repeating_disciplines:disciplines-add`, (eventInfo) => vampire.addDisciplinePower(eventInfo));

// When we change repeating disciplines, we check the discipline length
on(`change:repeating_disciplines`, (eventInfo) => {
  vampire.calculateDisciplineLength(eventInfo);
  vampire.updateDisciplinePotency();
});

// Toggles the whisper value
on("change:whisper_toggle", (eventInfo) => {
  const toggle = eventInfo.newValue === "on" ? "/w GM " : "";
  setAttrs({ whisper: toggle });
});

// Dice Roller String Overrides
on("sheet:opened", (eventInfo) => {
  getAttrs(["character_name"], (values) => {
    const { character_name } = values;
    setAttrs({
      char_name_string: `@{${character_name}|`,
      attrib_selector: `?{Second Attribute|Strength,strength|Dexterity,dexterity|Stamina,stamina|Charisma,charisma|Manipulation,manipulation|Composure,composure|Intelligence,intelligence|Wits,wits|Resolve,resolve`,
    });
  });
});

// Adjusting Maximum Humanity Value On Stains
on("change:humanity_stains", (eventInfo) => {
  getAttrs(["humanity", "humanity_stains"], (values) => {
    const updateAttrs = vampire.calculateMaxStains(values);
    setAttrs(updateAttrs);
  });
});

// Impairment Automation
["willpower", "health"].forEach((track) => {
  on(`change:${track}`, (eventInfo) => {
    const pools = track === "willpower" ? [...G_MENTAL, ...G_SOCIAL] : G_PHYSICAL;
    const pools_base = pools.map((pool) => `${pool}_base`);
    const requestAttrs = [`${track}`, `${track}_max`, ...pools, ...pools_base];
    getAttrs(requestAttrs, (values) => {
      const updateAttrs = vampire.calculateImpairement(values, track, pools);
      setAttrs(updateAttrs);
    });
  });
});

// Update max willpower on composure or resolve change
["composure", "resolve"].forEach((attribute) => {
  on(`change:${attribute}`, (eventInfo) => {
    if (eventInfo.sourceType === "sheetworker") return false;
    getAttrs(["composure", "resolve"], (values) => {
      setAttrs({
        willpower_max: parseInt(values.composure) + parseInt(values.resolve),
      });
    });
  });
});

// Update max health on stamina change
on(`change:Stamina`, (eventInfo) => {
  if (eventInfo.sourceType === "sheetworker") return false;
  setAttrs({
    health_max: parseInt(eventInfo.newValue) + 3,
  });
});

["willpower", "health"].forEach((track) => {
  for (let i = 1; i <= 15; i++) {
    // Toggle damage button click
    const attr = `${track}_${i}`;
    on(`clicked:${attr}`, (eventInfo) => {
      getAttrs([attr], (values) => {
        const new_state = vampire.toggleDamageTrackItem(values, track, i);
        setAttrs({ [attr]: new_state });
      });
    });

    // Recalculate all damage on tracker
    on(`change:${track}_${i}`, (eventInfo) => {
      const requestAttrs = ["sheet_type"];
      for (let j = 1; j <= 15; j++) {
        requestAttrs.push(`${track}_${j}`);
      }
      getAttrs(requestAttrs, (values) => {
        if (values["sheet_type"] === "npc") return;
        delete values.sheet_type;
        const totals = vampire.calculateTotalDamage(values);
        const { aggravated, superficial, total } = totals;
        setAttrs({
          [`${track}_aggravated`]: aggravated,
          [`${track}_superficial`]: superficial,
          [`${track}`]: total,
        });
      });
    });
  }

  on(`clicked:${track}_reset`, (eventInfo) => {
    const updateAttrs = {};
    for (let j = 1; j <= 10; j++) {
      updateAttrs[`${track}_${j}`] = "";
    }
    setAttrs(updateAttrs);
  });
});

on(`sheet:opened change:stamina change:health_mod`, (eventInfo) => {
  getAttrs(["stamina", "health_mod"], (values) => {
    const health_max = vampire.calculateMaxHealth(values);
    setAttrs({
      health_max,
      maxhealth: health_max,
    });
  });
});

on(`sheet:opened change:composure change:resolve change:willpower_mod`, (eventInfo) => {
  getAttrs(["composure", "resolve", "willpower_mod"], (values) => {
    const willpower_max = vampire.calculateMaxWillpower(values);
    setAttrs({
      willpower_max,
      maxwillpower: willpower_max,
    });
  });
});

on(`clicked:startsession`, (eventInfo) => {
  getAttrs(["stamina", "composure", "resolve", "health_superficial", "health_aggravated", "willpower_superficial", "willpower_aggravated"], (values) => {
    const updateAttrs = vampire.healAtSessionStart(values);
    setAttrs(updateAttrs);
  });
});

["major", "minor"].forEach((button) => on(`clicked:${button}`, (eventInfo) => setAttrs({ npctype: button })));

on("change:willpower_max", (eventInfo) => setAttrs({ willpower_maximum: eventInfo.newValue }));

on("sheet:opened change:section_characteristics", (eventInfo) => {
  const simpleQuery = `?{Linked Attribute?|None,0|Physical,@{physical}[PHYSICAL]|Social,@{social}[SOCIAL]|Mental,@{Mental}[MENTAL]}`;
  const complexQuery = `?{Linked Attribute|None,0|Strength,@{strength}[STRENGTH]|Dexterity,@{dexterity}[DEXTERITY]|Stamina,@{stamina}[STAMINA]|Charisma,@{charisma}[CHARISMA]|Manipulation,@{manipulation}[MANIPULATION]|Composure,@{composure}[COMPOSURE]|Intelligence,@{intelligence}[INTELLIGENCE]|Wits,@{wits}[WITS]|Resolve,@{resolve}[RESOLVE]}`;
  getAttrs(["section_characteristics"], (values) => {
    const set = {};
    const isSimple = values.section_characteristics === "0";
    set.npc_attribute_select = isSimple ? simpleQuery : complexQuery;
    setAttrs(set);
  });
});

on("sheet:opened", () => {
  vampire.updateSPC();
});
  const createRollString = (rollType, options = {}) => {
  const { rollName, rollAttr, rollAttrs } = options;
  let roll = "";
  switch (rollType) {
    case "standard":
      roll = makeStandardRoll(rollName, rollAttr);
      break;
    case "arbitrary":
      roll = makeArbitraryRoll();
      break;
    case "rouse":
      roll = makeRouseRoll();
      break;
    case "resist":
      roll = makeResistRoll();
      break;
    case "reroll":
      roll = makeRerollRoll();
      break;
    case "remorse":
      roll = makeRemorseRoll();
      break;
    case "humanity":
      roll = makeHumanityRoll();
      break;
    case "npc":
      roll = makeNPCRoll(rollName, rollAttr);
      break;
    case "discipline":
      roll = makeDisciplineRoll(rollName, rollAttrs);
      break;
    case "willpower":
      // case "health": //uncomment me if we get asked to add health!
      roll = makeTrackerRoll(rollName, rollAttr);
      break;
    default:
      roll = `{{title=^{Improper rolltype: ${rollType}}}}`;
  }
  roll = "@{whisper} " + roll;
  return roll;
};

/**
 * Primary roll calculator - runs the roll parsing for every roll
 * @param {object} result whole roll result (including rollID)
 * @returns {object} computed values for rolltemplate to use
 */
const calculateBasicResults = (result) => {
  const { results } = extractResults(result);
  const isImpaired = checkImpairment(results);

  let tempRolls = results.rolls.result;
  if (isImpaired) tempRolls -= 2;
  const rolls = tempRolls < 1 ? 1 : tempRolls;

  const hungerResults = calculateHungerResults(results, rolls);
  const { hungerRolls, hungerFails, hungerPartials } = hungerResults;

  const calculatedResults = calculateDiceResults(results, rolls, hungerResults);
  const { normalRolls, successes, failures, crits, partials } = calculatedResults;

  const difficulty = results.difficulty.result;
  const isSuccess = successes >= difficulty;
  const { bestial_fail, messy_critical } = checkTheBeast(partials, hungerPartials, isSuccess, hungerFails);

  const positiveNormalRolls = normalRolls > 0;
  return {
    successes,
    failures,
    partials,
    crits,
    bestial_fail,
    messy_critical,
    rolls: positiveNormalRolls ? normalRolls : 0,
    hunger: hungerRolls,
    impaired: isImpaired ? 1 : 0,
  };
};

/**
 * Extracts the real results from a roll result object
 * @param {object} result whole roll result (including rollID)
 * @property {string} result.rollId roll id
 * @property {object} result.results actual roll results that we want
 * @returns {object} result.results
 */
const extractResults = (result) => {
  const { results } = result;
  if (!results) throw new Error("Expected to find dice results, but didn't.");
  return { results };
  console.log(results);
};

/**
 * Calculates how many hunger rolls there were, how many failed, succeeded, and rolled `10`s
 * @param {Object} results roll results object
 * @param {Number} rolls calculated # of rolls that factors in impairment
 * @param {object} hungerResults hunger results object including
 * @property {number} hungerResults.hungerRolls # of hunger dice rolled
 * @property {number} hungerResults.hungerFails # of hunger dice that failed
 * @property {number} hungerResults.hungerSuccesses # of hunger dice that succeeded
 * @property {number} hungerResults.hungerPartials # of hunger dice with results of `10`
 * @returns {object} object containing
 * @property {number} normalRolls # of normal dice rolled
 * @property {number} successes total # of successes (normal&hunger)
 * @property {number} failures total # of failures (normal&hunger)
 * @property {number} partials # of normal dice with results of `10`
 * @property {number} crits total # of criticals (normal&hunger partials)
 */
const calculateDiceResults = (results, rolls, hungerResults) => {
  const { hungerRolls = 0, hungerFails = 0, hungerSuccesses = 0, hungerPartials = 0 } = hungerResults;
  let normalRolls = rolls - hungerRolls;
  let failures = 0 + hungerFails;
  let successes = 0 + hungerSuccesses;
  let partials = 0;
  if (normalRolls < 1 && !hungerRolls) throw new Error("Expected Rolls, but none were provided");
  if (normalRolls >= 1) {
    for (let i = 1; i <= normalRolls; i++) {
      const diceResult = +results[`roll_${i}`].result;
      if (diceResult < 6) failures++;
      if (diceResult >= 6) successes++;
      if (diceResult === 10) partials++;
    }
  }
  const crits = Math.floor((partials + hungerPartials) / 2);
  successes += crits * 2;

  return { normalRolls, successes, failures, partials, crits };
};

/**
 * Calculates how many hunger rolls there were, how many failed, succeeded, and rolled `10`s
 * @param {Object} results roll results object
 * @param {Number} rolls calculated # of rolls that factors in impairment
 * @returns {Object} hunger results object including
 * @property {Number} hungerRolls # of hunger dice rolled
 * @property {Number} hungerFails # of hunger dice that failed
 * @property {Number} hungerSuccesses # of hunger dice that succeeded
 * @property {Number} hungerPartials # of hunger dice with results of `10`
 */
const calculateHungerResults = (results, rolls) => {
  let hungerRolls = results.hunger?.result || 0;
  hungerRolls = hungerRolls > rolls ? rolls : hungerRolls;
  let hungerFails = 0;
  let hungerPartials = 0;
  let hungerSuccesses = 0;
  for (let i = 1; i <= hungerRolls; i++) {
    const dieResult = +results[`blood_roll_${i}`].result;
    if (dieResult === 1) hungerFails++;
    if (dieResult === 2) hungerFails++;
    if (dieResult >= 6) hungerSuccesses++;
    if (dieResult === 10) hungerPartials++;
  }
  return {
    hungerRolls,
    hungerFails,
    hungerSuccesses,
    hungerPartials,
  };
};

/**
 * Determines whether messy criticals or bestial fails apply to the roll
 * @param {Number} partials # of `10`s rolled by normal dice
 * @param {Number} hungerPartials # of `10`s rolled by hunger dice
 * @param {Boolean} isSuccess whether the roll was a success
 * @param {Number} hungerFails how many hunger dice were failures
 * @returns {Object}  containing
 * @param {Number} bestial_fail a 1/0 boolean for rolltemplate functions to read and apply
 * @param {Number} messy_critical a 1/0 beoolean for reolltemplate functions to read and apply
 */
const checkTheBeast = (partials, hungerPartials, isSuccess, hungerFails) => {
  let messy_critical = 0;
  let bestial_fail = 0;

  const totalPartials = partials + hungerPartials;
  if (hungerPartials > 0 && totalPartials >= 2) messy_critical = 1;
  if (hungerFails >= 2) bestial_fail = 1;

  return {
    bestial_fail,
    messy_critical,
  };
};

/**
 * Takes an attr string from a roll and isolates only the letters from it
 * @param {String} attr roll attr string. ex: \@{strength}
 * @returns {String} cleaned string. ex: strength
 */
const cleanupAttr = (attr) =>
  attr
    .replace(/[^a-zA-Z]/gi, "")
    .replace(/_/gi, " ")
    .toLowerCase();

/**
 * Determines if given attribute/skill is impaired, provided current applied impairments
 * @param {Object} results roll results
 * @returns {Boolean} true/false statement on if trait is impaired
 */
const checkImpairment = (results) => {
  if (!results.impaired_willpower || !results.impaired_health) return false;
  const willpowerImpaired = +results.impaired_willpower.result === 1;
  const healthImpaired = +results.impaired_health.result === 1;
  if (!willpowerImpaired && !healthImpaired) return false;
  let affectedPools = G_PHYSICAL;
  if (willpowerImpaired) affectedPools = [...G_MENTAL, ...G_SOCIAL];
  const traitOne = cleanupAttr(results.traitOne.expression);
  const traitTwo = cleanupAttr(results.traitTwo.expression);
  if (affectedPools.includes(traitOne) || affectedPools.includes(traitTwo)) return true;
  return false;
};

//roll arrays
const standard_rolls = [...Array(30).keys()].map((index) => `{{roll_${index + 1}=[[1d10]]}}`); //Changed 15 → 30
const blood_rolls = [...Array(5).keys()].map((index) => `{{blood_roll_${index + 1}=[[1d10]]}}`);

//prompts
const custom_modifier = "?{Pool Size Modifier|0|-5|-4|-3|-2|-1|1|2|3|4|5}";
const dice_to_roll = "?{Dice To Roll|0|1|2|3|4|5|6|7|8|9|10}";
const difficulty = "?{Difficulty?|2}";

const makeStandardRoll = (rollName, rollAttr) => {
  const attributeSelector = `?{Second Attribute|None,0|Strength,@{strength}[STRENGTH]|Dexterity,@{dexterity}[DEXTERITY]|Stamina,@{stamina}[STAMINA]|Charisma,@{charisma}[CHARISMA]|Manipulation,@{manipulation}[MANIPULATION]|Composure,@{composure}[COMPOSURE]|Intelligence,@{intelligence}[INTELLIGENCE]|Wits,@{wits}[WITS]|Resolve,@{resolve}[RESOLVE]}`;
  const roll = [
    `&{template:vampirecomp}`,
    `{{title=${rollName}}}`,
    `{{character=@{character_name}}}`,
    `{{impaired_health=[[@{impaired_health}]]}}`,
    `{{impaired_willpower=[[@{impaired_willpower}]]}}`,
    `{{traitOne=[[@{${rollName}}[${rollName.toUpperCase()}]]]}}`,
    `{{traitTwo=[[${attributeSelector}]]}}`,
    `{{rolls=[[@{${rollAttr}}[${rollName.toUpperCase()}] + ${attributeSelector} + ${custom_modifier},0}kh1]]}}`,
    `{{difficulty=[[?{Difficulty?|2}]]}}`,
    `{{successes=[[0]]}}`,
    `{{failures=[[0]]}}`,
    `{{bestial_fail=[[0]]}}`,
    `{{messy_critical=[[0]]}}`,
    `{{impaired=[[0]]}}`,
    `{{hunger=[[{@{hunger},@{${rollAttr}} + ${attributeSelector} + ${custom_modifier}}kl1]]}}`,
    ...standard_rolls,
    ...blood_rolls,
  ].join(" ");
  return roll;
};

const makeDisciplineRoll = (rollName, rollAttrs) => {
  // take the values from the rolls property, since we only needed keys to assemble rollName
  const rollOperands = Object.values(rollAttrs.rolls).map((attr) => `@{${attr}}`);
  let combinedOperands = rollOperands.join(" + ");
  const { health, willpower } = rollAttrs.impairments;

  const activeImpairments = [];
  for (const [key, value] of Object.entries(rollAttrs.rolls)) {
    let impairment = 0;
    if (key === value) {
      impairment = checkImpairment(value, {
        impaired_health: health,
        impaired_willpower: willpower,
      });
    }
    activeImpairments.push(impairment);
  }

  const roll = [
    `&{template:vampirecomp}`,
    `{{title=${rollName}}}`,
    `{{character=@{character_name}}}`,
    `{{impaired_health=[[@{impaired_health}]]}}`,
    `{{impaired_willpower=[[@{impaired_willpower}]]}}`,
    `{{traitOne=[[0[${Object.keys(rollAttrs.rolls)[0]}]]]}}`,
    `{{traitTwo=[[0[${Object.keys(rollAttrs.rolls)[1]}]]]}}}`,
    `{{rolls=[[{${combinedOperands} + ${rollAttrs.potency} + ${custom_modifier},0}kh1]]}}`,
    `{{difficulty=[[${difficulty}]]}}`,
    `{{successes=[[0]]}}`,
    `{{failures=[[0]]}}`,
    `{{bestial_fail=[[0]]}}`,
    `{{messy_critical=[[0]]}}`,
    `{{impaired=[[0]]}}`,
    `{{hunger=[[{@{hunger},${combinedOperands} + ${custom_modifier}}kl1]]}}`,
    ...standard_rolls,
    ...blood_rolls,
  ].join(" ");
  return roll;
};

const makeArbitraryRoll = () => {
  roll = [
    `&{template:vampirecomp}`,
    `{{title=?{Name of the Roll}}}`,
    `{{character=@{character_name}}}`,
    `{{rolls=[[${dice_to_roll},0}kh1]]}}`,
    `{{difficulty=[[${difficulty}]]}}`,
    `{{successes=[[0]]}}`,
    `{{failures=[[0]]}}`,
    `{{bestial_fail=[[0]]}}`,
    `{{messy_critical=[[0]]}}`,
    `{{hunger=[[{@{hunger},${dice_to_roll}}kl1]]}}`,
    ...standard_rolls,
    ...blood_rolls,
  ].join(" ");
  return roll;
};

const makeRouseRoll = () => {
  roll = [
    `&{template:vampirecomp}`,
    `{{title=^{Rouse Check}}}`,
    `{{character=@{character_name}}}`,
    `{{rolls=[[1]]}}`,
    `{{difficulty=[[1]]}}`,
    `{{successes=[[0]]}}`,
    `{{failures=[[0]]}}`,
    `{{bestial_fail=[[0]]}}`,
    `{{messy_critical=[[0]]}}`,
    `{{roll_1=[[1d10]]}}`,
    `{{rouse=[[0]]}}`,
  ].join(" ");
  return roll;
};

const makeResistRoll = () => {
  roll = [
    `&{template:vampirecomp}`,
    `{{title=Resist Frenzy}}`,
    `{{character=@{character_name}}}`,
    `{{rolls=[[{@{maxwillpower}-@{willpower}+${custom_modifier},1}kh1+floor(@{humanity}/3)]]}}`,
    `{{difficulty=[[${difficulty}]]}}`,
    `{{successes=[[0]]}}`,
    `{{failures=[[0]]}}`,
    `{{bestial_fail=[[0]]}}`,
    `{{messy_critical=[[0]]}}`,
    `{{resist=[[0]]}}`,
    ...standard_rolls,
  ].join(" ");
  return roll;
};

const makeRerollRoll = () => {
  roll = [
    `&{template:vampirecomp}`,
    `{{title=Willpower Reroll}}`,
    `{{character=@{character_name}}}`,
    `{{rolls=[[?{Dice To Roll|1|2|3}]]}}`,
    `{{difficulty=[[${difficulty}]]}}`,
    `{{successes=[[0]]}}`,
    `{{failures=[[0]]}}`,
    `{{bestial_fail=[[0]]}}`,
    `{{messy_critical=[[0]]}}`,
    `{{reroll=true}}`,
    ...standard_rolls,
  ].join(" ");
  return roll;
};

const makeRemorseRoll = () => {
  roll = [
    `&{template:vampirecomp}`,
    `{{title=Remorse Test}}`,
    `{{character=@{character_name}}}`,
    `{{rolls=[[{(10-(@{humanity}+@{humanity_stains})),1}kh1]]}}`,
    `{{difficulty=[[1]]}}`,
    `{{successes=[[0]]}}`,
    `{{failures=[[0]]}}`,
    `{{bestial_fail=[[0]]}}`,
    `{{messy_critical=[[0]]}}`,
    `{{remorse=[[0]]}}`,
    ...standard_rolls,
  ].join(" ");
  return roll;
};

const makeHumanityRoll = () => {
  roll = [
    `&{template:vampirecomp}`,
    `{{title=Humanity}}`,
    `{{character=@{character_name}}}`,
    `{{rolls=[[@{humanity}]]}}`,
    `{{difficulty=[[?{Difficulty?|2}]]}}`,
    `{{successes=[[0]]}}`,
    `{{failures=[[0]]}}`,
    `{{bestial_fail=[[0]]}}`,
    `{{messy_critical=[[0]]}}`,
    ...standard_rolls,
  ].join(" ");
  return roll;
};

// Made for Willpower, but the rules technically also allow Health to be rolled
const makeTrackerRoll = (rollName, rollAttr) => {
  const roll = [
    `&{template:vampirecomp}`,
    `{{title=${rollName}}}`,
    `{{character=@{character_name}}}`,
    `{{rolls=[[{(@{max${rollAttr}}-@{${rollAttr}})[${rollName}] + ?{Pool Size Modifier|0|-5|-4|-3|-2|-1|1|2|3|4|5},1}kh1]]}}`,
    `{{difficulty=[[?{Difficulty?|2}]]}}`,
    `{{successes=[[0]]}}`,
    `{{failures=[[0]]}}`,
    `{{bestial_fail=[[0]]}}`,
    `{{messy_critical=[[0]]}}`,
    ...standard_rolls,
  ].join(" ");
  return roll;
};

const makeNPCRoll = (rollName, rollAttr) => {
  const roll = [
    `&{template:vampirecomp}`,
    `{{title=${rollName}}}`,
    `{{character=@{character_name}}}`,
    `{{traitTwo=[[@{npc_attribute_select}]]}}`,
    `{{rolls=[[{@{${rollAttr}} + @{npc_attribute_select} + ${custom_modifier},0}kh1]]}}`,
    `{{difficulty=[[${difficulty}]]}}`,
    `{{successes=[[0]]}}`,
    `{{failures=[[0]]}}`,
    `{{bestial_fail=[[0]]}}`,
    `{{messy_critical=[[0]]}}`,
    ...standard_rolls,
  ].join(" ");
  return roll;
};

const handleRouseResults = async (computed) => {
  const values = await getAttrsAsync(["hunger"]);
  let hunger = parseInt(values.hunger);
  if (computed.successes === 0) {
    if (hunger === 5) return `${hunger}`;
    hunger += 1;
    setAttrs({
      hunger: `${hunger}`,
    });
    return `${hunger}`;
  }
};

const handleRemorseResults = async (computed) => {
  const values = await getAttrsAsync(["humanity"]);
  let humanity = +values.humanity;
  if (computed.successes > 0) {
    setAttrs({ humanity_stains: 0 });
    return `${humanity}`;
  } else {
    if (humanity === 0) return `${humanity}`;
    humanity -= 1;
    setAttrs({
      humanity: `${humanity}`, // for whatever reason this doesn't work unless provided as a string
      humanity_stains: 0,
    });
    return `${humanity}`;
  }
};

[...G_SKILLS, ...G_ATTRIBUTES].forEach((attr) => {
  on(`clicked:${attr}`, async (eventInfo) => {
    const rollAttr = attr;
    const rollName = attr.toUpperCase();
    const roll = createRollString("standard", { rollAttr, rollName });
    const result = await startRoll(roll);
    const rollID = result.rollId;
    const computed = calculateBasicResults(result);
    finishRoll(rollID, computed);
  });
});

["arbitrary", "rouse", "resist", "remorse", "reroll", "humanity"].forEach((rollType) => {
  on(`clicked:${rollType}`, async (eventInfo) => {
    const roll = createRollString(rollType);
    const result = await startRoll(roll);
    const rollID = result.rollId;
    const computed = calculateBasicResults(result);
    if (rollType === "rouse") computed.rouse = await handleRouseResults(computed);
    if (rollType === "remorse") computed.remorse = await handleRemorseResults(computed);
    delete computed.crits;
    finishRoll(rollID, computed);
  });
});

on(`clicked:repeating_npcskills:npc-skill`, async (eventInfo) => {
  const { id } = getAttrDetails(eventInfo.sourceAttribute);
  const rollAttr = `repeating_npcskills_${id}_skill`;
  const rollName = `@{repeating_npcskills_${id}_skill_name}`;
  const roll = createRollString("npc", { rollAttr, rollName });
  const result = await startRoll(roll);
  const { rollId } = result;
  const computed = calculateBasicResults(result);
  finishRoll(rollId, computed);
});

on(`clicked:repeating_npcexceptional:npc-exceptional`, async (eventInfo) => {
  const { id } = getAttrDetails(eventInfo.sourceAttribute);
  const rollAttr = `repeating_npcexceptional_${id}_exceptional`;
  const rollName = `@{repeating_npcexceptional_${id}_exceptional_name}`;
  const roll = createRollString("npc", { rollAttr, rollName });
  const result = await startRoll(roll);
  const { rollId } = result;
  const computed = calculateBasicResults(result);
  finishRoll(rollId, computed);
});

// When we click the roll Discipline button, we collect the components and send them to the roll parser
on(`clicked:repeating_disciplines:disciplineroll`, async (eventInfo) => {
  const id = getUID(eventInfo.sourceAttribute);
  const prefix = `repeating_disciplines_${id}`;
  let rollComponents = [
    "roll_type_1",
    "roll_attrib_1",
    "roll_type_2",
    "roll_attrib_2",
    "roll_potency_bonus",
    "discipline",
    "discipline_name",
  ];
  rollComponents = [...rollComponents.map((comp) => `${prefix}_${comp}`)];
  rollComponents.push(...["impaired_health", "impaired_willpower"]);

  const rollInfo = { rolls: {} };
  getAttrs(rollComponents, async (values) => {
    rollInfo.potency = values[`${prefix}_roll_potency_bonus`];

    // assemble a rolls object with the attribute names as keys, attr names as values
    Array.from(Array(G_DISCIPLINE_OPERANDS).keys(), (key) => ++key).forEach((operand) => {
      if (values[`${prefix}_roll_type_${operand}`] === "discipline")
        rollInfo.rolls[values[`${prefix}_discipline_name`]] = `${prefix}_discipline`;
      else rollInfo.rolls[values[`${prefix}_roll_attrib_${operand}`]] = values[`${prefix}_roll_attrib_${operand}`];
    });
    rollInfo.impairments = {
      health: values.impaired_health,
      willpower: values.impaired_willpower,
    };

    //construct rollName in function call, pass whole rollInfo object as rollAttrs
    const roll = createRollString("discipline", {
      rollName: `${Object.keys(rollInfo.rolls).join(" & ")} & ${getTranslationByKey("potency_bonus")}`,
      rollAttrs: rollInfo,
    });
    const result = await startRoll(roll);
    const { rollId } = result;
    const computed = calculateBasicResults(result);
    finishRoll(rollId, computed);
  });
});

on("clicked:willpower clicked:health", async (eventInfo) => {
  const rollAttr = eventInfo.triggerName.replace("clicked:", "");
  const rollName = rollAttr.replace(/_/g, " ").replace(/(?: |\b)(\w)/g, function (key) {
    return key.toUpperCase();
  });
  const roll = createRollString(rollAttr, { rollAttr, rollName });
  const result = await startRoll(roll);
  const { rollId } = result;
  const computed = calculateBasicResults(result);
  finishRoll(rollId, computed);
});

G_NPCATTRIBUTES.forEach((rollAttr) => {
  on(`clicked:npc-${rollAttr}`, async (eventInfo) => {
    const rollName = rollAttr.toUpperCase();
    const roll = createRollString("npc", { rollAttr, rollName });
    const result = await startRoll(roll);
    const { rollId } = result;
    const computed = calculateBasicResults(result);
    finishRoll(rollId, computed);
  });
});

G_ATTRIBUTES.forEach((rollAttr) => {
  on(`clicked:npc-${rollAttr}`, async (eventInfo) => {
    const rollName = rollAttr.toUpperCase();
    const roll = createRollString("npc", { rollAttr, rollName });
    const result = await startRoll(roll);
    const { rollId } = result;
    const computed = calculateBasicResults(result);
    finishRoll(rollId, computed);
  });
});

if (typeof module !== "undefined") {
  module.exports = {
    calculateBasicResults,
  };
}
  /**
 * Event Handler for discipline page load
 */

on(`page:dropdiscipline`, (eventInfo) => {
  deleteCharmancerData([], () => {
    getSectionIDs("disciplines", (ids) => {
      const disciplinesRequest = buildDisciplineRequest(G_MAX_POWERS, ids);
      const attrsRequest = [...disciplinesRequest, "discipline_name", "discipline_data"];
      getAttrs(attrsRequest, (values) => {
        const valuesArray = Object.entries(values);
        const disciplinesArray = valuesArray.filter(([key, value]) => disciplinesRequest.includes(key));
        const sheetData = Object.fromEntries(disciplinesArray);
        const compendiumData = {
          name: values.discipline_name,
          data: values.discipline_data,
        };
        onDropDiscipline(compendiumData, sheetData, ids);
      });
    });
  });
});

/**
 * Builds a list of attribute strings to pass to getAttrs
 *
 * @param {Integer} maxIndex The maximum number the loop will iterate to.
 * @returns {Array} An array of all the request variables
 */

const buildDisciplineRequest = (maxIndex, ids) => {
  const request = [];
  for (const id of ids) {
    request.push(`repeating_disciplines_${id}_discipline_name`);
    for (let i = 1; i <= maxIndex; i++) {
      request.push(`repeating_disciplines_${id}_power_${i}_name`);
      request.push(`repeating_disciplines_${id}_power_${i}_level`);
      request.push(`repeating_disciplines_${id}_power_${i}_dicepools`);
      request.push(`repeating_disciplines_${id}_power_${i}_cost`);
      request.push(`repeating_disciplines_${id}_power_${i}_duration`);
      request.push(`repeating_disciplines_${id}_power_${i}_description`);
      request.push(`repeating_disciplines_${id}_power_${i}_system`);
    }
  }
  return request;
};

/**
 * Handles the initiatlization of the drop discipline mancer
 * @param {Object} compendiumData Discipline data passed from the compendium to the sheet
 * @param {String} compendiumData.name The compendium page name
 * @param {Object} compendiumData.data All of the data inherent to that page
 * @param {Object} sheetData Discipline data already existing on the sheet
 * @param {Array} ids The IDs of existing rows
 */

const onDropDiscipline = (compendiumData, sheetData, ids) => {
  const parsedData = parseJSON(compendiumData.data);
  const isAlreadyDiscipline = doesDisciplineExist(compendiumData.name, sheetData, ids);
  const updateAttrs = {};
  if (isAlreadyDiscipline) {
    showChoices(["powerstwo"]);
    updateAttrs["sectionid"] = isAlreadyDiscipline;
  } else showChoices(["powersone"]);
  updateAttrs[`disciplinename`] = compendiumData.name;
  updateAttrs[`disciplinetype`] = parsedData["data-Type"];
  updateAttrs[`disciplinethreat`] = parsedData["data-Masquerade Threat"];
  updateAttrs[`disciplineblood`] = parsedData["data-Blood Resonance"];
  setAttrs(updateAttrs);

  const updateHTML = {};
  updateHTML[`cm-target--title`] = compendiumData.name;
  setCharmancerText(updateHTML);

  const sortedBlobs = sortObject(parsedData.blobs);
  let index = 0;
  for (const key in sortedBlobs) {
    const blob = sortedBlobs[key];
    const name = blob.name;
    const isAlreadyPower = doesPowerExist(name, sheetData, ids);
    const isFirst = !isAlreadyDiscipline && index === 0;
    const isAlreadyPowerOrFirst = isAlreadyPower || isFirst;
    addPowerToMancer(name, blob, isAlreadyPowerOrFirst);
    index++;
  }
};

/**
 * Tests to see if this is already a discipline
 * @param {Object} sheetData Discipline data already existing on the sheet
 * @param {Array} ids The IDs of existing rows
 */

const doesDisciplineExist = (name, sheetData, ids) => {
  if (!Array.isArray(ids)) return;
  for (const id of ids) {
    const disciplineName = sheetData[`repeating_disciplines_${id}_discipline_name`];
    if (disciplineName === name) return id;
  }
  return false;
};

/**
 * Tests to see if this is already a discipline
 * @param {Object} sheetData Discipline data already existing on the sheet
 * @param {Array} ids The IDs of existing rows
 */

const doesPowerExist = (name, sheetData, ids) => {
  const existingPowerNames = [];
  if (!Array.isArray(ids)) return;
  for (const id of ids) {
    for (let i = 1; i < G_MAX_POWERS; i++) {
      const powerName = sheetData[`repeating_disciplines_${id}_power_${i}_name`];
      if (powerName) existingPowerNames.push(powerName);
    }
  }
  return existingPowerNames.includes(name);
};

/**
 * Displays a new power from a provided blob
 * @param {Object} blob The infomration contained in the blob.
 * @param {String} compendiumData.name The compendium page name
 * @param {Object} compendiumData.data All of the data inherent to that page
 * @param {Object} sheetData Discipline data already existing on the sheet
 * @param {Array} ids The IDs of existing rows
 */

const addPowerToMancer = (name, power, toggle) => {
  const { Level, Dicepools, Cost, Duration, Description, System } = power;
  addRepeatingSection("cm-target--powerlist", "power", (sectionid) => {
    const updateText = {};
    updateText[`${sectionid} .cm-target--powertitle`] = name;
    updateText[`${sectionid} .cm-target--level`] = `Level ${Level}`;
    updateText[`${sectionid} .cm-target--dicepools`] = Dicepools;
    updateText[`${sectionid} .cm-target--cost`] = Cost;
    updateText[`${sectionid} .cm-target--duration`] = Duration;
    updateText[`${sectionid} .cm-target--description`] = Description;
    updateText[`${sectionid} .cm-target--system`] = System;
    setCharmancerText(updateText);
    let displayChoices = [];
    if (Level) displayChoices.push("level");
    if (Dicepools) displayChoices.push("dicepools");
    if (Cost) displayChoices.push("cost");
    if (Duration) displayChoices.push("duration");
    if (Description) displayChoices.push("description");
    if (System) displayChoices.push("system");
    displayChoices.push("expandbutton");
    displayChoices = displayChoices.map((item) => `${sectionid} .${item}`);
    showChoices(displayChoices);
    const updateAttrs = {};
    updateAttrs[`${sectionid}_powername`] = name;
    updateAttrs[`${sectionid}_powerjson`] = JSON.stringify(power);
    setAttrs(updateAttrs);
    if (toggle) togglePowerChoice(sectionid, "on");
    if (!toggle) togglePowerChoice(sectionid, "off");
  });
};

/**
 * Toggles the power choice to keep or not to keep, and changes button respectively.
 * @param {Integer} sectionid The repeating section where this is being implemented
 * @param {String} state Allows for the passing of a state for the toggle to be switched to.
 */

const togglePowerChoice = (sectionid, state) => {
  if (!state) {
    const slideValues = getCharmancerData().dropdiscipline.values;
    const targetAttr = `repeating_${sectionid}_power_powerkeep`;
    const currentValue = slideValues[targetAttr];
    const newValue = currentValue === "on" ? "0" : "on";
    setAttrs({ [targetAttr]: newValue });
    const targetOpt = newValue === "on" ? "addbutton" : "deletebutton";
    hideChoices([`repeating_${sectionid}_power .deletebutton`, `repeating_${sectionid}_power .addbutton`]);
    showChoices([`repeating_${sectionid}_power .${targetOpt}`]);
  } else {
    hideChoices([`repeating_${sectionid}_power .deletebutton`, `repeating_${sectionid}_power .addbutton`]);
    if (state === "on") {
      setAttrs({ [`${sectionid}_powerkeep`]: "on" });
      showChoices([`${sectionid} .addbutton`]);
    } else if (state === "off") {
      setAttrs({ [`${sectionid}_powerkeep`]: "0" });
      showChoices([`${sectionid} .deletebutton`]);
    }
  }
};

const toggleContent = (sectionid) => {
  const slideValues = getCharmancerData().dropdiscipline.values;
  const currentValue = slideValues.currentexpand || "";
  const currentArray = currentValue.split(",") || [];
  const showTargets = [];
  const hideTargets = [];
  let newArray = [];
  if (!currentArray.includes(sectionid)) {
    showTargets.push(`repeating_${sectionid}_power .content`);
    showTargets.push(`repeating_${sectionid}_power .contractbutton`);
    hideTargets.push(`repeating_${sectionid}_power .expandbutton`);
    newArray = [...currentArray, sectionid];
  } else {
    showTargets.push(`repeating_${sectionid}_power .expandbutton`);
    hideTargets.push(`repeating_${sectionid}_power .content`);
    hideTargets.push(`repeating_${sectionid}_power .contractbutton`);
    newArray = currentArray.filter((item) => item !== sectionid);
  }
  const updateAttr = newArray.join(",");
  hideChoices(hideTargets);
  showChoices(showTargets);
  setAttrs({ currentexpand: updateAttr });
};

on("clicked:repeating_power", (eventInfo) => {
  const { sourceAttribute } = eventInfo;
  const UID = getUID(sourceAttribute);
  if (sourceAttribute.indexOf("togglepower") > -1) togglePowerChoice(UID);
  if (sourceAttribute.indexOf("expand") > -1) toggleContent(UID);
});

on("mancerfinish:dropdiscipline", (eventInfo) => buildDisciplineForSheet());

const buildDisciplineForSheet = () => {
  const slideRepeating = getCharmancerData().dropdiscipline.repeating || [];
  const slideValues = getCharmancerData().dropdiscipline.values || {};
  const discipline = {};
  const UUID = slideValues.sectionid ? slideValues.sectionid : generateRowID();
  const prefix = `repeating_disciplines_${UUID}`;
  discipline[`${prefix}_discipline_name`] = slideValues.disciplinename || "";
  discipline[`${prefix}_discipline_type`] = slideValues.disciplinetype || "";
  discipline[`${prefix}_discipline_threat`] = slideValues.disciplinethreat || "";
  discipline[`${prefix}_discipline_blood`] = slideValues.disciplineblood || "";
  let index = 1;
  for (const id of slideRepeating) {
    const include = slideValues[`${id}_powerkeep`];
    if (include === "0") continue;
    const name = slideValues[`${id}_powername`];
    const json = slideValues[`${id}_powerjson`];
    const power = parseJSON(json);
    discipline[`${prefix}_power_${index}_name`] = name || "";
    discipline[`${prefix}_power_${index}_display_toggle`] = "0";
    discipline[`${prefix}_power_${index}_description`] = power["Description"] || "";
    discipline[`${prefix}_power_${index}_dicepools`] = power["Dice Pools"] || "";
    discipline[`${prefix}_power_${index}_level`] = power["Level"] || "";
    discipline[`${prefix}_power_${index}_cost`] = power["Cost"] || "";
    discipline[`${prefix}_power_${index}_duration`] = power["Duration"] || "";
    discipline[`${prefix}_power_${index}_system`] = power["System"] || "";
    index++;
  }
  discipline[`${prefix}_power_count`] = index;
  for (index; index <= G_MAX_POWERS; index++) {
    discipline[`${prefix}_power_${index}_name`] = "";
    discipline[`${prefix}_power_${index}_display_toggle`] = "0";
    discipline[`${prefix}_power_${index}_description`] = "";
    discipline[`${prefix}_power_${index}_dicepools`] = "";
    discipline[`${prefix}_power_${index}_level`] = "";
    discipline[`${prefix}_power_${index}_cost`] = "";
    discipline[`${prefix}_power_${index}_duration`] = "";
    discipline[`${prefix}_power_${index}_system`] = "";
  }
  const removeDrop = {
    drop_name: "",
    drop_data: "",
    drop_category: "",
  };
  deleteCharmancerData([]);
  setAttrs({ ...discipline, ...removeDrop }, () => finishCharactermancer());
};




</script>
